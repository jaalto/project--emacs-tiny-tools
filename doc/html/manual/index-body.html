<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<!--
        Note: the LINK tags are used by advanced browsers.
-->
<head>
<title>
Emacs Tiny Tools package documentation
</title>



<!--    ......................................................................
    META TAGS (FOR SEARCH ENGINES)
    ......................................................................
-->

  <meta http-equiv="keywords"
	CONTENT="Emacs, Emacs Lisp, Tiny Tools Documentation">

  <meta http-equiv="description"
	content="">

<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Expires" content="Wed,  8 Oct 2008 15:03:20 GMT">



  <meta name="Generator"
	content="2008-08-09 18:03 Perl program t2html v2007.0918.1443 http://freshmeat.net/projects/perl-text2html">



<!--    ......................................................................
    BUTTON DEFINITION START
    ......................................................................
-->



    <style type="text/css">



        /*

            ///////////////////////////////////////////////////////////
               NOTE    NOTE    NOTE    NOTE    NOTE    NOTE    NOTE

            This is the default CSS 2.0 generated by the program,
            please see "t2html --help" for option --script-file
            to import your own CSS and Java definitions into the page.

            XHTML note: at page http://www.w3.org/TR/xhtml1/#guidelines
            It is recommended that CSS2 with XHTML use lowercase
            element and attribute names

            This default CSS2 has been validated according to
            http://jigsaw.w3.org/css-validator/validator-uri.html.en

            To design colors, visit:
            http://www.btexact.com/people/rigdence/colours/

               NOTE    NOTE    NOTE    NOTE    NOTE    NOTE    NOTE
            ///////////////////////////////////////////////////////////

            Comments on the CSS tags:

            -   block-width: "thin" (Netscape ok, MSIE nok)

            NETSCAPE 4.05

            -  In general does not render CSS very well. Eg
               font size changes does not show up in screen.
            -  :hover property is not recognised

            NETSCAPE 4.75 as of 2000-10-01

            -  Shows garbage for stylesheet section that marked CITATION.
               (IE has no trouble to show it)

            MSIE 4.0+

            - Renders CSS very well.

            Media types

            - Netscape does not transfer the CSS element definitions to
              the "print" media as it should. They only affect Browser
              or media "screen"
            - That is why you really have to say EM STRONG ... /STRONG EM
              to get that kind of text seen in printer too. You cannot
              just define P.column7 { ... }

            The @media CSS definition is not supported by Netscape 4.05
            I do not know if MSIE 4.0 supports it.

            So doing this would cause CSS to be ignored completely
            (never mind that CSS says the default CSS applies to "visual",
            which means both print and scree types.)

                @media print, screen {  P.code {..}  }

            To work around that, we separate the definitions with

                P.code { .. }               // For screen

                @media print { P.code      // for printer
                {
                    ..
                }}

            And wish that some newer browser will render it right.

        */

        /*   ///////////////////////////////////////////////// HEADINGS */

        h1.default
        {
            font-family: bold x-large Arial,helvetica,Sans-serif;
            padding-top: 10pt;
        }

        h2.default
        {
            font-family: bold large Arial,Helvetica,Sans-serif;
        }

        h3.default
        {
            font-family: bold medium Arial,Helvetica,Sans-serif;
        }

        h4.default
        {
            font-family: medium Arial,Helvetica,Sans-serif;
        }

        /*   ////////////////////////// Make pointing AHREF more visual */

        body
        {
            font-family: "Times New Roman", serif;


            /*
                More readable font, Like Arial in MS Word
                The background color is grey

                font-family: "verdana", sans-serif;
                background-color: #dddddd;
                foreground-color: #000000;

                Traditional "Book" and newspaper font
                font-family: "Times New Roman", serif;
            */
        }

        a:link
        {
            font-style: italic;
        }

        /*   A name=... link references */

        a.name
        {
            font-style: normal;
        }

        a:hover
        {
            color:           purple;
            background:      #AFB;
            text-decoration: none;
        }

            /* cancel above italic in TOC and Navigation buttons */

        a.btn:link
        {
            font-style: normal;
        }

            /* each link in TOC */


        a.toc
        {
            font-family: verdana, sans-serif;
            font-style: normal;
        }

        a.toc:link
        {
            font-style: normal;
        }

            /* [toc] heading button which appears in non-frame html */

        a.btn-toc:link
        {
            font-style: normal;
            font-family: verdana, sans-serif;
            /* font-size:  0.7em; */
        }

        /*  //////////////////////////////////// Format the code sections  */

        /*  MSIE ok, Netscape nok: Indent text to same level to the right  */

        blockquote
        {
            margin-right: 2em;
        }

        @media print   { BLOCKQUOTE
        {
            margin-right: 0;
        }}

        samp.code
        {
            color: Navy;
        }

        hr.special
        {
            width: 50%;
            text-align; left;
        }

        pre
        {
            font-family:   "Courier New", monospace;
            font-size:     0.8em;
            margin-top:    1em;
            margin-bottom: 1em;
        }

        pre.code
        {
            color: Navy;
        }

        p.code, p.code1, p.code2
        {
            /*
               margin-top:     0.4em;
               margin-bottom:  0.4em;
               line-height:    0.9em;
            */

            font-family:    "Courier New", monospace;
            font-size:      0.8em;
            color:          Navy;
        }

        /* //////////////////////// tables /////////////////////////// */

        table
        {
            border: none;
            width: 100%;
            cellpadding: 10px;
            cellspacing: 0px;
        }

        table.basic
        {
                font-family:    "Courier New", monospace;
                color: Navy;
        }

        table.dashed
        {

                /* font-family: sans-serif; /*
                /* background:  #F7DE9C; */

                color: Navy;

                border-top:     1px #999999 solid;
                border-left:    1px #999999 solid;
                border-right:   1px #666666 solid;
                border-bottom:  1px #666666 solid;
                border-width:   94%;
                border-style: dashed; /* dotted */


                /* line-height: 105%; */
        }

        table.solid
        {
                font-family:    "Courier New", monospace;
                /* afont-size:      0.8em; */

                color:          Navy;

                /* font-family: sans-serif; /*
                /* background:  #F7DE9C; */

                border-top:     1px #CCCCCC solid;
                border-left:    1px #CCCCCC solid; /* 999999 */
                border-right:   1px #666666 solid;
                border-bottom:  1px #666666 solid; /* dark grey */
                /* line-height: 105%; */
        }

        /* Make 3D styled layout by thickening the boton + right. */

        table.shade-3d
        {
                font-family:    "Courier New", monospace;
                font-size:      0.8em;

                color:          #999999; /* Navy; */

                /* font-family: sans-serif; /*
                /* background:  #F7DE9C; */

                /* border-top:  1px #999999 solid; */
                /* border-left: 1px #999999 solid; */
                border-right:   4px #666666 solid;
                border-bottom:  3px #666666 solid;
                /* line-height: 105%; */
        }

        .shade-3d-attrib
        {
            /*
                F9EDCC          Light Orange
                FAEFD2          Even lighter Orange

                #FFFFCC         Light yellow, lime

            */

            background: #FFFFCC;
        }

        table tr td pre
        {
                /*  Make PRE tables "airy" */
                margin-top:    1em;
                margin-bottom: 1em;
        }

        table.shade-normal
        {
                font-family:    "Courier New", monospace;
                /* font-size:      0.9em; */
                color:          Navy;
        }

        .shade-normal-attrib
        {
            /*  grey: EAEAEA, F0F0F0 FFFFCC
                lime: F7F7DE CCFFCC
                pinkish: E6F1FD D8E9FB C6DEFA FFEEFF (light ... darker)
                slightly darker than F1F1F1: #EFEFEF;
            */
            background: #F1F1F1;
        }

        table.shade-normal2
        {
                font-family:    "Courier New", monospace;
        }

        .shade-normal2-attrib
        {
            background: #E0E0F0;
        }

        .shade-note-attrib
        {
            /*  darker is #E0E0F0; */
            /* background: #E5ECF3; */
            background: #E5ECF3;
            font-family: Georgia, "New Century Schoolbook",
                         Palatino, Verdana, Helvetica, serif;
            font-size: 0.8em;
        }

        /* ..................................... colors ................. */

        .color-white
        {
            color: Navy;
            background: #FFFFFF;
        }

        .color-fg-navy
        {
            color: navy;
        }

        .color-fg-blue
        {
            color: blue;
        }

        .color-fg-teal
        {
            color: teal;
        }

        /*   Nice combination: teal-dark, beige2 and  beige-dark */

        .color-teal-dark
        {
            color: #96EFF2;
        }

        .color-beige
        {
            color: Navy;
            background: #F7F7DE;
        }

        .color-beige2
        {
            color: Navy;
            background: #FAFACA;
        }

        .color-beige3
        {
            color: Navy;
            background: #F5F5E9;
        }

        .color-beige-dark
        {
            color: Navy;
            background: #CFEFBD;
        }

        .color-pink-dark
        {
            background: #E6F1FD;
        }

        .color-pink-medium
        {
            background: #D8E9FB;
        }

        .color-pink
        {
            /*  grey: EAEAEA, F0F0F0 FFFFCC
                lime: F7F7DE CCFFCC
                pinkish: E6F1FD D8E9FB C6DEFA FFEEFF (light ... darker)
            */
            background: #C6DEFA;
        }

        .color-pink-light
        {
            background: #FFEEFF;
        }

        .color-blue-light
        {
            background: #F0F0FF;
        }

        .color-blue-medium
        {
            background: #4A88BE;
        }

        /* ////////////////////////////////////////////// Format columns */

        p.column3
        {
            color: Green;
        }

        p.column5
        {
            color: #87C0FF;   /* shaded casual blue */
        }

        p.column6
        {
            /* #809F69 is Forest green
               But web safe colors are:
               Lighter  ForestGreen: 66CC00
               ForestGreen: #999966 669900 339900 669966

            color: #669900;
            font-family: "Goudy Old Style"
            */
            margin-left: 3em;
            font-family: Georgia, "New Century Schoolbook",
                         Palatino, Verdana, Arial, Helvetica;
            font-size:  0.9em;
        }

            /* This is so called 3rd heading */

        p.column7
        {
            font-style:  italic;
            font-weight: bold;
        }

        @media print { P.column7
        {
            font-style:  italic;
            font-weight: bold;
        }}

        p.column8
        {

        }

        p.column9
        {
            font-weight: bold;
        }

        p.column10
        {
            padding-top: 0;
        }

        em.quote10
        {
            /*
                #FF00FF Fuchsia;
                #0000FF Blue

                #87C0FF casual blue
                #87CAF0

                #A0FFFF Very light blue

                #809F69 = Forest Green , see /usr/lib/X11/rgb.txt

                background-color:

                color: #80871F ; Orange, short of

                # font-family: "Gill Sans", sans-serif;

                line-height: 0.9em;
                font-style:  italic;
                font-size:   0.8em;

                line-height: 0.9em;
                color: #008080;

                background-color: #F5F5F5;
                #809F69; forest green
                #F5F5F5; Pale grey
                #FFf098; pale green
                ##bfefff; #ffefff; LightBlue1

                background-color: #ffefff;

                .................
                #FFFCE7         Orange very light
                #FFE7BF         Orange dark
                #FFFFBF         Orange limon

             */

             /*
             #  See a nice page at
             #  http://www.cs.helsinki.fi/linux/
             #  http://www.cs.helsinki.fi/include/tktl.css
             #
             #  3-4 of these first fonts have almost identical look
             #  Browser will pick the one that is supported
             */

             font-family: lucida, lucida sans unicode, verdana, arial, "Trebuchet MS", helvetica, sans-serif;
             background-color: #eeeeff;
             font-size:   0.8em;
        }

        @media print { em.quote10
        {
            font-style:  italic;
            line-height: 0.9em;
            font-size:   0.8em;
        }}

        p.column11
        {
            font-family: arial, verdana, helvetica, sans-serif;
            font-size: 0.9em;
            font-style: italic;
            color: Fuchsia;
        }

        /* /////////////////////////////////////////////// Format words */

        em.word
        {
            /* #809F69 Forest green */
            color: #80B06A;  /*Darker Forest green */
        }

        strong.word
        {

        }

        samp.word
        {
            color: #4C9CD4;
            font-weight: bold;
            font-family:    "Courier New", monospace;
            font-size:      0.85em;
        }

        span.super
        {
            /* superscripts */
            color: teal;
            vertical-align: super;
            font-family: Verdana, Arial, sans-serif;
            font-size: 0.8em;
        }

        span.word-ref
        {
            color: teal;
        }

        span.word-big
        {
            color: teal;
            font-size: 1.2em;
        }

        span.word-small
        {
            color: #CC66FF;
            font-family: Verdana, Arial, sans-serif;
            font-size: 0.7em;
        }

        /* /////////////////////////////////////////////// Format other */

        /* 7th column starting with double quote */

        span.quote7
        {
            /* color: Green; */
            /* font-style: italic; */
            font-family: Verdana;
            font-weigh: bold;
            font-size: 1em;
        }

        /* This appears in FRAME version: xxx-toc.html */

        div.toc
        {
            font-size: 0.8em;
        }

        /* This appears in picture: the acption text beneath */

        div.picture
        {
            font-style: italic;
        }

        /* This is the document info footer */

        em.footer
        {
            font-size: 0.9em;
        }


    </style>


    <!-- ...................................................... Java code -->

    <script type="text/javascript">

        function MakeVisual(obj)
        {
            obj.style.fontWeight = "italic";
        }

        function MakeNormal(obj)
        {
            obj.style.fontWeight = "normal";
        }

        function IgnoreErrors()
        {
            return true;
        }

        window.onerror = IgnoreErrors;

    </script>

        </head>

<body >
<hr>
               <a name="1"  id="1"></a>
               <h1>
               Document id

               </h1>



<p class="column8">
        Copyright &copy; 1995-2007 Jari Aalto


<p class="column8">
        License: This material may be distributed only subject to
        the terms and conditions set forth in GNU General Public
        License v2 or later; or, at your option, distributed under the
        terms of GNU Free Documentation License version 1.2 or later
        (GNU FDL).


<p class="column8">
        This page contains manual pages from each Emacs tiny*.el module in
        alphabetical order. The tools initially started around 1994 and
        they include many Emacs related utilities ranging from Emacs path
        configuration, email, Gnus spam reply functions, diffing, patching,
        URL jumping, eating text and many more.

<p>
<table class="shade-note">
    <tr>
    <td class="shade-note-attrib" valign="top">
    <b>      Note:</b>
 you cannot download single files or install only a single
      file. the minimum requirement are all libraries <strong class="word">tinylib*.el</strong> plus
      any individual utility package.
    </td>
    </tr>
</table>



  <a name="2" id="2"></a>
  <h2>
      Generated documentation

  </h2>




<p>
<p class="column8">
        This document is automatically generated from the Emacs lisp files
        with 2 small perl scripts. ripdoc.pl is available at
        <a href="http://cpan.perl.org/modules/by-authors/id/J/JA/JARIAALTO/" >http://cpan.perl.org/modules/by-authors/id/J/JA/JARIAALTO/</A>
        and the other is hosted at <a href="http://perl-text2html.sourceforge.net/" >http://perl-text2html.sourceforge.net/</A>

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      % ripdoc.pl `ls ti*.el|sort` | t2html.pl &gt; emacs-tiny-tools.html    </pre></td>
    </tr>
</table>


<p class="column8">
        The perl program assume that the documentation sections have been
        written in Technical Text Format (you are looking at TF layout in
        this file). An Emacs minor mode for writing TF files is available in
        package <em class="word">tinytf.el</em>.



  <a name="3" id="3"></a>
  <h2>
      Brief overview

  </h2>




<p>
<p class="column8">
        There are plenty of packages to choose from and almost nobody uses
        them all in one emacs session, so here are some recommendations.
        The setup examples for many of these packages are available in the
        unpacked kit under <em class="word">rc/emacs-rc-tiny.el</em>. Start with the top ten
        and add other packages that you find useful. The order of
        appearance is also the recommended installation order: &quot;install
        this, see the docs, and go to next one...&quot;


<p class="column8">
        Top ten or so

<ul>
	<li><strong class="word">TinyPath</strong> &ndash; Find your your whole load path hierarchy.
            No more manual updating of <samp class="word">load-path</samp> or other Emacs system
            variables. Transparent compressed lisp file support.
<li><strong class="word">Tinyeat</strong> &ndash; More easier text deletion. eg. C-backspace and
            Alt-backspace do all your text delete operations.
	</li>
<li><strong class="word">TinyTab</strong> &ndash; Set your tab to 2 4 8 and keep text and code
            nicely formatted in any mode, like in <samp class="word">mail-mode</samp>,
            <samp class="word">message-mode</samp>, <samp class="word">cc-mode</samp>, <samp class="word">lisp-mode</samp>, <samp class="word">perl-mode</samp> ...
	</li>
<li><strong class="word">TinyUrl</strong> &ndash; Jump to http url at point (C++, Perl, lisp support
            too) This minor mode can be permanently on and it marks links
            all links under current line. Press M-RET or mouse-2 to jump
            to link. Centralized url handling, no need to configure VM, Gnus or
            browse-url separately.
	</li>
<li><strong class="word">TinyMail</strong> &ndash; TAB completes your defined aliases, BBDB entries
            and /etc/password file. <em class="word">REPORTS</em> <em class="word">INCOMING</em> <em class="word">MAIL</em> in X frame or
            echo area.
	</li>
<li><strong class="word">TinyMy</strong> &ndash; Grabbag of utilities. Automatic window change when
            pointing it with mouse. Make dos files readable with C-c m D
            display minor mode etc. Automatic save of your most important
            files.
	</li>
<li><strong class="word">TinyHotlist</strong> &ndash; Keep hotlist of most important buffers in X-popup
            and jump to buffer in the list. The selection can be existing
            buffer, pointer to file (ange-ftp file) or directory. This
            is the &quot;Most important work files: permanent list&quot;
	</li>
<li><strong class="word">TinySearch</strong> &ndash; more faster &quot;search word&quot; than cumbersome C-s C-w..
            At current point hit F2/S-F2 to search the word forward/backward.
	</li>
<li><strong class="word">TinyReplace</strong> &ndash; More convenient replace than M-%. Can replace
            over multiple files (run M-x grep to and hit % in compile buffer)
            RCS file support (checkout before replace)
	</li>
<li><strong class="word">TinyEf</strong> &ndash; C-x C-f file path manipulation in minibuffer.
            Electric file composing minor mode: $ / ~ keys are special.
	</li>
<li><strong class="word">TinyCb</strong> &ndash; Change Buffers in one window. useful only if you have
            small amount of buffers in Emacs session. Use <samp class="word">C-.</samp> and <samp class="word">C-,</samp> to
            circulate buffer list in window.
	<li><strong class="word">TinyLoad</strong> &ndash; Delayed loading of lisp packages.</li>
</ul>




<p class="column8">
        Other packages

<ul>
	<li><strong class="word">TinyTf</strong> &ndash; Write text documents easily and convert them to html.
            Eg. this document uses TF format (Technical Format)
<li><strong class="word">TinyLoad</strong> &ndash; Speed up your Emacs Load up time dramatically.
	</li>
<li><strong class="word">TinyIgrep</strong> &ndash; Grepping files; directories? Get this and igrep.el
	</li>
<li><strong class="word">TinyPerl</strong> &ndash; Perl utilities, eg. viewing and browsing POD pages.
	</li>
<li><strong class="word">TinyLisp</strong> &ndash; Full of utilities for Emacs Lisp programming.
	</li>
<li><strong class="word">TinyDired</strong> &ndash; Run Ange-ftp get/put request at background
	</li>
<li><strong class="word">TinyPgp</strong> &ndash; 2nd generation PGP/remailer interface; BBDB, TM mime ...
	</li>
<li><strong class="word">TinyAd</strong> &ndash; Advice collection, make Emacs a bit more intuitive.
	</li>
<li><strong class="word">TinyScroll</strong> &ndash; Make any buffer to scroll: <em class="word">Messages</em> <em class="word">Compile</em>
	</li>
<li><strong class="word">TinyLock</strong> &ndash; Lock your Emacs session
	</li>
<li><strong class="word">TinyMbx</strong> &ndash; Browse Unix mailbox files a bit more easily.
	</li>
<li><strong class="word">TinyRlog</strong> &ndash; RCS revision log minor mode. (hooks itself to vc)
	</li>
<li><strong class="word">TinyLpr</strong> &ndash; Managing multiple printers and print styles
	</li>
<li><strong class="word">TinyDiff</strong> &ndash; Taking diffs and applying patches easily. RCS too.
	</li>
<li><strong class="word">TinyDesk</strong> &ndash; Simple emacs sessiosn saver (files used are recorded)
	</li>
<li><strong class="word">TinyProcmail</strong> &ndash; procmail mode Lint parser for procmail code
            Procmail is &quot;mail processing tool&quot; to kill spam, classify your
            mail and creating autoresponders. See <a href="http://www.procmail.org/" >http://www.procmail.org/</A>
	<li><strong class="word">TinyNbr</strong> - oct/bin/hex/dec number conversion minor mode.</li>
</ul>




<p class="column8">
        And more...which are not listed in these

<hr>
               <a name="4"  id="4"></a>
               <h1>
               Load-path.el --- Used for compiling Emacs lisp files

               </h1>



  <a name="5" id="5"></a>
  <h2>
      File id

  </h2>




<p>
<p class="column8">
        Copyright &copy;  1997-2007 Jari Aalto<br>
        $keywords:     extensions $<br>


<p class="column8">
        This code is free software in terms of GNU Gen. pub. Lic. v2 or later



  <a name="6" id="6"></a>
  <h2>
      Description

  </h2>




<p>
<p class="column8">
        This file part of the Tiny Tools Kit for Emacs: collection of
        various utilities.


<p class="column8">
        Before compiling, this file is included via -l FILE switch and it
        defines correct load path in order to find the files that are needed
        in compilation. If your private directory is not in ~/elisp or
        ~/lisp then add new path to the place shown below.



  <a name="7" id="7"></a>
  <h2>
      Note for older 19.xx Emacs

  </h2>




<p>
<p class="column8">
        If you're compiling with custom support, please include
        you custom directory to the list too. Like ~/elisp/custom


<p class="column8">
        See the doc/README.txt for starter compiling instructions for
        the Tiny Tools kit.


<hr>
               <a name="8"  id="8"></a>
               <h1>
               Tiny-setup.el --- Tiny Tools configure center.

               </h1>



  <a name="9" id="9"></a>
  <h2>
      Preface, overview of options

  </h2>




<p>
<p class="column8">
        This file will configure all Tiny Tool files. The alternative method
        is to look into each package individually and to follow instructions
        there to set up the files.


<p class="column8">
        To use this file, see control function <samp class="word">tinypath-setup</samp> for
        full description like this:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      M-x RET load-library RET tiny-setup RET
      C-h f tinypath-setup
      M-x tinypath-setup-display

      M-x tiny-setup RET                       Default 'all setup    </pre></td>
    </tr>
</table>


<p class="column9"><strong>
         To setup all tools from $HOME/.emacs, use:</strong>


<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (load &quot;~/path/to/tinypath.el&quot;)   ;; Emacs autosetup, SEE THIS!
      (require 'tiny-setup)            ;; control center
      (tiny-setup 'all)                ;; configure all at once.    </pre></td>
    </tr>
</table>



  <a name="10" id="10"></a>
  <h2>
      Administration

  </h2>




<p>
<p class="column8">
        This part should concern the maintainer only.


<p class="column7"><em><strong>
       Autoload files</strong></em>



<p class="column8">
        If <em class="word">loaddef</em> files were not included in the package or if they were
        mistakenly deleted. The tiny-setup.el startup is not possible
        without the autoload files.


<p class="column8">
        To generate autoloads recursively, call function
        <samp class="word">tiny-setup-autoload-batch-update</samp> with the ROOT
        directory of your lisp files. The only requirement is that each
        directory name is unique, because the generated autoload file name
        contains directory name: <em class="word">tiny-autoload-loaddefs-DIRNAME.el</em>


<p class="column7"><em><strong>
       Compilation check</strong></em>



<p class="column8">
        To check for possible leaks in code, ran the byte compilation
        function from shell by using XEmacs compiler. The Emacs byte
        compiler is not that good in findings all errors.
        See function <samp class="word">tiny-setup-compile-kit-all</samp>.


<p class="column7"><em><strong>
       Profiling</strong></em>



<p class="column8">
        To check how much time each file load would take, see function
        <samp class="word">tiny-setup-test-load-time-libraries</samp>. Here are results as of
        2001-03-18 running Win9x/512Meg/400Mhz, Emacs 20.7

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      Timing tinyliba,  took     2.025000 secs (autoloads)
      Timing tinylibb,  took     0.011000 secs
      Timing tinylibm,  took     0.977000 secs
      Timing tinylib,   took     0.982000 secs
      Timing tinylibxe, took     0.000000 secs
      Timing tinylibid, took     0.006000 secs
      Timing tinylibo,  took     0.005000 secs
      Timing tinylibt,  took     0.011000 secs
      total time is 4.027999997138977 seconds    </pre></td>
    </tr>
</table>

<hr>
               <a name="11"  id="11"></a>
               <h1>
               Tinyadvice.el --- Collection of adviced functions

               </h1>



  <a name="12" id="12"></a>
  <h2>
      Preface, Apr 1996

  </h2>




<p>
<p class="column8">
        What you see here is a selection of adviced functions that have
        proven to be extremely useful. Some of them have been written by
        the author (if there is no author mentioned) and some of them have
        been collected form the emacs newsgroups.


<p class="column8">
        Here is one example how to to fontify automatically, whenever
        compilation buffer runs:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (add-hook 'tinyadvice-:compile-internal-hook 'my-compile-font-lock)

      (defun my-compile-font-lock  ()
        &quot;Compile buffer fontifying immediately.&quot;
        (interactive)
        (let* ((buffer tinyadvice-:compile-internal-buffer))
          ;; According to buffer you could set up different font
          ;; keyword parameters, say for
          ;; *compilation*
          ;; *grep*
          ;; *igrep*
          ;;  My setup automatically turn on the lazy-lock too, see
          ;;  font-lock-mode-hook
          (with-current-buffer
           buffer
            (turn-on-font-lock))))    </pre></td>
    </tr>
</table>



  <a name="13" id="13"></a>
  <h2>
      Note: XEmacs

  </h2>




<p>
<p class="column8">
        These advices are for Emacs and it would be a surprise if they
        worked in XEmacs. Use at your own risk. Send fixed XEmacs
        compatible advices to maintained if you try them.



  <a name="14" id="14"></a>
  <h2>
      These advises and Emacs releases

  </h2>




<p>
<p class="column8">
        Many of these enhancements could have shipped with the Emacs
        itself. And there was a time when these were suggested to be added
        to the next Emacs release. For some reason the developers
        were not interested in the features at that time.



  <a name="15" id="15"></a>
  <h2>
      How to use this package

  </h2>




<p>
<p class="column8">
        The best way is to load this package, print the whole file and read
        the comments about individual functions and how they change things.



  <a name="16" id="16"></a>
  <h2>
      Note on adviced file functions

  </h2>




<p>
<p class="column8">
        If you set variable <samp class="word">tinyadvice-:file-compress-support</samp> to no-nil then
        you can compress files on disk at wish and emacs packages that
        read/save data from/to files doesn't even notice that you have
        compressed them. This is very valuable feature if you are low of
        quota, e.g. you can now compress Gnus <samp class="word">.newsrc.eld</samp> and gnus will
        read the .newsrc.eld.gz transparently. See <samp class="word">write-file</samp> and
        <samp class="word">find-file</samp> function documentation for full explanation of this
        feature.



  <a name="17" id="17"></a>
  <h2>
      Overview of features

  </h2>




<p>
<p class="column8">
        In general, advices are activated only if Emacs release doesn't have
        similar kind of support.

<ul>
	<li><samp class="word">gud</samp> highlights full line
<li>no dialogs in X for <samp class="word">y-or-n-p</samp> styled questions. You shouldn't
            need to lift your hands from keyboard and grab mouse for these
            dialog questions.
	</li>
<li>mouse window delete confirmation (pointing on the mode line)
	<li><samp class="word">dired</samp>, diables dired mouse properties --&gt; dired runs faster.</li>
</ul>



<ul>
	<li><samp class="word">call-last-kbd-macro</samp> ends the current macro
            before trying to execute it.
<li><samp class="word">debugger-eval-expression</samp>,  Backtrace buffer's
             &quot;e&quot; offers current word for prompt
	</li>
<li><samp class="word">dired-man</samp>       , make sure variables are initialized.
	</li>
<li><samp class="word">dired-do-rename</samp> , you can edit the old filename
	</li>
<li><samp class="word">find-file</samp>       , can load .gz and .Z file
	</li>
<li><samp class="word">goto-line</samp> and <samp class="word">imenu</samp> now widens automatically before executing
	</li>
<li><samp class="word">rename-buffer</samp>   , offers old buffer name for editing
	</li>
<li><samp class="word">recover-file</samp>    , offers buffer filename by default
	</li>
<li><samp class="word">switch-to-buffer-other-frame</samp> , selects some non existing frame
	</li>
<li><samp class="word">setenv</samp>          , getenv offers completion
	</li>
<li><samp class="word">write-file</samp>      , confirmation upon overwrite, VAX support too
	<li><samp class="word">write-region</samp>    , confirmation upon overwrite, VAX support</li>
</ul>



<ul>
	<li><samp class="word">C-x</samp> <samp class="word">;</samp>   , <samp class="word">indent-for-comment</samp> negative arg deletes comment.
<li><samp class="word">C-x</samp> <samp class="word">=</samp>   , <samp class="word">what-cursor-position</samp> shows the line number too
	</li>
<li><samp class="word">C-x</samp> <samp class="word">i</samp>   , insert buffer offers other window
	</li>
<li><samp class="word">C-x</samp> <samp class="word">C-c</samp> , <samp class="word">save-buffers-kill-emacs</samp> asks confirmation
                          to prevent accidents
	</li>
<li><samp class="word">C-x</samp> <samp class="word">b</samp>   , <samp class="word">swich-to-buffer</samp> ask confirmation
                          for non-existing buffers.
	<li><samp class="word">C-x</samp> <samp class="word">C-b</samp> , list-buffers puts you to &quot;*Buffer List*&quot;</li>
</ul>



<ul>
	<li>compilation: buffer auto scroll (disabled, see 'handling advices')
            Smart save feature (only .cc .h files, not
            all emacs files). Find-file is done in non dedicated frame.
	            TAB completes filenames.</li>
</ul>




<p class="column8">
	<ul>
	<li>completion:  case sensitive filename completion</li>
</ul>




<p class="column8">
	<ul>
	<li>ediff:  list only files that have diff over directories.</li>
</ul>




<p class="column8">
	<ul>
	<li>grep:   filename completion with TAB key</li>
</ul>



<ul>
	<li><samp class="word">vc-print-log</samp> ,put cursor on the buffer's revision number.
            Smarter <samp class="word">vc-mode-line</samp> , shows &quot;b&quot; if version is in the middle.
            <samp class="word">vc-register</samp> creates RCS directory if does not exist and
             offers checking as &quot;original&quot; file with existing version
             numbers (tracking 3rd party sources).
             User to set the initial comment when doing 1st CI.
             If <samp class="word">tinyadvice-:cvs-buffer-read-only</samp> is nil, then keep.
	             CVS files in writable mode (the default CVS behavior)</li>
</ul>





  <a name="18" id="18"></a>
  <h2>
      Handling advices

  </h2>




<p>
<p class="column8">
        If you have some other emacs version that is not supported in the
        <samp class="word">tinyadvice-:advice-table</samp> you can modify the regexps in the list and try
        if the advice works in your emacs. If it does, please drop me a
        mail immediately and I update the regexp. If some advice annoys
        you, there is simple method how you disable advice(s).

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (setq tinyadvice-load-hook '(tinyadvice-install my-tinyadvice-load-hook))

      (defun my-tinyadvice-load-hook ()
        &quot;Configure 'tiny tool's advices' to my taste.&quot;
        (interactive)
        ;; This diables two advices
        (tinyadvice-advice 'disable
           '(switch-to-buffer mouse-delete-other-windows)))
      (require 'tinyadvice)    </pre></td>
    </tr>
</table>



  <a name="19" id="19"></a>
  <h2>
      Disabling disturbing advice by hand

  </h2>




<p>
<p class="column8">
        If some piece of advice disturbs or causes trouble in your current
        emacs session, you can deactivate it immediately. First you have to
        know the function name that generates problems. Say you used <samp class="word">C-x</samp>
        <samp class="word">C-b</samp> <samp class="word">switch-to-buffer</samp> and you don't like the confirmation for
        non-existent buffers. You can disable this behavior by calling:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      C-u M-x tinyadvice-advice    </pre></td>
    </tr>
</table>


<p class="column8">
        and giving the function name <samp class="word">switch-to-buffer</samp> to it. To permanently
        turn it off in your emacs sessions, see previous lisp code.



  <a name="20" id="20"></a>
  <h2>
      Code note

  </h2>




<p>
<p class="column8">
        You see this in the code:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (when (tinyadvice-activate-p)
          (defadvice ..    </pre></td>
    </tr>
</table>


<p class="column8">
        If emacs version is wrong, the advice is <strong class="word">never</strong> actually assembled.
        You can't activate or deactivate this function with <samp class="word">tinyadvice-advice</samp>.



  <a name="21" id="21"></a>
  <h2>
      Many thanks to, in no particular order:

  </h2>




<p>
<p class="column8">
        Vladimir Alexiev        <em><a href="mailto:vladimir@cs.ualberta.ca" >vladimir@cs.ualberta.ca</A></em>
        Kevin    Rodgers        <em><a href="mailto:kevinr@ihs.com" >kevinr@ihs.com</A></em>
        Ilya     Zakharevich    <em><a href="mailto:ilya@math.ohio-state.edu" >ilya@math.ohio-state.edu</A></em>
        Peter    Breton         <em><a href="mailto:pbreton@i-kinetics.com" >pbreton@i-kinetics.com</A></em>
        T. V.    Raman          <em><a href="mailto:raman@adobe.com" >raman@adobe.com</A></em>


<hr>
               <a name="22"  id="22"></a>
               <h1>
               Tinyappend.el --- A simple text gathering to buffer utility.

               </h1>



  <a name="23" id="23"></a>
  <h2>
      Preface, March 1994

  </h2>




<p>
<p class="column8">
        This package does nothing fancy, it gathers text from buffers with
        few key bindings. Later you can then peek on that buffer, arrange
        text etc. <samp class="word">C-x</samp> <samp class="word">a</samp> is handy when appending data to buffer, but
        it's annoying that you have to give &quot;buffer name&quot; all the time This
        one adds to buffer &quot;*append*&quot; automatically, creating one if it
        doesn't exist.


<p class="column8">
        I'd strongly recommend you to keep <samp class="word">transient-mark-mode</samp> (Emacs) on
        all the time, so that you can see if you're adding a selected
        region into the <em class="word">append</em> buffer. If the region is not active, these
        functions normally add the current line to the <em class="word">append</em> buffer.



  <a name="24" id="24"></a>
  <h2>
      Default bindings

  </h2>




<p>
<p class="column8">
        My keyboard (HP-UX / X window) just happens to access
        these keys easily, so I chose them. Add function
        <samp class="word">tinyappend-install-default-key-bindings</samp> to
        <samp class="word">tinyappend-:load-hook</samp> if you want to use these key bindings.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      C-c =       Append to the end
      C-c -       Append to the beginning
      C-c _       underscore, Kill (empty) *append* buffer
      C-c |       Yank text from append buffer    </pre></td>
    </tr>
</table>

<hr>
               <a name="25"  id="25"></a>
               <h1>
               Tinybookmark.el --- Keep file in organized sections

               </h1>



  <a name="26" id="26"></a>
  <h2>
      Preface, feb 1995

  </h2>




<p>
<p class="column8">
        Long ago I used little function I wrote that inserted section
        breaks, those that I call <samp class="word">book</samp> <samp class="word">marks</samp>. There was also
        <samp class="word">folding.el</samp> to keep the code in separate sections. Findings things
        was easy when you just searched either book marks or jumped between
        folds. Next <em class="word">imenu.el</em> was announced which provided X-pop up for
        book marks and adding support to it was the start of this package.



  <a name="27" id="27"></a>
  <h2>
      Overview of features

  </h2>



<p>
<ul>
	<li>Provide 'setting book marks' functions: Add
            repeated characters and sequences up till end of line with
            named identifier.
<li>Automatically parse book marks from file, if it contains
            RCS identifier <samp class="word">bookMarkRegexp</samp> which defines book mark syntax for
            the file. Uses X-popup <span class="word-ref">[imenu]</span> to show those book marks and
	            moving between them.</li>
</ul>





  <a name="28" id="28"></a>
  <h2>
      How to keep files organized

  </h2>




<p>
<p class="column8">
        There are several tools to keep your code organized and they are at
        their best if you think how they can co-operate. There is
        <em class="word">folding.el</em> and <em class="word">tinybookmark.el</em>, which might seem to do double
        job, since they both divide code into more easily manageable
        sections. The key point is that when folding is used, one works
        <strong class="word">within</strong> some special section and possibly want to hide all the
        rest of the code. But when jumping easily back and forth on the
        buffer, it us <em class="word">unfolded</em> and TinyBookmark is used. Now, to confuse
        you more, there is also <em class="word">imenu.el</em> which can be used to jump inside
        code. It can be configured so that it will pick all function names
        inside list, and when you want to go to specific function, just
        pick one from imenu.


<p class="column8">
        To summarize:

<ul>
	<li>folding.el      &ndash; for hide unneeded code,
                               clear view on the structure
<li>tinybookmark.el &ndash; Jump between/finding  <strong class="word">large</strong> code sections
	</li>
<li>imenu.el        &ndash; finding specific function, more detailed control.
	<li>tinyhotlist.el  &ndash; Add/remove files from permanent X-popup list</li>
</ul>





  <a name="29" id="29"></a>
  <h2>
      How to use this package

  </h2>




<p>
<p class="column8">
        There is following function that inserts book mark on the current line

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      tinybookmark-insert    </pre></td>
    </tr>
</table>


<p class="column8">
        There is also normal repeat function, that fills line with your
        pattern:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      tinybookmark-repeat    </pre></td>
    </tr>
</table>


<p class="column8">
        Normally the usual book mark separator is the &quot;.&quot; &lt;dot&gt; , which
        isn't so &quot;noisy&quot; as continuous '-' line. Normally you add some
        unused ID character, like '&amp;' at front of real book mark, like
        this:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (defun test ()
       (progn
        ..
        (goto-char ..
        ;; ^^^^^^^^^^^^^^^^^^^^^^^ sepratorInsideCode ^^^    </pre></td>
    </tr>
</table>


<p class="column8">
        The <samp class="word">How-to-use</samp> is book mark, because it has <samp class="word">&amp;</samp> on it, whilst the
        latter isn't &ndash; it is used inside code to make it more readable and
        The latter on is not included in <em class="word">imenu</em>.



  <a name="30" id="30"></a>
  <h2>
      About the book mark identifier naming

  </h2>




<p>
<p class="column8">
        When you name the breaks, keep in mind that when identifiers are
        sorted, the ones that start with big letters A-Z show up first, a-z
        come next. Allthougt it would be convenient to have all subwords in
        capital, it is usually better to start with lowercase letter,
        because it's easily unintentionally mix up/down case letters.
        Besides you have to reah out for shift to have uppercase.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      ............. breakName ...         ;prefered, starting low
      ............. BreakName ...         ;watch out for mixed case!    </pre></td>
    </tr>
</table>


<p class="column8">
        it is also adviced that you choose some common beginning for the
        identifier, so that they get sorted nicely. If you define variables
        at the beginning of file it might be good idea to attach beginning
        letter like <samp class="word">v-</samp> for variables before the real identifier name
        begins, like:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      ............. v-globals ...
      ............... v-hooks ...    </pre></td>
    </tr>
</table>


<p class="column8">
        Of course, we can now use the uppercase letter trick to have them
        sorted first in the list, just change <samp class="word">v-</samp> to <samp class="word">V-</samp>. Generally
        you should think which ones do you use most, do you leave the
        variables alone when you have defined them and mostly work with new
        functions? Then the variables can stay at the end of list and
        there is no need for <samp class="word">V-</samp> trick. but if you need to access
        variables often, then you might want to see variables first in the
        list. It's up to your decision how you name the variables and how
        you want to see them listed.



  <a name="31" id="31"></a>
  <h2>
      Breaks and sub-break naming

  </h2>




<p>
<p class="column8">
        If you have very large file, you'll probably need major breaks,
        level one breaks and possibly level 2 breaks too. To keep the list
        well sorted, put the functions into bigger groups and name the
        sub-level breaks so that they have some common beginning in respect
        to the major break they belong to. Let's see an example where
        you're dealing with mail handling. Notice the CAPITAL letter.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      ;; ################################# &amp;h-Header ###
      ;;  this is beginning block of header handling

      ;;  Some special function here to handle CC
      ;;  field, killing all recipients, or only
      ;;  some of them

      ;;  More detailed functions under h-cc, Not
      ;;  named, because there is only 2 small funcs
      ;;  easily found.    </pre></td>
    </tr>
</table>


<p class="column8">
        Again there are couple of points to follow here. All the tricks are
        discussed already: the <samp class="word">Big</samp> letter trick put's major break to the
        top of imenu list, common beginning keeps the subsections together.



  <a name="32" id="32"></a>
  <h2>
      Example breaks

  </h2>




<p>
<p class="column8">
        Some book mark breaks are proposed here, but you can use whatever you
        like. Thumb of rule: be consistent, always use same convention in
        your files and consider the &quot;level of noisiness&quot; of your breaks, so that
        they build up nicely and the code is easy to read. Too many
        <strong class="word">different</strong> breaks is not good idea, because they clutter the view
        fast, instead use variations on a theme: same break character but
        varying spaces and continuous character lengths.


<p class="column8">
        Thumb rule: select 1-3 break chars, and never change them in you
        files; your files look alike. Vary the spacing, not the break
        characters.


<p class="column8">
        These are 'noisy breaks' , Major section separators, pick only one
        and use it in your files, do not use all three!

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      ##############################################################
      %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
      ||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||    </pre></td>
    </tr>
</table>


<p class="column8">
        less noisy breaks

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      .`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`.`

      .^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.^

      .:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:.:
      .~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~    </pre></td>
    </tr>
</table>


<p class="column8">
        This is sub section break

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      ................................................................    </pre></td>
    </tr>
</table>


<p class="column8">
        This is even lighter subsection break (varying spacing)

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      ...  ...  ...  ...  ...  ...  ...  ...  ...  ...  ...  ...  ...    </pre></td>
    </tr>
</table>


<p class="column8">
        'Draw one's attention' break: something special in this section


<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      --++-- --++-- --++-- --++-- --++-- --++-- --++-- --++-- --++--    </pre></td>
    </tr>
</table>


<p class="column8">
        Internal break 1, inside function, long case statement etc.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^    </pre></td>
    </tr>
</table>


<p class="column8">
        Internal break 2, to separate long case elements etc.


<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      ^^^  ^^^  ^^^  ^^^  ^^^  ^^^  ^^^  ^^^  ^^^  ^^^  ^^^  ^^^  ^^^    </pre></td>
    </tr>
</table>


<p class="column7"><em><strong>
       Book Mark cache</strong></em>



<p class="column8">
        So that imenu works fast, it is not desirable that the breaks are
        always parsed from scratch, because it takes time to scan the file
        for possible book marks. That's why the information is cached. If
        the break cache is empty, the breaks are gathered from buffer and
        stored to the cache and when you call the imenu, the cache is
        offered to it --&gt; fast response time. When you add new breaks to
        the buffer <span class="word-ref">[especially at the beginning of code development]</span>, you
        may want to call function <samp class="word">tinybookmark-parse</samp> which will empty the
        cache and re-read all book marks. If you write lot of code the
        points that were cached do no longer represent exact points of book
        marks, because they have been sliding off their places. If you want
        <em class="word">always</em> have updated book mark points, there is variable
        <samp class="word">tinybookmark-cache-update</samp> which you can set to 'always, if you
        want the cache to be updated always prior showing X-menu. In large
        buffer this remarkably slows down the menu appering. See variable
        for more choices.



  <a name="33" id="33"></a>
  <h2>
      Automatic book mark detection

  </h2>




<p>
<p class="column8">
        In order book marks to be detected in file, you may define following
        RCS identifier <span class="word-ref">[see ident(1)]</span> preferably at the beginning of your
        file:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      $BookMarkRegexp:&lt;space&gt;'REGEXP'&lt;space&gt;$    </pre></td>
    </tr>
</table>


<p class="column8">
        Be careful so that the identifier is <strong class="word">exactly</strong> in this form: pay
        attention to spaces and (') around the REGEXP. The regular
        expression tells what line can be considered as book mark and the
        book mark name is indicated in subexpression 1 [\\(.*\\)] , look at
        this file, how it is constructed. In order to find all book marks
        and build up the cache, it needs to widen the buffer in case the
        file is narrowed with some folding or outline editor. When the
        cache has been built the buffer's narrowing is restored, so you
        shouldn't even notice this. Of course you don't want to find book
        marks from your RMAIL file.


<p class="column8">
        One word about the regexp construction, let's see regexp that
        matches the identifier:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      &amp;+\\([^ ]+\\)    </pre></td>
    </tr>
</table>


<p class="column8">
        Pay attention to using exclusive regexp, not just '.*'
        construction. When you use folding or outline editor the '.*' form
        is very ill behaving, because if the line being scanned is
        currently folded, IT WILL MATCH WHOLE folded section --&gt; your
        identifier surely isn't that one. We can't unfold the sections
        during scanning, because if there are subfolds, what editor is on
        use .. it's too complex/slow to handle such situations. But using
        the exclusive list [^ ] will surely match the identifier, because
        it stops when it can find first space. This means that you can't
        use <strong class="word">spaces</strong> inside the identifiers. Cat the words together.



  <a name="34" id="34"></a>
  <h2>
      If the BookMarkRegexp isn't defined in file

  </h2>




<p>
<p class="column8">
        Then the programs tries to search for the default book marks.
        See function <samp class="word">tinybookmark-regexp-default</samp> for more.



  <a name="35" id="35"></a>
  <h2>
      Message: Empty cache. Building...

  </h2>




<p>
<p class="column8">
        Do you wonder why you get this message displayed, while you were
        sure that you the buffer had cache already? Don't be surprised. This
        is totally normal behavior: whenever you switch mode for the
        buffer the new mode <strong class="word">kills</strong> all local variables, including cache
        information. Obviously the information must be restored when you
        call the hot list again. The cache could have been programmed to be
        buffer local, but in the present format only one cache s active at
        the time. This was simpler to implement and manage in the code.



  <a name="36" id="36"></a>
  <h2>
      About imenu

  </h2>




<p>
<p class="column8">
        You definitely want to look at the documentation of imenu to find
        many more usages for it. It makes your day shine in X-display. You
        should also configure few variables for it, like:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (setq imenu-max-items 20)    </pre></td>
    </tr>
</table>



  <a name="37" id="37"></a>
  <h2>
      Test run

  </h2>




<p>
<p class="column8">
        Load this file and set those key bindings mentioned. Hit the mouse
        bindings and you're running book mark package. Since the break
        marks are used in commentary also, the list of book marks are not
        in their most informative form, I use following convention to name
        book marks;

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      'v-'     variable topic
      't-'     text topic    </pre></td>
    </tr>
</table>



  <a name="38" id="38"></a>
  <h2>
      Design thoughts

  </h2>




<p>
<p class="column8">
        Sooner or later someone wonders: &quot;Can't we have sub-breaks listed
        nicely with indentation in front lines in X-popup?&quot; Present answer
        &quot;No&quot;, since it would require keeping track of the 'Main break' and
        then seeing if there exist sub-breaks. Immediately this leads to
        question &quot;What is the main break?&quot;, and if we say main breaks start
        with &quot;#|/%&quot; character set we limit the use of breaks. Besides deciding
        what are sub-breaks, main-breaks with regexp may be too slow. Besides,
        the breaks are intended to to give an <em class="word">overview</em> of the buffer.
        Please use imenu to find single functions if you don't feel like
        tapping couple of pgUp/pgDown after the point is positioned in the break
        section.



<hr>
               <a name="39"  id="39"></a>
               <h1>
               Tinybuffer.el --- Change buffers in current window.

               </h1>



  <a name="40" id="40"></a>
  <h2>
      Preface, May 1996

  </h2>




<p>
<p class="column8">
        With this small package you can switch to next or previous buffer
        in a current window. If you only have small amount of buffers in
        <samp class="word">buffer-list</samp>, this may be the fastest way to select a working
        buffer. In the other hand, if you have more than 20 working
        buffers, I'd recommend that you use exellent substring buffer
        switching utility instead: <em class="word">iswitchb.el</em> which is included in
        standard Emacs distribution


<p class="column8">
        If you have windowed environment and want to have hot list of your
        permanent buffers available, use <em class="word">imenu.el</em> or <em class="word">tinyhotlist.el</em> and
        you can select RMAIL; GNUS; VM; <em class="word">scratch</em> buffers instantly.



  <a name="41" id="41"></a>
  <h2>
      Description

  </h2>




<p>
<p class="column8">
        If you don't want default bindings, clear the installation with
        following command. This must be prior the 'require statement.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (setq tinybuffer-:load-hook nil)    </pre></td>
    </tr>
</table>


<p class="column8">
        To change buffers forward or backward, the default setup would install
        following key bindings:

<ul>
	<li>Control-&gt;       Next buffer
<li>Control-&lt;       Previous buffer
	</li>
<li>Alt-Control-&lt;   Iswitch mode, where you can scroll with &lt; and &gt;.
            Press RET to select or ESC/q to quit
            This may come handy if you have many buffers and just want to
            skip 2-5 buffers fast. E.g. if the buffers are font-lock
            controlled, switching to them with the C-, and C-, keys might
            be slow due to fontification which happens every time you
	            switch over a buffer.</li>
</ul>




<p class="column8">
        In iswitch mode, the command prompt looks like following. The mode name is
        put last if buffer has and associated file name, so that filename gets
        as much display as possible.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
          &quot;TinyIswitch: my-lisp.el     ~/elisp/my-lisp.el &lt;Emacs lisp&gt;&quot;
          &quot;TinyIswitch: test           &lt;dired&gt; ~/tmp/test&quot;
          &quot;TinyIswitch: *Messages*     &lt;fundamental-mode&gt;&quot;    </pre></td>
    </tr>
</table>


<p class="column8">
        Have a look at <samp class="word">tinybuffer-:ignore-regex</samp> which you can configure
        to ignore some buffers permanently.



  <a name="42" id="42"></a>
  <h2>
      Thanks

  </h2>




<p>
<p class="column8">
        Original idea for this package comes from <em class="word">yic-buffer.el</em>
        by choo@cs.yale.edu (young-il choo) 1990-08-07.


<hr>
               <a name="43"  id="43"></a>
               <h1>
               Tinycache.el --- Maintain a cache of visited files [compile,dired]

               </h1>



  <a name="44" id="44"></a>
  <h2>
      Preface, overview of features

  </h2>




<p>
<p class="column8">
        This package is meant to be used with <samp class="word">dired</samp> and compilation
        buffers. When you load file from either one, the file is
        &quot;remembered&quot;. This way you can browse bunch of files easily and
        when you have finished you can flush the cache and get rid of all
        vieved files.



  <a name="45" id="45"></a>
  <h2>
      Dired description

  </h2>




<p>
<p class="column8">
        When you load a file from dired with <samp class="word">dired-view-file</samp>, the
        file is remembered. You can load several files for viewing and when you
        have finished, call <samp class="word">tinycache-flush</samp> (Defaults to <samp class="word">C-c</samp> <samp class="word">k</samp> in
        dired) to remove all the remembered (cached) files from emacs.


<p class="column8">
        This way you don't end up having files that you're not interested
        in any more. Using the cache makes browsing bunch of files very
        easy. Each dired buffer has it's own cache. The cache is also
        flushed if you kill the dired buffer.



  <a name="46" id="46"></a>
  <h2>
      Compilation cache description

  </h2>




<p>
<p class="column8">
        Maintain also a cache of buffers visiting files via the
        <samp class="word">next-error</samp> and <samp class="word">compile-goto-error</samp> commands; each compile/grep
        buffer has its own cache.  To kill the cached buffers manually, use
        <samp class="word">C-c</samp> <samp class="word">C-d</samp> (compile-flush-cache) in the compile/grep buffer;
        deleting the compile/grep buffer automatically kills the cached
        buffers.  To disable the cache, set <samp class="word">compilation-find-file-cache</samp>
        to a non-list value (e.g. 'disable).


<p class="column8">
        After loading this file, every file that is loaded by calling some
        compile function, i.e. <samp class="word">compile-goto-error</samp>, is cached if it is not
        in emacs already. I.e. when you fix some small errors in other
        files, you may not want to keep those files in emacs after you've
        done; remember, those got loaded during the calls to
        compile-goto-error. The easiest way to get rid of these extra
        files, that were not originally in emacs, is to:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      A. kill compilation buffer, C-x k *compilation*
      B. Call M-x tinycache-flush directly    </pre></td>
    </tr>
</table>


<p class="column8">
        See <em class="word">igrep.el</em> also how you can browse (grep) files easily and when
        you've done, you can call this package top get rid of those browsed
        files.



  <a name="47" id="47"></a>
  <h2>
      Cache minor mode indication &ndash;  Controlling the cache flag

  </h2>




<p>
<p class="column8">
        Mode line indication shows for loaded buffer

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      &quot;+C&quot;    if file is loaded as cached.
      &quot;+c&quot;    If you have manually turned off the cache    </pre></td>
    </tr>
</table>


<p class="column8">
        And for root buffer where the file were loaded, normally
        compilation or dired buffer, the mode line shows

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      &quot;+CN&quot;  where N is number of files currently in the cache    </pre></td>
    </tr>
</table>


<p class="column8">
        Sometimes you want to keep some file that belongs to the cache
        and you don't want to loose it when you execute <samp class="word">M-x</samp> <samp class="word">tinycache-flush</samp>
        or when you kill the root buffer.


<p class="column8">
        For that purpose there is function <samp class="word">tinycache-mode</samp> to turn
        off the cache for current buffer. When the cache mark says
        &quot;+c&quot; in the mode line, it tells you that the file will not be
        killed when you <samp class="word">tinycache-flush</samp> is called.


<p class="column8">
        Note: the root buffer's xx count is not updated when you kill
        buffer that was cached. So if the count says 10, and you kill 3
        files that, the count will still still say 10. The count is
        updated only when you load some <em class="word">new</em> file from the root buffer.
        At that time all the buffers cached are checked and the ones that
        do not exist any more are removed.



  <a name="48" id="48"></a>
  <h2>
      Buffer list commands

  </h2>




<p>
<p class="column8">
        There are some additional commands added to buffer list which
        helps you to keep track of the cached files better. The &quot;c&quot;
        prefix is chosen for (c)ache related commands.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      C-c c m     mark all cached files
      C-c c d     mark as deleted
      C-c c u     unmark cached files.    </pre></td>
    </tr>
</table>



  <a name="49" id="49"></a>
  <h2>
      Dired mode commands

  </h2>




<p>
<p class="column8">
        Similar to buffer list, there is some dired commands too

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      C-c c k     tinycache-flush, remove all cached files from this dired
      C-c c m     tinycache-dired-mark
      C-c c u     tinycache-dired-unmark    </pre></td>
    </tr>
</table>



  <a name="50" id="50"></a>
  <h2>
      Thanks

  </h2>




<p>
<p class="column8">
        Kevin Rodgers, his <em class="word">igrep.el</em> gave me an idea for this. The
        original cache code from where this package evolved was
        written by Kevin under name <em class="word">compile-cache.el</em>

<hr>
               <a name="51"  id="51"></a>
               <h1>
               Tinychist.el --- Command history save/restore utility

               </h1>



  <a name="52" id="52"></a>
  <h2>
      Preface, apr 1996

  </h2>




<p>
<p class="column8">
        In newsgroup post to gnu.emacs.help there was discussion about
        saving and restoring emacs command history between session. Fred G.
        Athearn <em><a href="mailto:fga@maple.sover.net" >fga@maple.sover.net</A></em> sent a help message to a person
        asking for it describing how to print out command-history and
        saving it into a file with <samp class="word">C-x</samp> <samp class="word">C-w</samp>. This little package tries
        to automate everything, so that when you load it, it will
        automatically load command history for the right emacs and when you
        exit emacs, the command history is saved to disk.



  <a name="53" id="53"></a>
  <h2>
      Overview of features

  </h2>



<p>
<ul>
	<li>Save and restore emacs command history
<li>Suport simultaneous emacs sessions, different history for
            each one. Eg. &quot;-name Mail&quot; is associated with &quot;mail&quot; emacs history,
            &quot;-name News&quot; is associated with &quot;news&quot; history. This trick works
            on non-windowed tty too, since the switch is evaluated and cached
	            internally in those cases.</li>
</ul>





  <a name="54" id="54"></a>
  <h2>
      Default save file from -name parameter

  </h2>




<p>
<p class="column8">
        The default save name of command history file is extracted from
        the frame parameter. It is quite customary that people have
        several emacs open in their X display, each one dedicated to
        specific task.


<p class="column8">
        The key here is, that you should make a habit of naming your
        emacs by task when you start it:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      % emacs -name Mail &amp;        # My mail emacs
      % emacs -name C++1 &amp;        # My C++ project 1
      % emacs -name News          # for news reading    </pre></td>
    </tr>
</table>


<p class="column8">
        This effectively sets the frame's name to &quot;-name&quot; parameter's
        value. But old emacs versions are a little picky about the order of
        command line options, please look at the info pages in which order
        you must specify additional arguments. (info pages, Node:Initial
        Options) For non-windowed environment, this trick doesn't quite
        work out of the box, because emacs doesn't accept the name option
        at all. Let's try to start fresh emacs to an xterm, not to separate
        frame and see what happens. Order of the options is important here.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      % emacs -nw -q -name Mail  &amp;    </pre></td>
    </tr>
</table>


<p class="column8">
        What happens, is that you get two new buffers: &quot;-name&quot; and &quot;Mail&quot;,
        and this is not what we intended. If we ask the frame name in this
        emacs, it says &quot;terminal&quot; or something similar. What we do instead,
        is ,that we install our own command line handler in non-windowed
        emacs and then we're able to intercept the &quot;-name&quot; option and it's
        parameter. When the emacs is killed, we then again look at the
        cached &quot;-name&quot; option to derive the save file postfix. If you're
        interested in adding your own command line option, see function
        ti::add-command-line-arg in tinylibm.el



  <a name="55" id="55"></a>
  <h2>
      How it works

  </h2>




<p>
<p class="column8">
        Your emacs must support <samp class="word">kill-emacs-hook</samp>, so that the command
<hr>
               <a name="56"  id="56"></a>
               <h1>
               Tinycomment.el --- Smart comment setting utility

               </h1>



  <a name="57" id="57"></a>
  <h2>
      Preface, Sep 1994

  </h2>





<p>
<p class="column8">
        In 1994-10-18 Era Eriksson wrote in gnu.emacs.help that he didn't
        like 'modes' because they redefined his tab key strangely. What he
        wanted was tab 8 in _every possible case_. He wrote: &quot;..if mode
        messes with tab key, I don't want it&quot;. He also wanted his comments
        always to be positioned at column 56 (tab #7). The problem was that
        how he could he add comments with tab key, when the mode occied it
        already. He also always used to program using <samp class="word">fundamental-mode</samp>;
        what a cool dude. As a result this package was born. The
        original lisp file sent  to Era was posted under name
        general-comment.el.



  <a name="58" id="58"></a>
  <h2>
      What's this all about, short introduction

  </h2>




<p>
<p class="column8">
        Let's see...You're in C/C++ mode, and want to switch to better mode
        before starting to adjust comments. But wait, the new mode doesn't
        know about C++-comments! Or if you're editing ~/.Xdefauls, there is
        no mode for it (at the time of writing), no-one to know the comment
        syntax. Boom. Now it's time to give this packet a run. It hooks
        itself directly to <samp class="word">\M-;</samp> replacing any previous function. The
        packages defines comment syntax and position on the fly when it can
        identify the file name. If the file isn't known then it passes
        control to mode to handle the commenting. This is handy in
        temporary buffers that do not have filename: e.g. <em class="word">scratch</em> buffer.
        Repetitive calls to <samp class="word">M-;</samp> shift between comment <em class="word">classes</em>: comment
        is adjusted according to previous one, or move it on the line.



  <a name="59" id="59"></a>
  <h2>
      Overview of features

  </h2>



<p>
<ul>
	<li>Replaces <samp class="word">M-;</samp> comment key. Suitable for any major mode.
<li>Determine comment variables on the fly, no matter where you
            are or what mode you are using.
	</li>
<li>There is no-list that tells not to touch this mode's commenting.
            This is for modes that has <samp class="word">comment-end</samp> which aren't supported.
	</li>
<li>Repetitive <samp class="word">M-;</samp> converts single comment into <em class="word">bigger</em> <em class="word">classes</em>.
	</li>
<li>Position new comment on empty line by looking at previous
            comment.
	</li>
<li>It is possible to define column position for those comments
            that are not allowed to move This handy for long lines
            or special comments.
	</li>
<li>If there are multiple so called comments, like $#var # comment
	            in <samp class="word">perl-mode</samp>, the last # char is treated as a comment.</li>
</ul>





  <a name="60" id="60"></a>
  <h2>
      Limitations

  </h2>




<p>
<p class="column8">
        This isn't designed for modes that have <samp class="word">comment-end</samp>, you get
        only '/* */' string e.g. in C-mode and no comment class shifting.



  <a name="61" id="61"></a>
  <h2>
      Examples

  </h2>




<p>
<p class="column8">
        At the end of file there is simple general editing mode, which can
        be used for perl, shells, awk, C++ <span class="word-ref">[sometimes]</span>


<hr>
               <a name="62"  id="62"></a>
               <h1>
               Tinycompile.el --- Compile buffer additions. Minor mode.

               </h1>



  <a name="63" id="63"></a>
  <h2>
      Preface, mar 1997

  </h2>




<p>
<p class="column8">
        When I was doing grepping over multiple files with igrep.el the
        results that were inserted into buffer were too long: There were
        2-6 directory paths which occupied 40 characters and the actual
        grep hits were continued with \ character to the right. That was
        awfull to read. I couldn't get clear look at the grep results. I
        decided that there must be a way to clarify the results somehow, so
        I started writing this package.



  <a name="64" id="64"></a>
  <h2>
      Overview of features

  </h2>



<p>
<ul>
	<li>Shortening directory paths
<li>Killing non-interesting files from the buffer
	<li>Hiding commented lines</li>
</ul>




<hr>
               <a name="65"  id="65"></a>
               <h1>
               Tinydesk.el --- Save and restore files between Emacs sessions

               </h1>



  <a name="66" id="66"></a>
  <h2>
      Preface, feb 1995

  </h2>




<p>
<p class="column8">
        At work working with windowed system, Emacs stays open from day to
        day. In fact people seldom even logout, so Emacs and the files
        just wait there nicely and there is seldom a need for a sophisticated
        session saver.


<p class="column8">
        But sometimes sometimes it may be necessary to visit lab next
        floor to see what's troubling a C++ program. There has to be a way
        to transfer the list of files that was being editing and bring
        them into lab where person can replicate the setup.


<p class="column8">
        These functions save Emacs configuration into file, which can later be
        opened again in Emacs somewhere else. Later Emacs versions
        introduced &quot;~/.saves*&quot; files that you may find disturbing occupying
        your home directory with many files. With this package all the
        files are grouped in only one &quot;state&quot; state file, which can be reused.


<p class="column8">
        Hopefully someone finds use for this also, although there exist
        much more better desktop savers, which save points, marks and
        modes.



  <a name="67" id="67"></a>
  <h2>
      Overview of features

  </h2>



<p>
<ul>
	<li>Simple desktop: only filenames and directories are read/saved.
            Unlike the other desktop savers, this one can also UNLOAD files
            from Emacs. You just tell it to remove 'these files listed in
            state file state.XXX', and those files will be removed from
            your Emacs buffers. You can collect 'projects' and switch
            between them easily: after project1, It can can be unload and
	            load project3 instead.</li>
</ul>




<p class="column8">
	<ul>
	<li>Parse any file that includes filenames and comments</li>
</ul>



<ul>
	<li>If there were any invalid entries in the state file,
            the state file contents is shown to user and the entries which
	            had problems are marked.</li>
</ul>




<p class="column8">
	<ul>
	<li>State file editing (tinydesk-mode):</li>
</ul>



<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      --  load single file on the line
      --  clear face properties from buffer, so that they don't
          disturb your view.
      --  parse files for loading.
      --  Show files that cannot be loaded.    </pre></td>
    </tr>
</table>

<ul>
	<li>In regular intervals save the state of Emacs (files loaded)
            If Emacs crashes you can recover the previous session.
            See function <samp class="word">tinydesk-auto-save</samp> for more. Similar functionality
            (&quot;.saves&quot;) is in new Emacs releases, but this package
	            was originally written using 19.28</li>
</ul>



<ul>
	<li>CRASH RECOVERY: If Emacs crashes, or you have to kill it
            with <samp class="word">-HUP</samp> if it hangs, it leaves autosaved files around. When
            you boot up again, you need to reload the existing files AND
            recover any autosaved files. The best way to get your Emacs
            back where it was, is that you load the state file for editing:
            <samp class="word">M-x</samp> <samp class="word">tinydesk-edit-state-file</samp> And from the StateFileEdit
            mode hit command <samp class="word">tinydesk-find-file-whole-buffer</samp> which is
            bound to C-c b and <samp class="word">tinydesk-recover-file-whole-buffer</samp> which
            is bound to C-c B. And you'll be up again with your latest
	            files.</li>
</ul>





  <a name="68" id="68"></a>
  <h2>
      Quick start

  </h2>




<p>
<p class="column8">
        If you're just eager to use the package, here are the basics.
        I suppose you have copied the installation setup as is.

<ul>
	<li>You have Emacs session open with bunch of files. Now you
            believe that it's time to save this session. You do
	            C-x 4 s and give some name &quot;state.c&quot; if you edited c project.</li>
</ul>




<p class="column8">
        Now, it all depends what you want to do after that. If you find more
        files to Emacs; or kill some unwanted buffers, you can re-execute
        C-x 4 s whenever you like. You can even edit the state file with
        C-x 4 e to remove some files that you don't want to include to
        that &quot;project&quot;.

<ul>
	<li>Next time you open Emacs you can load any state file with
	            C-x 4 r &quot;state.c&quot;</li>
</ul>




<p class="column8">
        If you want to switch between projects; unload first the current
        project with C-x 4 u &quot;state.c&quot; and reload some other project
        with C-x 4 r, eg your current C++ project &quot;state.cc&quot;



  <a name="69" id="69"></a>
  <h2>
      Automatic one time session saver

  </h2>




<p>
<p class="column8">
        Some people just want to save the session on exit and reopen it
        when Emacs starts again. I must say that this is not necessarily
        the best, because when you start Emacs for some quick job, you
        don't necessarily want it to load the saved session (loading all
        files take time considerably). Loading Emacs with -q is not the
        choice, if you still like to have your other Emacs goodies active.


<p class="column8">
        Here is semi-automatic save and restore, put all these lines near
        the end of your $HOME/.emacs. The setup saves the state when
        Emacs exists and asks if you want to return to saved session on
        Emacs startup. (You did also copy the installation lines too...)

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (defconst tinydesk-:directory-location &quot;~/elisp/config&quot;)

      (defconst my-tinydesk-session
        (concat tinydesk-:directory-location &quot;/state.last-session&quot;))

      (add-hook 'kill-emacs-hook 'my-save-session)

      (defun my-save-session ()
        &quot;Save loaded files to state file.&quot;
        ;;  if you want to save dired buffers too.
        ;;  use (tinydesk-save-state my-tinydesk-session '(4))
        (tinydesk-save-state my-tinydesk-session) nil)

      (if (and (file-exists-p my-tinydesk-session)
               (y-or-n-p &quot;Recover session &quot;))
          (tinydesk-recover-state my-tinydesk-session))    </pre></td>
    </tr>
</table>



  <a name="70" id="70"></a>
  <h2>
      Face setup

  </h2>




<p>
<p class="column8">
        This program uses some faces to catch your attention when you're
        working with the state files. I you restore state from a file and
        some file reference cannot be loaded, the state file will be shown
        to you and the problematic lines are highlighted. If you open the
        state file for editing, you can selectively load files. The mouse
        pointer will change and the text is again highlighted. To make the
        highlight work for you, you must set some colors like this


<p class="column11">
           (set-face-foreground 'italic &quot;LightBlue&quot;)



  <a name="71" id="71"></a>
  <h2>
      About saving the files

  </h2>




<p>
<p class="column8">
        While you may save your session files with any name, here is one
        convention that you could use. Name every filename so, that they
        have common prefix:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      M-x tinydesk-save-state   ;; or any hotkey you have bound this to
      state.XXX    </pre></td>
    </tr>
</table>


<p class="column8">
        The XXX describes the name of the state file you just saved. Later
        on it's easier to use Emacs file name completion capability to load
        the file you want. If you don't exactly remember what files you
        saved, or which sessions you have in dir, you just type

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      state.[TAB]    </pre></td>
    </tr>
</table>


<p class="column8">
        when <samp class="word">tinydesk-recover-state</samp> ask for filename.
        Prefix arg to `tinydesk-save-state saves' says to load directories too.



  <a name="72" id="72"></a>
  <h2>
      Automatic state file saving

  </h2>




<p>
<p class="column8">
        Emacs 19.29+ has feature that makes it possible to recover a session.
        See bunch of <samp class="word">auto-save-list-*</samp> variables.


<p class="column8">
        Has it ever happened to you that Emacs crashed mystically when you
        were in the middle of your daily routines. You had several C++
        files open, perl code, text files, RMAIL, ... This package installs
        <samp class="word">tinydesk-auto-save</samp> function to <samp class="word">write-file-hooks</samp> and in regular
        intervals all your Emacs session files are stored into the state
        file. After a crash you can easily recover your session by reading
        the saved state file information with <samp class="word">tinydesk-recover-state</samp>
        &lt;FILE&gt;. The name of the file of the latest saved state is in file
        &quot;periodic&quot;



  <a name="73" id="73"></a>
  <h2>
      Development note

  </h2>




<p>
<p class="column8">
        There is no plan to duplicate <em class="word">desktop.el</em> functionality to save points
        and modes and so on. This is for simple state restoring only.


<hr>
               <a name="74"  id="74"></a>
               <h1>
               Tinydiff.el --- Diff and patch minor mode. Browsing, patching.

               </h1>



  <a name="75" id="75"></a>
  <h2>
      Preface, jan 1996

  </h2>




<p>
<p class="column8">
        Long ago there was set of simple functions lying around to generate
        instant diffs for the file that was being edited, before it was
        checked in with RCS. At the time <em class="word">vc.el</em> was not in the Emacs
        distribution. Looking at diffs and using &quot;goto-line&quot; command in
        other buffer gave an idea to make a separate diff mode. The project
        turned out to be a bit bigger than just taking simple diff. You may
        wonder, why would you use this utility over ediff.el? If you like
        working with &quot;command line&quot; diff interface, then you may want to
        use this utility over <em class="word">ediff.el</em>. There is a command prompt when
        various diff options can be manipulated with key bindings. Lik:
        Change rcsdiff to diff command, copy previous argument etc.



  <a name="76" id="76"></a>
  <h2>
      Overview of features

  </h2>




<p>
<p class="column8">
        Taking diff

<ul>
	<li>Buffer based simple diff/rcsdiff/patch package.
<li>You can diff current buffer against last saved backup copy.
	</li>
<li>Give and manipulate diff command in echo-area: file name
            completion; switching between rcsdiff/diff, guess rcs version
	            for buffer, various diff switches...</li>
</ul>




<p class="column8">
        Browsing diff

<ul>
	<li>Supported: normal diff, context diff, gnu diff -u, gnu diff -n
<li>When you have diff output in buffer, turning on <samp class="word">tinydiff-mode</samp>
            allows you to browse source buffer by jumping diff blocks fwd/back
            and showing the source location.
	</li>
<li>You can kill single diff block with <samp class="word">tinydiff-block-kill</samp>
	</li>
<li>You can apply only the current diff block (patch) with
	            <samp class="word">tinydiff-block-apply-patch</samp></li>
</ul>




<p class="column8">
        Sending or saving diff

<ul>
	<li>In diff buffer, you can save the diff to a file with &quot;W&quot;; write
<li>In diff buffer, you can attach the content as MIME diff to
            the open mail buffer. Or if you don't have MIME-edit active,
	            the diff is added without MIME tags. Command &quot;M&quot; for Mime.</li>
</ul>




<p class="column8">
        Patch

<ul>
	<li>Easy patching. Finds file to patch (along user defined paths)
            and applies the diff. You can receive patches by email
            and apply them with one or two keystrokes.
<li>Finds the file to patch through pre defined paths.
	</li>
<li>Can also patch compresses .gz file.
	</li>
<li>loads patch rejection file, if patch didn't succeed 100%
	</li>
<li>Re-evaluates patched lisp file if the file was used by Emacs
	</li>
<li>If you don't want to apply whole diff, use <samp class="word">tinydiff-block-apply-patch</samp>
	            for individual sections.</li>
</ul>





  <a name="77" id="77"></a>
  <h2>
      Genrating diff &ndash; parsing diff

  </h2>




<p>
<p class="column8">
        Be in buffer where you have diff file and just turn on the

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      M-x tinydiff-mode    </pre></td>
    </tr>
</table>


<p class="column8">
        Then take a look at the bindings you have available:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      C-x b    </pre></td>
    </tr>
</table>


<p class="column8">
        If you want to generate [rcs]diff for current buffer, call function

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      M-x tinydiff-diff-show   (I have bound this to C-z C-d)    </pre></td>
    </tr>
</table>


<p class="column8">
        And it generates diff and puts you on <samp class="word">tinydiff-mode</samp>. X window users and
        those that have the highlighting capabitities can enjoy more about
        this mode, because it marks line numbers in buffer with
        <samp class="word">mouse-face</samp>. You just click the point to jump to diff position



  <a name="78" id="78"></a>
  <h2>
      Taking diffs

  </h2>




<p>
<p class="column8">
        The main purpose of this module is to help you taking &quot;diff shots&quot;,
        inside emacs. This means that the file must be loaded into
        emacs and your cursor must be in the buffers, before you execute

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      M-x tinydiff-diff-show    </pre></td>
    </tr>
</table>

<ul>
	<li>If the file is not rcs controlled you're offered regular diff
<li>if file is rcs controlled, your're offered rcsdiff prompt
	</li>
<li>if the buffer has changed, you're offered to diff against
            last saved file to see recent changes you have done since you
	            saved the buffer.</li>
</ul>





  <a name="79" id="79"></a>
  <h2>
      Command prompt

  </h2>




<p>
<p class="column8">
        The help key is on <samp class="word">?</samp>, press it to get summary of command while
        you're in minibuffer prompt. The command prompt in minibuffer looks
        like this for rcs controlled file.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      &gt; cd /users/foo/dir1/dir2; rcsdiff -c -r1.21 test.txt    </pre></td>
    </tr>
</table>


<p class="column8">
        You can edit this command as much as you like, but please leave <samp class="word">cd</samp>
        <samp class="word">XXX</samp> alone because the minibuffer commands expect it it be
        present. The hotkey command won't work without it.



  <a name="80" id="80"></a>
  <h2>
      Command prompt: rcsdiff and diff toggle

  </h2>




<p>
<p class="column8">
        To conveniently construct diff command against another file, say
        test2.txt, you can hit key <samp class="word">C-z</samp> to chage the prompt immediately to

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      &gt; cd /users/foo/dir1/dir2; diff -c test.txt    </pre></td>
    </tr>
</table>


<p class="column8">
        And add the <samp class="word">test2.txt</samp> to the end of line. If you want to restore
        the previous rcsdiff form, just hit <samp class="word">C-z</samp> again. This <samp class="word">C-z</samp>
        facility works only if the initial command was rcsdiff. There is no
        point of converting initial diff command to rcsdiff command though.



  <a name="81" id="81"></a>
  <h2>
      Command prompt: tab completes file name

  </h2>




<p>
<p class="column8">
        While your're editing the command you can also use the TAB key to
        complete filename in the 'cd' command directory. If you specify any
        directories for the file, the directory's files are completed.
        That feature should allow you to get filenames into the prompt
        easily.



  <a name="82" id="82"></a>
  <h2>
      Command prompt: diffing between two Rcs revisions

  </h2>




<p>
<p class="column8">
        There is also more commands, like <samp class="word">C-r</samp> which changes

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      &gt; cd /users/foo/dir1/dir2; rcsdiff -c -r1.21 test.txt    </pre></td>
    </tr>
</table>


<p class="column8">
        prompt so that it has now two -r commands. You can take diffs
        between two versions easily with it. The <samp class="word">C-r</samp> key is a toggle.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      &gt; cd /users/foo/dir1/dir2; rcsdiff -c -r1.21 -r1.21 test.txt    </pre></td>
    </tr>
</table>


<p class="column9"><strong>
         Case study:</strong>



<p class="column8">
        You see nice package on the net. You download it ;; and notice that
        it needs some fixes. You put the original version ;; to your
        private rcstree with the same version number as what ;; the package
        had; say 2.2. Then you CheckOut the original, make ;; changes, and
        put it back to tree with version 2.2.1.1. You dont't ;; put it back
        with 2.3, because that's not your file. You made the ;; correction
        to 2.2, so you must make a branch.


<p class="column8">
        Okay. You have the original 2.2 and you have the fixed version
        2.2.1.1 and you want to send the diff to the author. Here is how
        you do it

<ul>
	<li>Be on the file buffer 2.2.1.1 and hit M-x tinydiff-dif
<li>Hit <samp class="word">C-r</samp> toggle second revision (previous) and edit the line
            to look &quot;-r2.2 -r2.2.1.1&quot;. You are usually comparing <strong class="word">old</strong> and
            new_ versions.
	</li>
<li>Hit <samp class="word">C-s</samp> to toggle between <samp class="word">-u</samp> or <samp class="word">-c</samp>. You normally want
            to send <samp class="word">-u</samp> gnu unified diff, because it is more readable.
            Provided that the receiver has gnu patch to understand it.
	</li>
<li>Hit <samp class="word">C-f</samp> to add option <samp class="word">tinydiff-:cl-user-option</samp> which by
            default is <samp class="word">-kk</samp>. From the rcsdiff(1) man pages you will
            see that it roughly means: &quot;When you take diff between versions,
            ignore the rcs tag differencies&quot;. Confused? It means that
            the keywords that changed, like version, author, log ..
	            when you deposited 2.2 and 2.2.1.1 are ignored.</li>
</ul>




<p class="column8">
        And hit enter. Then you get clean diff that you can send to author.
        And when he responds back or sends you new version, say 2.5,
        you repeat the whole process again if you intend to make more
        changes 8put original 2.5 on ice and make branch 2.5.1.1 for your
        changes)



  <a name="83" id="83"></a>
  <h2>
      Command prompt: autosave and backup file diff

  </h2>




<p>
<p class="column8">
        Other helpfull commands insert he #autosaved# and backup~ filenames
        into the current point. Remember to put the # or ~ file to the left
        and not to the right. you do want to diff current file against the
        saved one; right? The first one is original prompt. That second is
        after <samp class="word">C-r</samp> and latter after <samp class="word">C-v</samp>

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      &gt; cd /users/foo/dir1/dir2; diff -c test.txt
                                        * point here

      &gt; cd /users/foo/dir1/dir2; diff -c #test.txt# test.txt
      &gt; cd /users/foo/dir1/dir2; diff -c ~/backup/test.txt~ test.txt    </pre></td>
    </tr>
</table>


<p class="column8">
        Notice that your backup file may not reside int he same directory.
        The backupfilename is returned by function <samp class="word">make-backup-file</samp>.



  <a name="84" id="84"></a>
  <h2>
      Generated diff: the Prereq tag

  </h2>




<p>
<p class="column8">
        It is important that when you send diff, it is diff between two
        rcs versions if possible (if you're author of program). In those
        cases where revision information can be found, the diff data
        is preceeded with this line:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      Prereq: N.NN        e.g. Prereq: 1.76    </pre></td>
    </tr>
</table>


<p class="column8">
        If the receiving end has GNU patch, the patch program first checks
        if the version that person has is exactly N.NN and aborts if
        he had some other version. This prevent applying diffs that
        are meant to other versions. Regular Unix <em class="word">patch</em> program
        does not notice the <em class="word">Prereq:</em> tag, so consider getting more
        safer GNU version as soon as possible.



  <a name="85" id="85"></a>
  <h2>
      Patching

  </h2>




<p>
<p class="column8">
        There is also included little patching function.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      M-x tinydiff-patch          non verbose
      C-u M-x tinydiff-patch      verbose    </pre></td>
    </tr>
</table>


<p class="column8">
        For elisp (.el) files the <samp class="word">load-path</samp> is automatically searched
        for possible destination of the patch. You can set variable

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      tinydiff-:patch-list    </pre></td>
    </tr>
</table>


<p class="column8">
        To match files and their associated patch directories if you
        receive patches for other files regularly. This function is most
        useful for RCS diffs, because they can be easily detected and the
        file information is also included in the diff.



  <a name="86" id="86"></a>
  <h2>
      Patch: general notes

  </h2>




<p>
<p class="column8">
        Note: normally when <samp class="word">patch</samp> program is called it always makes
        backup with the suffix .orig. So if you have applied a patch,
        then there is two file in the directory.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      FILE.txt        -- patched file
      FILE.txt.orig   -- original file, before the patch    </pre></td>
    </tr>
</table>


<p class="column8">
        It also creates rejections file if all dind't go as planned.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      FILE.txt.rej    </pre></td>
    </tr>
</table>



  <a name="87" id="87"></a>
  <h2>
      Patch: success or failure

  </h2>




<p>
<p class="column8">
        When the patch has been applied, This package checks if all went
        well. If rejection file was created; then the patch process's
        output is shown and the rejection file is loaded so that you can
        see what possibly went wrong and if you should be concerned.


<p class="column8">
        If you get this rejection file, then there propably is potential
        trouble. Please contact the sender of patch immediately and tell
        about your troubles. There are few common reasons why patch failure
        happened.

<ul>
	<li>Sender forgot <samp class="word">-kk</samp> switch when he run rcsdiff to the file
            that was not owned by him (See RCS for details about <samp class="word">-kk</samp>)
<li>Too few context, Sender should try increasing context with
            <samp class="word">-C</samp> switch (like <samp class="word">-C7</samp>)
	</li>
<li>The patch were modified during email transit. Ask
            to send the patch with some encoded format: uuencode, base64,
	            PGP encrypted or PGP base64 signed (clearsig off) format.</li>
</ul>





  <a name="88" id="88"></a>
  <h2>
      Patch: what happens after success

  </h2>




<p>
<p class="column8">
        When the patch succeeds, there is a bit special handling for Emacs
        elisp packages. Say we recieve correction to the following module
        and you have it loaded in emacs: (feature 'foo) returns true.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      foo.el    </pre></td>
    </tr>
</table>


<p class="column8">
        After patch is applied, you're asked if you want to reload the
        new release of <em class="word">foo</em> module (just patched). You should answer
        <samp class="word">Yes</samp> to get the newest one running in your Emacs immediately.



  <a name="89" id="89"></a>
  <h2>
      Patch: after success, returning to original version

  </h2>




<p>
<p class="column8">
        If the patched version, which is usually new version of the progrmam
        doesn't work as it is supposed to, you can go back to the original
        version by appluing the same patch again. You should report what
        problems you had to the maintainer and inform that you wnet back
        to previous version.


<p class="column8">
        <em class="word">IMPORTANT</em> If you did get the rejection file, you can't use that
        patch to go back to original!! See next chapter how to go to
        original version in that case



  <a name="90" id="90"></a>
  <h2>
      Patch: rejection file created &ndash; what to do?

  </h2>




<p>
<p class="column8">
        If you want to go back to original version, apply the same diff
        again; this reverses just applied patch. Just call <samp class="word">M-x</samp>
        <samp class="word">tinydiff-patch</samp> in the buffer where you have the diff.


<p class="column8">
        When you do that, the function detects that there is already a
        orig file and prompts you to choose an appropriate action.<br>
        Here is the explanation what they do and what should you choose


<p class="column9"><strong>
         Command <strong class="word"><em class="word">o</em></strong></strong>



<p class="column8">
        Go back to (o)riginal. This copies the FILE.txt.orig over the
        FILE.txt and deletes FILE.txt.orig and doesn't do <strong class="word">anything</strong>
        else (stops the patching process). You're back to starting
        point as if you never patched anything.


<p class="column9"><strong>
         Command <strong class="word"><em class="word">r</em></strong></strong>



<p class="column8">
        &reg;etry means that the FILE.txt.orig is copied over FILE.txt and the
        pach is tried again for FILE.txt. You may have asked the author to
        send more context with using the -C10 switch and after you received
        this new patch you want to try if it now goes ok. The FILE.txt.orig
        still remains as a backup


<p class="column9"><strong>
         Command <strong class="word"><em class="word">g</em></strong></strong>



<p class="column8">
        (G)o says that we should apply the diff again to FILE.txt. Do this
        only if you did not get rejections last time. The intention
        is that you apply the patch again, and this reverses the situation.
        I mean 1) you patch; you get new version 2) you patch again: you
        degrade to the version before patch (original file before patch)



  <a name="91" id="91"></a>
  <h2>
      Development note

  </h2>




<p>
<p class="column8">
        There is <samp class="word">ediff.el</samp>, which is much more complete package than
        this is. The aim was to develop a simple but handy package for
        everyday diff'ing and easy package patching.



  <a name="92" id="92"></a>
  <h2>
      Bugs

  </h2>




<p>
<p class="column8">
        The &quot;f&quot; key, which shows the function identifier in diff browse
        mode <samp class="word">tinydiff-mode</samp>, can handle buffers which are narrowed, but if the
        buffer is using folding.el or similar package where goto-line does
        not work properly, the returned message shown to user is not
        correct.


<p class="column8">
        Please unfold the buffer and you get the correct result.



  <a name="93" id="93"></a>
  <h2>
      Example

  </h2>




<p>
<p class="column8">
        This hook setup turns on the view mode for easy scrolling
        of buffer.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (add-hook 'tinydiff-:diff-hook  'my-tinydiff-diff-hook)

      (defun my-tinydiff-diff-hook ()
        &quot;Turn on view-mode in diff buffer.&quot;
        ;; See tinydiff-:diff-buffer.
        (view-mode 1))    </pre></td>
    </tr>
</table>



  <a name="94" id="94"></a>
  <h2>
      Sending good bug reports

  </h2>




<p>
<p class="column8">
        If you find anything funny happening in the command line prompt
        while you use the tdi minibuffer commands. Immediately do
        following.

<ul>
	<li>Turn on debug: <samp class="word">M-x</samp> <samp class="word">tinydiff-debug-toggle</samp>
<li>Turn on emacs debug: (setq debug-on-error t)
	</li>
<li>Clear the debug buffer <em class="word">tinydiff-debug</em> if it exists
	</li>
<li>Start from original situation
	</li>
<li>Do what you did and when the weird condition is met
            immediately go to <em class="word">tinydiff-debug</em> buffer and save the
	            content and send it to the maintainer.</li>
</ul>




<hr>
               <a name="95"  id="95"></a>
               <h1>
               Tinydired.el --- Dired enchancements. Backgroud Ange ftp support

               </h1>



  <a name="96" id="96"></a>
  <h2>
      Preface, Jan 1996

  </h2>





<p>
<p class="column8">
        This package started evolving, when there was need for something
        more from ange-ftp, like background file loading. Ange-ftp also had
        nasty habbit of putting user to just downloaded .zip or .tar.gz
        buffer. That not what was usually wanted, but to download the files
        somewhere other than inside emacs. There was need for ability to
        <em class="word">mark</em> files for download and get them all at once to a download
        directory. With standard <samp class="word">ange-ftp</samp> you would have to load them one
        by one. Sometimes you may want to go associated <samp class="word">ange-ftp</samp> buffer
        and give commands directly there, so a command to switch between
        ange-ftp and dired buffers would be handy.


<p class="column8">
        Now you can do this with standard <samp class="word">ange-ftp</samp> and Emacs dired.


<p class="column8">
        Note: This paskage is just extension to <samp class="word">ange-ftp</samp>, consider
        getting next generation ange-ftp, the <samp class="word">EFS</samp>, if you want
        overall better and more complete interface. Use this package if
        you only need features like batch put/get at backround.
        (Further note: EFS was later installed to XEmacs and it does not work
        any more with Emacs.)



  <a name="97" id="97"></a>
  <h2>
      Overview of features

  </h2>



<p>
<ul>
	<li>Connecting to VAX host minimally supported. You can navigate
            in vax dired buffer and load files. Nothing more.
<li>Few enchancements to dired mode. Eg. keep only one
            dired buffer when ascending to directory. Shorten symlinks.
	</li>
<li>User can mark and put files into STORE and start a backgroud
            ange-ftp session to get STORED files into download directory
	</li>
<li>Easy switching between ange-ftp session buffer and dired buffer
	</li>
<li>Dealing with ange ftp buffers in general
            (x)  killing all ange buffers at once
            (x)  killing all ange + dired ange buffers at once.
            (x)  switching to ange buffers with completion
	</li>
<li>Run &quot;!&quot; on ange ftp dired buffer (operate on local copy)
	</li>
<li>customizable backup file flagging.
	</li>
<li>other handy dired commands, like &quot;pop to this file in emacs.&quot;
	            &quot;find all marked files&quot;...</li>
</ul>





  <a name="98" id="98"></a>
  <h2>
      Vax dired listing note

  </h2>




<p>
<p class="column8">
        When you connect to a VAX host; you may get some error message
        and you don't see the dired listing; don't panic. Just repeat the
        <samp class="word">C-xC-f</samp> command with

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      C-x ESC ESC    </pre></td>
    </tr>
</table>


<p class="column8">
        And it should succeed second time. There are quirks in the VAX handling
        and if you run into it; the usual cure is:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      Kill the VAX ange-ftp process buffer    </pre></td>
    </tr>
</table>



  <a name="99" id="99"></a>
  <h2>
      XEmacs note

  </h2>




<p>
<p class="column8">
        The dired and ange-ftp implementation (nowadays efs) is
        completely differen than in Emacs


<p class="column8">
        ** THIS PACKAGE IS FOR Emacs ONLY **



  <a name="100" id="100"></a>
  <h2>
      General dired additions

  </h2>




<p>
<p class="column8">
        In simplest form. This module installs some functions in your
        dired hooks. Their purpose is

<ul>
	<li>To keep your dired buffer sorted so that directories are
            always put first.
<li>Delete unwanted files from dired buffer automatically.
	</li>
<li>Shorten the symlink references, so that they don't spread
	            multiple lines and ruin your view.</li>
</ul>




<p class="column8">
        It also changes one dired function with <samp class="word">defadvice</samp>, so that you
        can control if you want to have only one dired buffer when
        ascending to another directory. See variable:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      tinydired-:use-only-one-buffer-flag    </pre></td>
    </tr>
</table>



  <a name="101" id="101"></a>
  <h2>
      Dired and ange-ftp additions

  </h2>




<p>
<p class="column8">
        When you want to start ftp session in emacs you just do

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      C-x C-f /login@site:/dir/dir/file    </pre></td>
    </tr>
</table>


<p class="column8">
        Let's take an example: To see what new things has arrived
        to GNU site, you'd do this:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      C-x C-f /ftp@prep.ai.mit.edu:/pub/gnu/    </pre></td>
    </tr>
</table>


<p class="column8">
        After that you are put into the dired listing, where you
        can mark files with dired-mark command

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      m           Mark file    </pre></td>
    </tr>
</table>


<p class="column8">
        Now you have files ready. Next put files into batch STORAGE.
        There is &quot;a&quot; prefix for ange-ftp related commands.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      a S         Big S put selected files into storage
      a q         To check what files you have batched
      a c         To clear the batch storage    </pre></td>
    </tr>
</table>


<p class="column8">
        Now start ftp'ding the files in background. You're prompted
        for the download directory.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      a g         Get marked file(s)    </pre></td>
    </tr>
</table>


<p class="column8">
        If you want to operate on the associated ftp buffer
        directly, there is command

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      a b         For &quot;buffer change&quot;    </pre></td>
    </tr>
</table>


<p class="column8">
        that puts you into ftp, where the dired buffer refers. When
        you're in the ftp buffer you have some keybinding available.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      C-c f       insert stored files on the line
      C-c d       insert directory name
      C-c b       back to dired window    </pre></td>
    </tr>
</table>


<p class="column8">
        It's sometimes handy that you can give direct ftp commands.



  <a name="102" id="102"></a>
  <h2>
      Setting up ange ftp

  </h2>




<p>
<p class="column8">
        Here is my settings, which you can use as a reference so that you
        get the ange running. For more details, see the ange-ftp.el's
        source code. These settings include firewall &quot;ftpgw.poboxes.com&quot;

 ;; (setq ange-ftp-generate-anonymous-password t)
 (setq ange-ftp-dumb-unix-host-regexp  &quot;tntpc&quot;) ;PC hosts
 (setq ange-ftp-gateway-host &quot;ftpgw.poboxes.com&quot;)
 (setq ange-ftp-smart-gateway t)
 (setq ange-ftp-local-host-regexp &quot;\\.myhost\\.\\(com|fi\\)|^[^.]*$&quot;)
 ;;  Always use binary
 (setq ange-ftp-binary-file-name-regexp &quot;.&quot;)
 (autoload 'ange-ftp-set-passwd &quot;ange-ftp&quot; t t)
 (setq ange-ftp-generate-anonymous-password &quot;jdoe@example.com&quot;)



  <a name="103" id="103"></a>
  <h2>
      How to use this module 3 &ndash; special vc

  </h2>




<p>
<p class="column8">
        There are some extra commands that you may take a look at.
        See source code of bind function

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      tinydired-default-other-bindings    </pre></td>
    </tr>
</table>


<p class="column8">
        What additional commands you get when loading this module.


<p class="column8">
        The VC special commands were programmed, because I felt that the
        C-x v v in dired mode didn't quite do what I wanted. I wanted
        simple ci/co/revert commands for files that were in VC control.
        And I wanted to handle them individually, expecially when ci'ing.
        (written for Emacs 19.28).


<p class="column8">
        This VC part of the package is highly experimental.
        I'm not sure if I support it in further releases.



  <a name="104" id="104"></a>
  <h2>
      Important ange-ftp interface note

  </h2>




<p>
<p class="column8">
        The ange ftp batch interface used here may cause unpredictable
        problems. Sometimes the <samp class="word">get</samp> or <samp class="word">put</samp> process doesn't start at all
        although you see message saying it started the job. I have had
        several occurrances where <samp class="word">lcd</samp> cmd succeeded, but then nothing
        happened. Repeating the <samp class="word">put</samp> or <samp class="word">get</samp> command cleared the problem
        whatever it was.


<p class="column8">
        So, never trust the message <samp class="word">completed</samp>, unless you saw that the
        download percentage count started running. If you're downloading
        important file, double check the real ftp buffer for correct response.
        Try again if ftp wasn't started. Another way to clear the problem: kill
        the ange ftp buffer and try the command from dired again. It
        automatically opens session to the site.



  <a name="105" id="105"></a>
  <h2>
      Advertise &ndash; other useful packages

  </h2>




<p>
<p class="column8">
        There are exellent dired extensions around, please consider getting
        these packages:

<ul>
	<li>dired-sort.el (requires date-parse.el)
	<li>dired-tar.el</li>
</ul>





  <a name="106" id="106"></a>
  <h2>
      Note: Slow autoload

  </h2>




<p>
<p class="column8">
        When you have added the autoloads into your .emacs, the first time
        you bring up dired buffer may be quite slow. This is normal, Emacs
        just need to load some additional files that this package uses.



  <a name="107" id="107"></a>
  <h2>
      Note: Refreshing the view takes long time / point isn't exatly the same

  </h2>




<p>
<p class="column8">
        This is normal, dired is just slow and program has to do lot of
        work to maintain the &quot;view&quot;. Eg. save view, save marks, delete
        marks, revert, sort, restore marks... Only the current line
        position is preserved where user was, not point.



  <a name="108" id="108"></a>
  <h2>
      Note: Code

  </h2>




<p>
<p class="column8">
        Emacs ships with package <samp class="word">dired-x.el</samp>, which seems to offer some
        more goodies to dired. Currently, if the <samp class="word">dired-x</samp> is detected the
        appropriate functions in this package are diabled, to prevent
        overlapping behavior. However, if the function behaves differently
        than the one in some dired extension package, then the function
        isn't disabled. Eg. see <samp class="word">tinydired-load-all-marked-files</samp>, which can turn
        off marks.



  <a name="109" id="109"></a>
  <h2>
      Note: limited vax directory support

  </h2>




<p>
<p class="column8">
        You can connect to VAX host with <samp class="word">find-file</samp> and this package
        provides modified functions to allow you to use <samp class="word">f</samp> in dired
        and load file into Emacs. Any other TinyDired commands are
        disabled in dired vax buffer.  Don't try anything fancy there,
        you know that it isn't unix ls buffer.


<p class="column8">
        See function <samp class="word">tinydired-remove-bindings</samp>. You must add your own
        keyboard disable function if you have added tdd functions to
        other bindings than the default to disable this package in
        VAX buffers. Add your disable funcion to

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      tinydired-:readin-hook    </pre></td>
    </tr>
</table>



  <a name="110" id="110"></a>
  <h2>
      Note: limited dos directory support

  </h2>




<p>
<p class="column8">
        You can connect PC hosts that print 'dir' into the dired buffer.
        Your only command available is `f, just like in vax dired, so
        please don't even try any other choices.


<p class="column8">
        The PC support is experimental and is based on unix --&gt; LAN
        connected PC which is running <samp class="word">pctcp</samp> software: Win 3.11
        (workgroup) <samp class="word">ctlapp.exe</samp> ftp server. Do not mail me about PC
        support, since I won't fix it if it doesn't work. Get <samp class="word">efs</samp>
        distribution if you need PC ftp support.


<hr>
               <a name="111"  id="111"></a>
               <h1>
               Tinyeat.el --- Eat blocks of text at point, forward and backward

               </h1>



  <a name="112" id="112"></a>
  <h2>
      Preface, overview of features

  </h2>



<p>
<ul>
	<li>Determine how much text should be eaten around current cursor
            position. Eat extra spaces, extra newlines, next word
            next statement, next comment ... whatever is appropriate
<li>When you grow accustomed to this, it probably replace your
            old deleting habbits.
	</li>
<li>Can also eat inside mixed case word: WordsThatAreLikeThis
	</li>
<li>Yank and &quot;overwrite&quot; text under cursor with Meta mouse-2 or
            <samp class="word">Meta</samp> <samp class="word">C-y</samp>. (Std Emacs in <samp class="word">overwrite-mode</samp> doesn't allow you to
	            yank and overwrite at the same time.)</li>
</ul>





  <a name="113" id="113"></a>
  <h2>
      Non-windowed and Windowed Emacs

  </h2>




<p>
<p class="column8">
        This package works <strong class="word">best</strong> in windowed Emacs, because in windowed
        environment you can use the modifiers <em class="word">Control</em>, <em class="word">Alt</em> and <em class="word">Meta</em>
        freely with other keys. The idea of this package is to overload
        your single key, <samp class="word">backspace</samp>, as much as possible with various
        delete functionalities.


<p class="column8">
        In non-windowed Emacs there is no key named <samp class="word">backspace</samp>, so
        standard Emacs bindings are bound instead. Many of this package's
        features are also unused because there are no suitable keys to bind
        the commands to. In non-windowed Emacs the extra bindings have been
        marked with (*):

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
                      was                 now
      -------------------------------------------------------------
      Meta s          &lt;none&gt;              tinyeat-backward-preserve (*)
      Meta d          kill-word           tinyeat-forward-preserve  (*)
      Meta SPC        just-one-space      tinyeat-delete-whole-word (*)
      Meta k          kill-sentence       tinyeat-delete-paragraph  (*)
      Meta C-d        down-list           tinyeat-kill-line-back    (*)
      Meta ESC        mark-defun          tinyeat-erase-buffer
      Meta C-y        &lt;none&gt;              tinyeat-yank-overwrite    </pre></td>
    </tr>
</table>



  <a name="114" id="114"></a>
  <h2>
      Story behind this package

  </h2>




<p>
<p class="column8">
        One day the developer got frustrated of moving cursor around the
        point and using keys del or backspace to write C++ and LISP
        symbols. The start situation was:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (defun lisp-symbol-name-myname          ()
                              *    </pre></td>
    </tr>
</table>


<p class="column8">
        He decided to change 'myname' to something else. Normally he
        would reach out for ESC-d for <samp class="word">kill-word</samp> to delete <samp class="word">myname</samp> and
        type the new name:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (defun lisp-symbol-name-mynew           ()
                                   *    </pre></td>
    </tr>
</table>


<p class="column8">
        Next, he noticed that there were extra spaces involved.
        A call to <samp class="word">fixup-whitespace</samp> would make it go away ... Hmm that was
        not bound to any key by default (in this particular Emacs he was
        using at the time), so he had to type it the long way round: <samp class="word">M-x</samp>
        <samp class="word">fixup-whitespace</samp>. His thoughts were: &quot;Oh, why I hadn't I bound it
        to some easily reacheable key&quot;. The story continues.
        He looked at the function once more and decided that name
        <samp class="word">symbol-name-mynew</samp> wasn't a good one after all. He decided to
        delete 3 words backward. Now, how do you do that?

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (defun lisp-symbol-name-mynew ()
                                   *    </pre></td>
    </tr>
</table>


<p class="column8">
        He murmurs, &quot;where is the command to delete backward ...&quot;. After
        spending valuable minutes to find the <samp class="word">delete-backward-word</samp>
        command with the emacs <samp class="word">M-x</samp> <samp class="word">apropos</samp> and hitting the page up and down
        keys to find anything that would look like what he wanted, he sits
        back with despair, &quot;Rats again, there is no such command&quot;. Silently
        he ends up tapping the backspace until he reaches correct point:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (defun lisp- ()
                  *    </pre></td>
    </tr>
</table>


<p class="column8">
        and starts typing a new name...

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (defun lisp-my-func ()    </pre></td>
    </tr>
</table>


<p class="column8">
        All is perfect for a moment. Then, he notices that there are too
        many newlines above the newly created function and says to himself:
        &quot;I really should delete those 5 extra empty lines above the
        function. Now, how do I kill backward 5 empty lines backward? The
        <samp class="word">kill-line</samp> in C-k kills only forward&quot; ...&quot;. The story teller
        rests here to leave your imagination to continue.



  <a name="115" id="115"></a>
  <h2>
      Lesson learned

  </h2>




<p>
<p class="column8">
        As you can notice, people often spend most of the time to position the
        cursor to the right spot and deleting text over there.. over here
        ..  typing more .. changing our mind ... and so on.


<p class="column8">
        It was time to do something creative, so that user wouldn't have to
        worry about the deletion of text so much. This package provides
        atempts to provide <strong class="word">smart</strong> deleting capabilities: whether you want
        to delete forward of backward. Naturally it isn't capable of
        miracles, it just does few guesses, and a guess may be wrong. If it
        so happens that a lot of text have suddenly retired (vanished,
        vaporized) from you buffer, remember, there is no need to panic.
        Just send a bug report to that poor maintainer, and hit <samp class="word">undo</samp>.


<p class="column8">
        The maintainer would be surprised if you ever wanted to discard
        this package after you have tried it. Can he expect a happy smile
        at this point? Now, load this and be happy, spread the word and
        help others to get &quot;the job done&quot;, whatever you were doing.



  <a name="116" id="116"></a>
  <h2>
      Default keybindings

  </h2>




<p>
<p class="column8">
        chunk delete: words, spaces, symbols ...

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      &lt;&lt;              &gt;&gt;                  &lt;&lt;&gt;&gt; [Delete whole word]
      Alt-Backspace   Control-backspace   Shift-Backspace    </pre></td>
    </tr>
</table>


<p class="column8">
        Line delete

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      &lt;&lt;              &gt;&gt;                  &lt;&lt;&gt;&gt; [zap whole line]
      Alt-Backspace   Control-k (Alt-k)   Control-k
      + Shift                             + Alt    </pre></td>
    </tr>
</table>


<p class="column8">
        Buffer delete

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      \/              /\                  \//\             ZAP
      untill pmax     untill pmin         Paragraph delete Whole buffer
      C-A-backspace   C-A-Backspace       C-S-backspace    Esc-Backspace
                      + Shift    </pre></td>
    </tr>
</table>


<p class="column8">
        Joining next line to the end of current line: Esc Control-backspace


<p class="column8">
        <span class="word-ref">[Some minibuffer hotkeys]</span>

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      f1  = Kill whole line.
      f2  = Delete line backward (to the left)    </pre></td>
    </tr>
</table>


<p class="column8">
        <span class="word-ref">[Mouse binding]</span>

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (Alt|meta)-Mouse-2 overwries text when pasting.    </pre></td>
    </tr>
</table>



  <a name="117" id="117"></a>
  <h2>
      Known Bugs

  </h2>




<p>
<p class="column8">
        This package heavily relies on various modifiers that can be attached
        to the <em class="word">BACKSPACE</em> key and that is a difficult subject in Unix.
        For example the <em class="word">Alt</em> keys usually does not exist and to make
        it work, yu have to introduce yourself to <samp class="word">xmodmap(1)</samp> or
        <samp class="word">keycaps(1)</samp> and possibly <samp class="word">xev(1)</samp> in order to find the key symbols
        correctly.


<p class="column8">
        Worse, In the same Unix the Emacs and XEmacs diagree what a simple key
        sequence

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      BACKSPACE    </pre></td>
    </tr>
</table>


<p class="column8">
        Means. Or with various modifiers. To get some taste, here is what
        XEmacs 20.4 and Emacs 20.3 in Redhat Linux 6.2 return:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
                          XEmacs          Emacs

      &lt;esc backspace&gt;     M-backspace     ESC DEL
      &lt;shift backspace&gt;   delete          S-delete
      &lt;alt backspace&gt;     &lt;nothing&gt;       &lt;nothing&gt;    </pre></td>
    </tr>
</table>


<p class="column8">
        There is nothing this package can do to cope with these changes in
        key symbols or the environemtn you use. If you can, try to get the
        ALT key working and shift-modifier for backspace and everything
        is well. If that is not possible, the power of the predefined
        keybindings are mostly left unused and you have to look at the
        install function and determine how woulf you use your keyboard best
        with these functions.




<hr>
               <a name="118"  id="118"></a>
               <h1>
               Tinyef.el --- (E)lectric (f)ile minor mode. Easy C-x C-f filename composing

               </h1>



  <a name="119" id="119"></a>
  <h2>
      Preface, Apr 1995

  </h2>




<p>
<p class="column8">
        There was a post in gnu.emacs.sources where Anders Lindgren
        <em><a href="mailto:andersl@csd.uu.se" >andersl@csd.uu.se</A></em> presented the basic code that allowed electric
        ~ and electric / characters to wipe out full (mini)buffer in certain
        cases. What you see here, is complete rewrite and enchancement of
        that code. This is a real must for any minibuffer file handling.



  <a name="120" id="120"></a>
  <h2>
      Overview of features

  </h2>



<p>
<ul>
	<li>Easy filename editing. Deletes directories at time, delete line
            backward, electric tilde, electric slash, electric colon etc..
<li>Useful for along with <samp class="word">C-x</samp> <samp class="word">C-f</samp> command.
	<li>Mouse-3 in minibuffers clears the input.</li>
</ul>





  <a name="121" id="121"></a>
  <h2>
      Description

  </h2>




<p>
<p class="column8">
        This ins only slightly <em class="word">electric</em>, in a sense that it only defines
        some keys to be electric and it needs some other keys solely to its
        own use (you can't insert these chars to buffer without <samp class="word">C-q</samp>
        <samp class="word">CHAR</samp>) If you're another non-english speaking, as I am, the
        electric means that the character you press behaves differently if
        the pressing happens around certain other charcters (some condition
        is met which triggers this other behavior). Other than that, the
        character behaves normally. Below there is a sample graph to give
        you an overview of what the so called &quot;electricity&quot; is is practice.
        In these presented cases cursor it at the end of line. Jusr load
        this file, press <samp class="word">C-x</samp> <samp class="word">C-f</samp> and experiment with keys &quot;[]\/~&quot;.

<ul>
	<li>b> means what's on the line <em class="word">before</em>
<li>a> means what's there <em class="word">after</em>
	</li>
<li>&quot;&quot;  means what you just pressed
	<li>[]  means which action the character triggered</li>
</ul>



<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      b&gt; <a href="http:/www.site.com/~userFoo/dir1/dir2/dir3/" >http:/www.site.com/~userFoo/dir1/dir2/dir3/</a> &quot;/&quot; [e-slash]
      a&gt; http:/
      The e-slash action wiped out the line, because writing
      two slashes normally indicates, that you want to give
      another path

      b&gt; ~/dir1/dir2/dir3/                       &quot;~&quot; [e-tilde]
      a&gt; ~
      The action wiped the line away, because it assumed
      you want to give &quot;~userFoo&quot; or another &quot;~&quot; relative path

      b&gt; ~/dir1/dir2/dir3/                       &quot;[&quot; [step-delete-back]
      a&gt; ~/dir1/dir2/
      The action wiped previous directory name or until
      special mark, See code, defaults are  &quot;:/@&quot; (ange-ftp things)

      b&gt; ~/dir1/dir2/                            &quot;=&quot; [undo]
      a&gt; ~/dir1/dir2/dir3/
      The action works like normal undo.

      b&gt; ~/dir1/dir2/                            &quot;`&quot; [chunk-delete]
      a&gt;
      The action deleted whole line. It deletes until special marks
      like &quot;@:&quot;. If repeated, it deletes constantly backward    </pre></td>
    </tr>
</table>



  <a name="122" id="122"></a>
  <h2>
      Automatic Isntallation

  </h2>




<p>
<p class="column8">
        This file includes function <samp class="word">tinyef-install</samp> which hooks the mode
        to the appropriate places. Eg. to your minibuffer. If you're in
        trouble, you can always turn this mode off with the supplied
        hotkey, which is by default <samp class="word">C-c</samp> <samp class="word">/</samp>. You can't &quot;see&quot; whether mode
        is on or off in minibuffer, since it doesn't have its own mode
        line. But calling the hotkey will tell you the state change. You
        can also remove this mode completely from your emacs if you need to
        do that in emergencies. just call following function with some
        prefix argument like <samp class="word">C-u</samp> to <samp class="word">tinyef-install</samp>



  <a name="123" id="123"></a>
  <h2>
      Mouse bindings in minibuffer

  </h2>




<p>
<p class="column8">
        When this package loads, it calls function <samp class="word">tinyef-install-mouse</samp>
        which defined following bindings to your minibuffer

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      &lt;-- BIG erase backward from point Mouse-3 (because it's free)
      &lt;-- Small delete backward C-mouse-1. Use C-mouse-3 to undo( --&gt;)    </pre></td>
    </tr>
</table>


<p class="column8">
        This should give your free hands to cut,paste and Delete, without
        lifting your hand off the mouse.



<hr>
               <a name="124"  id="124"></a>
               <h1>
               Tinygnus.el --- Gnus Plug-in. Additional functions. UBE fight etc.

               </h1>



  <a name="125" id="125"></a>
  <h2>
      Preface, Sep 1997

  </h2>




<p>
<p class="column8">
        I haven't have a chance to try the new Gnus for a long time
        because the envinronment didn't have Emacs 19.34. And when the
        sysadm installed it, I started slowly moving from my dear RMAIL
        (which I had configured to work very well) to the bold and beatiful
        Gnus. I had also started using procmail and subscribed to many
        mailing lists, so the only choice to manage all my mail was
        Gnus. Here you find some functions that I found useful.



  <a name="126" id="126"></a>
  <h2>
      Overview of features

  </h2>



<p>
<ul>
	<li>Automatic reload of files when entring group with SPACE
            (mimic  Newsgroup behavior)
<li>You can have compresses .eld file. If you compress .gnus to
            .gnus.gz then the .eld files will be compressed too to .eld.gz
	            This saves you disk space in low quota account.</li>
</ul>



<ul>
	<li>Fast read group by showing only unread (newly arrived)
            articles. Speeds up reading your mail groups.
<li>Show immediately dormants in non-nntp groups. Some people
            use dormant mark ? in their private mail groups as <samp class="word">todo</samp>
            and to be able to see those todo articles immediately saves
            you 5x time, when you don't have to separately limit to
	            dormants.</li>
</ul>



<ul>
	<li>Ready %uX user function that you can use in the *-line-format
            strings.
<li>Group User format function: &quot;expiry&quot;, Tell the expiry value
            for the group and varaious other values.
	</li>
<li>Group User format function: &quot;comment&quot;, Tell the group comment.
	<li>Group User format function: &quot;tick&quot;,    Tell if group has ticks.</li>
</ul>



<ul>
	<li>Send UBE complaint to all postmasters in Received headers.
            The ip addresses of postmasters are nslookup verified. You
            can select either individual article or process mark multiple
	            articles.</li>
</ul>





  <a name="127" id="127"></a>
  <h2>
      Url pointers

  </h2>



<p>
<ul>
	<li>Procmail information can be found at
            <a href="http://www.procmail.org/" >http://www.procmail.org/</A> and <a href="http://pm-doc.sourceforge.net/" >http://pm-doc.sourceforge.net/</A>
	<li>Gnus can be found at <a href="http://www.gnus.org/" >http://www.gnus.org/</A></li>
</ul>





  <a name="128" id="128"></a>
  <h2>
      Fighting against UBE messages

  </h2>




<p>
<p class="column8">
        Please visit <a href="http://spam.abuse.net/" >http://spam.abuse.net/</A> for up to date information.
        Other good sites: <a href="http://spamcop.net/" >http://spamcop.net/</A> and <a href="http://www.spamcop.com/" >http://www.spamcop.com/</A>


<p class="column8">
        [2000-11] Automatically generated Gnus blacklist by Brian Edmonds
        is at <a href="http://www.gweep.bc.ca/~edmonds/usenet/index.html" >http://www.gweep.bc.ca/~edmonds/usenet/index.html</A>


<p class="column8">
        Many of us receive UBE (Unsolicited Bulk Email) and if we don't do
        anything to stop them, then the practice comes approved de facto
        internet convention. It is important that you complaint about every
        piece of UBE you may receive, your vote counts and it will also
        give you satisfaction to know that most of the postmasters kick off
        the idiot in the other end of the wire. There are two functions
        in this module:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      tinygnus-article-ube-send-to-postmasters    U      UBE
      tinygnus-summary-ube-send-to-postmasters    C-c'u  send UBE    </pre></td>
    </tr>
</table>


<p class="column8">
        The first function is fully interactive and it reads the current
        active article and composes <samp class="word">forward</samp> message to all postmasters
        mentioned in the <samp class="word">received</samp> header chain. Before sending you have
        a chance to reformat the article anyway you like.


<p class="column8">
        The latter function is useful to batch send complaints: you
        process mark(#) articles in summary buffer, Hit C-c'u, and each
        article is processes and complaint is sent to postmasters. Before
        sending message, the function asks confirmation. You can suppress
        the confirmation with <samp class="word">C-u</samp> prefix argument. <strong class="word">Note</strong>: It may take some
        time to compose all complaints if you have marked many articles,
        because parsing <em class="word">Received:</em> headers and checking them with <samp class="word">nslookup</samp>
        may be slow. If you use <samp class="word">procmail</samp> or Gnus split methods to flter
        your UBE mail to one single newsgroup, say <samp class="word">junk.ube</samp>, Then you can
        mark all messages in the newsgroup and handle all the UBE you have
        received in a whip.


<p class="column8">
        Why is the complaint message sent to <em class="word">postmaster</em> address, while
        recent sites have set up an <em class="word">abuse</em> addresses as well? That's
        simply because RFC822 requires that each site must have postmaster
        account and you should be able to count on delivery to that address.


<p class="column10"><em class="quote10">
          <span class="word-ref">[RFC822]</span> (...) standard specifies a single, reserved mailbox address
          (local-part) which is to be valid at each site. Mail sent to that
          address is to be routed to a person responsible for the site's
          mail system or to a person with responsibility for general site
          operation. The name of the reserved local-part address is:
          Postmaster</em>



<p class="column8">
        From the standard, &quot;postmaster@domain&quot; is required to be valid.
        Some domains have opened specific addresses where you can send
        these complains, e.g. abuse@aol.com, fraud@uu.net. If you know a
        specific address where to send the complaint, update
        <samp class="word">tinygnus-:ube-abuse-account-table</samp>



  <a name="129" id="129"></a>
  <h2>
      Gathering information from articles (e.g. URLs)

  </h2>




<p>
<p class="column8">
        If you read group that has very high traffic, and don't have to
        time to read all articles, but you're are still interested in
        seeing if there are any good urls mentioned, you can use function
        below. It will not record duplicate urls, only unique ones.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      C-c ' g u       tinygnus-summary-gather-urls    </pre></td>
    </tr>
</table>


<p class="column8">
        Function steps through all marked articles (Mark command in summary
        buffer is in M P submap), examines each message and puts the urls
        in <samp class="word">tinygnus-:output-buffer</samp>. You can clear and display with
        commands:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      C-c ' g d       tinygnus-summary-gather-display
      C-c ' g c       tinygnus-summary-gather-clear    </pre></td>
    </tr>
</table>



  <a name="130" id="130"></a>
  <h2>
      Configuring the user format functions

  </h2>




<p>
<p class="column8">
        Before you load this file, it might be good to configure variable
        <samp class="word">tinygnus-:uff-table</samp> so that it won't clash the definitions of
        your own <samp class="word">gnus-user-format-function-X</samp>. If you load this file
        without modifying the table, it will replace all existing functions
        according to that table. In case you don't know what this is all
        about, go to Emacs info pages <samp class="word">C-h</samp> <samp class="word">i</samp>, go to Gnus node, press
        's' to search for 'Summary Buffer Lines' RET. Look at the specifier
        %uX, where X is anything.



  <a name="131" id="131"></a>
  <h2>
      Miscellaneous commands

  </h2>




<p>
<p class="column8">
        <samp class="word">tinygnus-make-group-from-dir-nndoc</samp> can be used to generate all nndoc
        groups fast from bunch of mailboxes that you dropped to some
        directory. You might have downloaded archives of mailing lists
        sorted by month and year and you want to genrate Gnus groups for
        them. This is it.



  <a name="132" id="132"></a>
  <h2>
      Nnml handling commands

  </h2>




<p>
<p class="column8">
        TinyGnus is mainly designed for nnml backend. Gnus can be easily
        used for mailing lists; Gnus customisations; moving groups from one
        place to another. In TinyGnus there are some exotic functions that
        may prove handy when you have the same need. See below.


<p class="column8">
        <samp class="word">tinygnus-make-group-nnml-from-dir</samp>. If you have nnml
        groups in ~/Mail; this function can create the equivalent nnml
        groups to your gnus easily. Give a REGEXP to match directories to
        include for group creation (E.g. &quot;list\.&quot; for all
        mailing list list.* directories)


<p class="column8">
        <samp class="word">tinygnus-make-group-from-dir-nnml-procmail-spool</samp>. A procmail
        (never mind if you don't know what that is); is a tool to deliver
        each incoming mail to correct mailbox as it arrives and it is very
        efective for filtering mailing lists. Procmail users have to
        reserve separate directory for these mailboxes; usually
        ~/Mail/spool/ and all files end to *.spool ( list.ding.spool,
        work.lab.spool ... ). Keeping Gnus aware of the mailboxes in the
        ~/Mail/spool would normally be manual work, but this function can
        create the nnml groups for you for each found spool file from the
        directory.


<p class="column8">
        <samp class="word">tinygnus-group-parameter-mailing-list</samp>. Use this to read the last
        nnml mail from the directory and suggest an email address from
        From, To, Cc, Reply-To to be inserted into the group parameter
        <samp class="word">to-list</samp>. When you start a fresh Gnus and create nnml groups, which
        are mailing lists (e.g. from old mail); the tedious part is to
        recover the &quot;list status&quot; of the group and insert correct <samp class="word">to-list</samp>
        field into each group. With This function; just mark the groups
        where you want to add the parameter and you're set in few minutes.



  <a name="133" id="133"></a>
  <h2>
      Enhanced Gnus functions

  </h2>




<p>
<p class="column9"><strong>
         Enter group in Topic mode with SPC</strong>



<p class="column8">
        Function <samp class="word">gnus-topic-read-group</samp> is enhanced to maximize speed of
        reading new articles. Normally when you enter Group, gnus shows
        unread and ticked articles, but if you have any previously ticked
        articles in group, making the summary buffer is slow. If we ignore
        the ticked articles and display only the newly arrived, unread,
        articles, the time to generate Summary buffer is far less. If you
        have many private mail,work, mailing list groups, this saves you
        from lot of time to be able to track new messages.


<p class="column9"><strong>
         Show dormants immediately in non-nntp groups</strong>



<p class="column8">
        Function <samp class="word">gnus-summary-limit-children</samp> is enhanced so that it will
        include dormant articles in Summary creation in non-nntp groups.
        Some people found out that the dormant mark ? is handy in mail
        groups to mean <samp class="word">todo</samp> or `see this later' or <samp class="word">urgent</samp>. Normally
        gnus treats all groups the same: nntp or private mail makes no
        difference. However the dormant mark can be used to mean different
        meaning in nntp group and non-nntp groups and this enchancement
        does just that. You get fast Summary with dormants now and you
        don't need to separately limit the buffer to show the dormants. To
        turn off this feature, set <samp class="word">tinygnus-:show-dormants</samp> to nil.



  <a name="134" id="134"></a>
  <h2>
      Compressed Gnus newsrc files

  </h2>




<p>
<p class="column8">
        Having a unix account that has unlimited disk space is very rare
        and for that reason being able to keep files in compressed format s
        preferrable to avoid going over Quota with message &quot;Quota limit
        exceed, remove nnnK withing N days...&quot;.


<p class="column8">
        Gnus has compression support for Group files, but not for the
        bloating .newsrc or .eld files. Gawk. They consume your disk real
        fast because they become big in no time.


<p class="column8">
        For that reason there is included adviced Gnus code that
        automatically starts using compressed startup files if your
        <samp class="word">gnus-init-file</samp> has extension <samp class="word">.gz</samp>. Changing from normal init
        file to compressed one is easy:

<ol>
	<li>gzip your .newsrc and .eld files
<li>(setq tinygnus-:z &quot;.gz&quot;)
	<li>M-x load-library RET tinygnus RET</li>
</ol>




<p class="column8">
        If you later want to restore this settings: Unzip, do (setq
        tinygnus-:z nil), and reload the package. But if you're low
        of quota, you propably do the reverse operation.


<p class="column9"><strong>
         Gnus version note</strong>



<p class="column8">
        This file installs only features to Gnus 5.8.2 (Emacs 20.5) and
        if you're using newer gnus version the advice code is not activated.
        Using this package should be safe with any existing Gnus version
        later than 5.8.2



  <a name="135" id="135"></a>
  <h2>
      Line format example for *Group* buffer

  </h2>




<p>
<p class="column8">
        The personal Group buffer line can be configured as follows. If you
        try this with very old Gnus, drop away that fancy ~(cut 6) and use
        plain %d.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (setq gnus-topic-line-format &quot;%i%(%{%n%}%) %A -- %g %v\n&quot;)

      (add-hook 'gnus-select-group-hook   'gnus-group-set-timestamp)

      (setq gnus-group-line-format
          &quot;%M%S%p%3uZ[%L]%-4uE%uT %5y: %-40,40g %7,7~(cut 6)d %uC\n&quot;)    </pre></td>
    </tr>
</table>


<p class="column8">
        Which looks like the following in the buffer, notice that the topic
        mode is on.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      Procmail 34 -- 9
        [2]3.g       0: nnml:list.ding        30T1810
        [2]3.        0: nnml:list.ntemacs     30T1819
      * [2]3.  !     0: nnml:list.procmail    30T1850
        [2]2.t      33: nnml:list.flamenco    30T1849
         | |   |                              %d
         | |   %uT
         | The whole &quot;2.t&quot; comes from %uE
         %L    </pre></td>
    </tr>
</table>


<p class="column8">
        There you can see the benefit of the user functions. The [2] tells
        the group level, &quot;2.t&quot; says &quot;2&quot; day total Expiry, &quot;.&quot; means that the
        period is explicitely defined as a group parameter and &quot;t&quot; means
        that total expiry in the group parameter list is on. Do you
        see the extra <samp class="word">g</samp> at the top line? It tells that the <samp class="word">gcc-self</samp>
        group parameter is activated in group parameter list. If group has
        ticked articles, the %uT will show it. The %ud says &quot;Day 30 in the
        month, Time 18:10&quot; when you read the group.


<p class="column8">
        All these additional functions that display these status informations
        can be found from this package.



  <a name="136" id="136"></a>
  <h2>
      Displaying the group parameter info

  </h2>




<p>
<p class="column8">
        As you saw above, the %uE function, or more precisely,
        <samp class="word">tinygnus-uff-group-expiry</samp> controls what information is returned by
        looking at <samp class="word">tinygnus-:uff-table</samp>. Please configure it to display
        whatever you want from group parameters.



  <a name="137" id="137"></a>
  <h2>
      Article wash functions

  </h2>




<p>
<p class="column8">
        If you are interested, you can add following function(s) to the
        <samp class="word">gnus-article-display-hook</samp>


<p class="column8">
	<ul>
	<li><samp class="word">tinygnus-article-fix-msword-quotes</samp></li>
</ul>





  <a name="138" id="138"></a>
  <h2>
      Debuging Gnus: can't select group

  </h2>




<p>
<p class="column8">
        If something is wrong with the Gnus and you can't enter the group
        for a reason or another, something has happened to your setup.
        There is <em class="word">experimental</em> funtions in this package that may shed some
        help. The first thing to try is calling
        <samp class="word">tinygnus-gnus-debug-investigate-problem</samp> Which asks for a group
        name, give fully qualifies name like &quot;nnml:list.ding&quot;. This
        function is geared towards debugging nnml groups, so you may
        not benefit a lot for other backends.


<p class="column8">
        Thre is no detailled instructions how to fix the situation after
        the function has run, but the printed results in
        <samp class="word">tinygnus-:debug-buffer</samp> should at least give better clues. LOOK
        CLOSELY THE RESULTS. And supply them to gnus newsgroup or mailing
        list. Maybe someone can by looking at the values what's the
        problem.

<ul>
	<li>It's mostly trial and error; after you get used to reading
            what values are important and what to do with it.
<li>The <samp class="word">tinygnus-gnus-debug-investigate-problem</samp> is EXPERIMENTAL
            and it is not guarranteed to work with any Gnus version.
	            It was created to debug setup problems with 5.8.2 1999-12-24.</li>
</ul>





  <a name="139" id="139"></a>
  <h2>
      Gnus summary minor mode

  </h2>




<p>
<p class="column8">
        <samp class="word">tinygnus-summary-mode</samp> is turned on when summary buffer gets
        created. There are some keybindings that you may wish to
        relocate for faster access, e.g. the search functions that
        repeat the last search. In Gnus, pressing Esc-s to search again
        would require a confirmation of the search string each time,
        while using <samp class="word">`tinygnus-gnus-summary-search-article-forward</samp> uses
        the supplied string immediatedly. To relocate keys, use this code:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (defun my-tinygnus-summary-mode-hook ()
        &quot;Define new keybindings.&quot;
        (let* ((map tinygnus-:summary-mode-map))
          (define-key map [(alt ?&lt;)]
            'tinygnus-gnus-summary-search-article-forward)
          (define-key map [(control ?&lt;)]
            'tinygnus-gnus-summary-search-article-backward)))

      (add-hook 'tinygnus-summary-mode-hook
                'my-tinygnus-summary-mode-hook)    </pre></td>
    </tr>
</table>

<hr>
               <a name="140"  id="140"></a>
               <h1>
               Tinyhotlist.el --- Hot-list of important buffers, files(ange-ftp), dired

               </h1>



  <a name="141" id="141"></a>
  <h2>
      Preface, may 1995

  </h2>




<p>
<p class="column8">
        There is excellent utility 'msb.el', but when it comes to having
        most important files at hand, It needs some companion with it. An
        emacs session can easily have 20 C++ files, user may start news
        while the compile it going on and try some lisp code found from the
        gnu.emacs.help articles, load couple of emacs configuration files
        for editing and then realize that there is mail coming, because
        some biff utility tells so. User switches to mail reader and starts
        reading the latest messages... within short period of time emacs is
        full of buffers and to use MSB to navigate through them all may be
        get one frustrated: &quot;Where was that buffer again, do I need to step
        3 panes before I can see that file...?&quot;


<p class="column8">
        The navigation is especially problem if user is working only with
        handful of source files actively, while he may still have 40+ files
        loaded.


<p class="column8">
        What would help the situation? A simple hot list for my most used
        files, where one can put and remove items very easily. No more
        searching like in msb.el.


<p class="column8">
        This package does not intend to replace <samp class="word">msb</samp>, it's superb in class
        of its own, but there may be also need for a hot list, because the
        most used files page in <samp class="word">msb</samp> changes dynamically whenever buffers
        are changed. Hot list in the other hand stays the same from session
        to session.



  <a name="142" id="142"></a>
  <h2>
      Overview of features

  </h2>



<p>
<ul>
	<li>Provides pop-up menu where you can add and remove current buffer:
            &quot;most important work file list&quot;. In non-windowed system,
            standard completion feature is used instead of pop-up menu.
<li>Any persistent files can be kept in hot list, even ange-ftp files or
            dired buffers.
	</li>
<li>Hot list can be saved and read on startup.
	</li>
<li>This is not &quot;last visited files&quot; list, but persistent list of
            files. When you select item from hot list, the file is displayed
	            (if it is in Emacs) or loaded (by using ange-ftp if necessary).</li>
</ul>





  <a name="143" id="143"></a>
  <h2>
      How to use the hotlist

  </h2>




<p>
<p class="column8">
        When you load this package, it defines hot list cache to store the
        items. The list will be empty at first, but after you
        have added an entry to it, you can display the hot list. To add
        or remove entries from hot list, is explained in function:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      C-h f tinyhotlist-control    </pre></td>
    </tr>
</table>


<p class="column8">
        If you use add and remove commands often, it might be useful to
        to define some custom key bindings. The alternative way is to use
        prefix arguments to functions <samp class="word">tinyhotlist-control</samp>

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (global-set-key [(shift f3)]   'tinyhotlist-add)
      (global-set-key [(control f3)] 'tinyhotlist-remove)    </pre></td>
    </tr>
</table>


<p class="column8">
        In non-windowed environment hot list is is managed through completion menu.
        Admittedly, this is not as nice as the pop-up menu.,
        To use keyboard, use function:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      tinyhotlist-control-kbd    </pre></td>
    </tr>
</table>


<p class="column8">
        Here is an example of the displayed hot list in pop-up. The second
        string to the right is abbreviation name of the directory, e.g. <samp class="word">~ftp1</samp>
        is a short name for /user@site.com:~user/project/this/. The <samp class="word">txt</samp> is
        short name for $HOME/doc/txt/

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      +-------------------+
      |hotlist            |
      |===================|
      |*Backtrace*        |
      |*VC-log*           |
      |.emacs             |
      |.procmailrc        |
      |ChangeLog          |
      |RMAIL              |
      |file.txt     txt   |
      |other.txt    txt   |
      |remote.cc    ~ftp1 |
      |remote.cc    ~ftp2 |
      +-------------------+    </pre></td>
    </tr>
</table>


<p class="column8">
        Note about the pop-up display: The font used in pop-up may not be
        proportionally spaced, like Courier, so the entries may therefore
        show as ragged. That is, the directory names are not nicely lined
        up.



  <a name="144" id="144"></a>
  <h2>
      Shortening long filenames

  </h2>




<p>
<p class="column8">
        The typical menu item is quite long, because there is buffer name
        and filename part. The default rule shortens the home directory
        names to &quot;&quot; but if your file is elsewhere, you have to modify the
        <samp class="word">tinyhotlist-:abbreviate-file-name-table</samp>. There is examples how to use it
        at the end of source file. Like:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      /user@site.com:~user/project/this/  --&gt; ~ftp1    </pre></td>
    </tr>
</table>


<p class="column8">
        If you make changes to this variable after the hot list has been
        made, the new abbreviations will take effect on at creation of new
        items. To rebuild everything from defaults (this destroys you
        previous content), call function <samp class="word">tinyhotlist-build-default-hotlist</samp>.



  <a name="145" id="145"></a>
  <h2>
      Hooks: saving hot list after each cache update

  </h2>




<p>
<p class="column8">
        The buffers are stored into variable <samp class="word">tinyhotlist-:cache</samp> and there
        is two hooks that run after the entry is deleted or added to the
        cache. The hooks are <samp class="word">tinyhotlist-:add-hook</samp> and
        <samp class="word">tinyhotlist-:remove-hook</samp>. They contain default value
        <samp class="word">tinyhotlist-save-hotlist</samp> which updates the cache on disk after
        each change. You can set these hooks to nil if you want to manually
        control when to save cache. (Maybe you load BASE cache every time
        and modify it during Emacs session, but you don't want to save
        this &quot;session&quot; hot list).

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (add-hook 'tinyhotlist-:load-hook 'my-tinyhotlist-load-hook)

      (defun my-tinyhotlist-load-hook ()
        &quot;My hotlist settings&quot;
        (setq tinyhotlist-save-hotlist nil)
        (setq tinyhotlist-:remove-hook nil))    </pre></td>
    </tr>
</table>



  <a name="146" id="146"></a>
  <h2>
      Saving and restoring the hot list

  </h2>




<p>
<p class="column8">
        When you're satisfied with the hot list, save it to file with command:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
        M-x tinyhotlist-save-hotlist    </pre></td>
    </tr>
</table>


<p class="column8">
        To automatically restore the hot list when package loads:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (add-hook 'tinyhotlist-:load-hook 'tinyhotlist-load-hotlist)    </pre></td>
    </tr>
</table>


<p class="column8">
        To save the <strong class="word">current</strong> hot list automatically when Emacs exists:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (add-hook 'kill-emacs-hook 'tinyhotlist-save-hotlist)    </pre></td>
    </tr>
</table>



  <a name="147" id="147"></a>
  <h2>
      Example

  </h2>




<p>
<p class="column8">
        Here is complete example setup how you could configure this package.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (autoload  'tinyhotlist-control &quot;tinyhotlist&quot; &quot;&quot; t)
      (ti::add-hooks 'tinyhotlist-:load-hook
           '(tinyhotlist-load-hotlist my-tinyhotlist-init))

      (defun my-tinyhotlist-init ()
        &quot;Sets defaults for hotlist&quot;
        (setq tinyhotlist-:default-function       'my-tinyhotlist-defaults)
        (global-set-key [(control shift mouse-3)] 'tinyhotlist-control))



        (defconst tinyhotlist-:abbreviate-file-name-table
          (list
           ;;   Remember: the substitution order must be _BIGGEST_
           ;;   substitution first.
           ;;
           ;;  Shorten ange ftp references
           (list
           &quot;/foo@example.com:/home/foo&quot;
           &quot;~foo&quot;)

           (list txt    &quot;~t&quot;)
           (list wtxt   &quot;~wt&quot;)
           (list elisp  &quot;&quot;)   ;; and wont show this either
           (list h        &quot;&quot;))))   ;; don't display the home

      (defconst tinyhotlist-:default-regexp
        (concat
         &quot;^RMAIL$\\|scratc\\|diff\\|buffer menu\\|diff\\|Messages&quot;

         ;; Procmail
         &quot;\\|procmailrc\\|pm-.*\\(hdr\\|log\\|rc\\|txt\\)&quot;

         ;; text
         &quot;\\|elisp.txt\\|ssjaaa.txt&quot;

         ;; perl
         &quot;\\|\\.pls&quot;

         &quot;\\|.mak&quot;

         ;; emacs project files
         &quot;\\|emacrs\\|funcs.ja.el\\|tinylibm.el\\|tinylib.el&quot;

         ;;  C++ project files
         &quot;\\|wmpmea.*cc&quot;

         ;; Gnus
         &quot;\\|article\\|newsgroup\\|Summary\\|MIME-out&quot;))

        ;; ^^^ ^^^ ^^^ ^^^ ^^^ ^^^ ^^^ ^^^ ^^^ ^^^ ^^^ ^^^ ^^^ window-system ^ ^
        )    </pre></td>
    </tr>
</table>

<hr>
               <a name="148"  id="148"></a>
               <h1>
               Tinyigrep.el --- Top level interface to igrep.el

               </h1>



  <a name="149" id="149"></a>
  <h2>
      Preface, Dec 1996

  </h2>




<p>
<p class="column8">
        Somewhere at Summer 1996 Kevin Rodgers <em><a href="mailto:kevinr@ihs.com" >kevinr@ihs.com</A></em> decided to put
        together all grep calls to one package named igrep.el: <samp class="word">agrep</samp>,
        <samp class="word">egrep</samp>, <samp class="word">fgrep</samp> and <samp class="word">zgrep</samp>. It also could search trees
        recursively.


<p class="column8">
        The package draw attention and many people picked up the package
        from the gnu.emacs.sources newsgroup. The default <samp class="word">M-x</samp> <samp class="word">grep</samp>
        command that came with emacs was a pale shadow compared to
        <samp class="word">igrep.el</samp> package's possibilities and advanced features. The birth
        of tinyigrep.el was the need to integrate searches to some common
        directories or grouped files, like news articles, info pages,
        project directories, lisp sources, Emacs startup files. A package
        that would allow so called &quot;databases&quot; (directories to search).
        igrep.el interface seemed to offer great deal of flebility if you
        did not have locate(1) or glimpse(1) and their indexes up to date
        all the time.



  <a name="150" id="150"></a>
  <h2>
      Description

  </h2>



<p>
<ul>
	<li>Toplevel interface to <samp class="word">igrep.el</samp>: Easy command menu access.
<li>You can toggle igrep options while you're in the
            echo-area menu.
	</li>
<li>Do directory searches easily: grep all your
            news files, your Emacs news files, your text files, your lisp
            files, grep all manual paths... just configure one variable.
            You can jump to matches from the <em class="word">compile</em> buffer where
            the results will appear.
	</li>
<li>The default installation includes many default directories
            to search for: Perl .pod files, perl installation .pm files,
            Emacs lisp tree_: cl, vm, tm, semi, mc, gnus and Emacs Info
            tree files, Grep all Manual pages installed in your system,
	            grep your ~/bin ... more.</li>
</ul>





  <a name="151" id="151"></a>
  <h2>
      Do you need this package?

  </h2>




<p>
<p class="column8">
        If you use Emacs &quot;grep&quot; then I suggest you to move to <em class="word">igrep.el</em>
        and evaluate tinyigrep.el as well. It simplifies your grep tasks
        much more. Additionally, if you have several directories where you
        keep some persistent data where you want to do lookup from time to
        time, then you propably appreciate this package. Package defines
        all the parameters for you and all you need to to is supply the
        SEARCH-STRING.



  <a name="152" id="152"></a>
  <h2>
      Suggestion

  </h2>




<p>
<p class="column8">
        You may find it useful to keep the igrep buffer in a special frame
        when working in windowed environment. See if you like this:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (if window-system   ;; Use variable `console-type' in XEmacs
         (setq special-display-buffer-names
           '(&quot;*compilation*&quot; &quot;*grep*&quot; &quot;*igrep*&quot;)))    </pre></td>
    </tr>
</table>



  <a name="153" id="153"></a>
  <h2>
      A simple example how to use search database

  </h2>




<p>
<p class="column8">
        Suppose you want to search 1) emacs cl*el files 2) all your ~/Mail
        (recurse into dirs) 3) your ~/News files. The sample database
        definitions would look like this:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (require 'tinyigrep)  ;; gives macro `tinyigrep-db-lisp-elt'

      (tinyigrep-db-push-elt
        (tinyigrep-db-lisp-elt
           &quot;cl.el&quot;        ;; Find root based on this file
           &quot;lisp-cl&quot;      ;; the name of search &quot;database&quot;
           &quot;egrep&quot;        ;; Program to do the work (remember zgrep)
           ;;  Grep only cl libraries
           '(list (concat dir &quot;cl*el&quot;))))
      ;;
      ;; Notice '(nil) which turns on recursive search.
      ;;
      (tinyigrep-db-push-elt '(&quot;Mail&quot; (&quot;egrep&quot; (&quot;~/Mail/*&quot;) (nil))))

      ;; This greps only ~/News/*
      (tinyigrep-db-push-elt '(&quot;News&quot; (&quot;egrep&quot; (&quot;~/News/*&quot;))))    </pre></td>
    </tr>
</table>



  <a name="154" id="154"></a>
  <h2>
      Special database for current file directory

  </h2>




<p>
<p class="column8">
        Normally you add databases to variable <samp class="word">tinyigrep-:database</samp>.
        There is also a special database whose name is <samp class="word">.</samp>, which refers to
        files that are under current buffer's filedirectory. Eg. say you
        are editing:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      /user/foo/txt/file.txt    </pre></td>
    </tr>
</table>


<p class="column8">
        Selecting a special database <samp class="word">.</samp> will give you a prompt to limit
        search for files under that directory. You can modify the file
        pattern as you like:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      Search: /user/foo/txt/*.txt    </pre></td>
    </tr>
</table>


<p class="column8">
        You can use this search criteria for successive searches by selection
        <samp class="word">last</samp> database.



  <a name="155" id="155"></a>
  <h2>
      Selecting igrep command from command menu

  </h2>




<p>
<p class="column8">
        When you call TinyIgrep, you get prompted for a database selection,
        which could be &quot;lisp-cl&quot;, &quot;Mail&quot;, &quot;News&quot; anything you defined. The
        igrep interface menu looks like this:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      igrep: i)grep g)uess l)ast time d)ired [c)ase r)ecur u)ser]    </pre></td>
    </tr>
</table>


<p class="column8">
        Pess key ? to see more help on the command line interface. You can
        change igrep.el options listed in [], e.g. key <samp class="word">c</samp> toggles case
        sensitivity of the search by adding or removing the -i option for
        grep, <samp class="word">r</samp> can be used to toggle recursive mode on or off, and
        <samp class="word">u</samp> toggles user switches on and off. The user options are stored
        to history list <samp class="word">tinyigrep-:history-igrep-user-options</samp> from where
        they can be recalled.



  <a name="156" id="156"></a>
  <h2>
      List of predefined databases

  </h2>




<p>
<p class="column8">
        For your convenience, function <samp class="word">tinyigrep-install-default-databases</samp>
        is run from <samp class="word">tinyigrep-:load-hook</samp>, which defines several databases
        Here is summary of available default database selections:


<p class="column7"><em><strong>
       Home:</strong></em>


<ul>
	<li>.               Search current directory
<li>home-bin-sh     Search ~/bin/ for *.sh *.awk
	<li>home-bin-pl     Search ~/bin/ for Perl *.pl</li>
</ul>




<p class="column7"><em><strong>
       Operating system:</strong></em>


<ul>
	<li>man             Search manpages
	<li>c-usr-include   Search C header *.h files in /usr/include</li>
</ul>




<p class="column7"><em><strong>
       Perl pages:</strong></em>


<ul>
	<li>perl-modules    Search Perl modules *.pm in @INC
	<li>perl-pod        Search Perl installation *.pod manpages</li>
</ul>




<p class="column7"><em><strong>
       Emacs and Emacs lisp:</strong></em>


<ul>
	<li>elisp-home      Search ~/lisp or ~/elisp for *.el
<li>lisp-dot-files  Search all .emacs* or emacs-rc- files in <samp class="word">load-path</samp>
	</li>
<li>load-path       Search <samp class="word">load-path</samp> *.el files
	</li>
<li>lisp-emacs-distribution Search Emacs Lisp installation root
	<li>emacs-root      Search all of Emacs installation root</li>
</ul>




<p class="column7"><em><strong>
       Seach Emacs packages: (there are many more, these are only examples)</strong></em>


<ul>
	<li>lisp-pcl-cvs
<li>lisp-elib
	</li>
<li>lisp-cl
	</li>
<li>lisp-mc
	</li>
<li>lisp-irchat
	</li>
<li>lisp-bbdb
	</li>
<li>lisp-w3
	</li>
<li>lisp-vm
	</li>
<li>lisp-semi
	</li>
<li>lisp-apel
	</li>
<li>lisp-flim
	</li>
<li>lisp-mel
	<li>lisp-tiny</li>
</ul>





<p class="column8">
        In addition to the above, if you have any of these files in the
        directories along the <samp class="word">load-path</samp>, you can search those directories
        recursively. Please create these empty files &quot;to mark&quot; these directories for automatic
        scanning. In Unix, simple <samp class="word">touch(1)</samp> command create a file.


<ul>
	<li><em class="word">lisp-rc</em> database. If file <samp class="word">emacs-rc-flag.el</samp> exists. Typically
            in ~/elisp/rc/ where you keep all your Emacs startup settings
            and directory is usually under CVS, RCS version control. From
            this file you would load or set up loading all other Emacs
	            startup rc files.</li>
</ul>



<ul>
	<li><em class="word">lisp-site-lisp</em> database. If file <samp class="word">site-lisp-flag.el</samp> exists.
            Typically in /usr/share/site-lisp/ or under /opt hirarchy.
	            This is the whole site wide lisp installation root directory.</li>
</ul>



<ul>
	<li><em class="word">lisp-site-lisp-emacs</em> database. If file <samp class="word">site-lisp-emacs-flag.el</samp>
            exists. Here you keep Emacs specific files that do not work
            with XEmacs. Typically in /usr/share/site-lisp/emacs/ or under
	            /opt/.</li>
</ul>



<ul>
	<li><em class="word">lisp-site-lisp-xemacs</em> database. if file <samp class="word">site-lisp-xemacs-flag.el</samp>
            exists. Here you keep XEmacs specific files that do not work
            with Emacs. Typically in /usr/share/site-lisp/xemacs/ or under
	            /opt/.</li>
</ul>




<p class="column8">
        A Typical Emacs lisp package installation structure (site wide) might
        look like this. Create the appropriate dummy files as needed,
        like creating site-lisp-flag.el to directory /usr/share/site-lisp/

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      /usr/share/site-lisp/
                          common/             for Both XEmacs and Emacs
                          emacs               Emacs only packages
                          net/                Net packages
                              cvs-packages/   CVS method
                              packages/       Big packages
                              users/          ftp or http directories
                          xemacs/             XEmacs only packages    </pre></td>
    </tr>
</table>


<p class="column8">
        If you want to define a short name for any of these defaults, add
        additional entry e.g. for &quot;vm&quot;. The last parameter could be '(nil) which
        instead if nil' to  enable recursive search.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (tinyigrep-db-push-elt-lisp-package &quot;vm&quot; &quot;vm.el&quot; &quot;grep&quot; nil)    </pre></td>
    </tr>
</table>


<p class="column8">
        Here is small piece of lisp code which adds multiple short names
        (defaults are lisp-*} to the search database:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (require 'cl)

      (dolist (package '(&quot;vm&quot; &quot;gnus&quot; &quot;irchat&quot; &quot;semi-def&quot; &quot;mc&quot; &quot;tinylib&quot;))
          (tinyigrep-db-push-elt-lisp-package
             package (concat package &quot;.el&quot;) &quot;egrep&quot;))
      ;; end of code    </pre></td>
    </tr>
</table>

<hr>
               <a name="157"  id="157"></a>
               <h1>
               Tinyindent.el --- Like indented-text-mode, but minor-mode.

               </h1>



  <a name="158" id="158"></a>
  <h2>
      Preface, sep 1994

  </h2>




<p>
<p class="column8">
        The original auto-indent-mode from autoindent.el was very short
        and limited, so I thought I extend it a little...here is the
        result.  Thank you Alan for giving me a push to extend your code
        into new directions.  When I spoke with Alan and he gave me free
        hands, because he hadn't used the .el for quite a long time.


<p class="column8">
        I wasn't satisfied with the  indent-relative function, so
        I coded a preprocessor for it. Now the cursor won't jump
        all over the line if the previous one was empty. Just
        try original  M-x indent-relative when there is empty line above
        and you'll see what I mean.


<p class="column8">
        And where this module really shines: Has it ever been easier to line
        up variables according to '=' or in within lisp 'let*', or writing
        mail messages while this mode is turned on...



  <a name="159" id="159"></a>
  <h2>
      Overview of features

  </h2>



<p>
<ul>
	<li>General block editing or indentation MINOR mode. Replacement for
            <samp class="word">indented-text-mode</samp>.
<li>Takes over the TAB and BACKSPACE key.
	</li>
<li>Looks back to guess right indentation. and uses relative indent
            when not at BOL.
	</li>
<li>Special indentation is suggested if cursor is at BOL and
            user defined regexp is matched in line above. (like adding
            multiple c++ comments)
	</li>
<li>Extra tinyindent-tt-mode for writing descriptions within comments. This
            allows user to choose when to use HARD tab or SOFT tab = relative
            to the text above. TAB TAB inserts hard tab, TAB SPC inserts soft
	            tab.</li>
</ul>




<hr>
               <a name="160"  id="160"></a>
               <h1>
               Tinylib-ad.el --- Library of adviced functions. Backward compatibility

               </h1>



  <a name="161" id="161"></a>
  <h2>
      Preface, 1999

  </h2>




<p>
<p class="column8">
        This is lisp function library, package itself does nothing.
        It modifies existing Emacs functions with advice.el in order
        to provide backward compatibility for functions that have changed.
        Eg. Emacs 20.4 introduced new parameter NOERR to <samp class="word">require</samp> command
        and if you wanted to use a package in lower Emacs that uses this new
        feature, you would have had to upgrade to 20.4.


<p class="column8">
        There is another way, load this library first and continue using
        your current Emacs version. This package will redefine functions
        only when needed, so it should be quite safe.



  <a name="162" id="162"></a>
  <h2>
      Code policy

  </h2>




<p>
<p class="column8">
        If I have found some useful macro from someone's .el or from
        news, the proper source and name of author + time is preserved. All
        the credit goes to those marvellous programmers!



  <a name="163" id="163"></a>
  <h2>
      Usage

  </h2>




<p>
<p class="column8">
        You must not autoload this package; but always include

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (require 'tinylibm)    </pre></td>
    </tr>
</table>


<p class="column8">
        You don't need any other require commands: all my other library
        functions get defined as well by using autoload.  Repeat: you don't
        have to put these in your packages:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (require 'tinylib)     ;; leave this out
      (require 'tinyliby)    ;; not needed either.
      (require 'tinylib-ad)  ;; not needed either.    </pre></td>
    </tr>
</table>

<hr>
               <a name="164"  id="164"></a>
               <h1>
               Tinylib.el --- Library of general functions

               </h1>



  <a name="165" id="165"></a>
  <h2>
      Preface, 1995

  </h2>




<p>
<p class="column8">
        At some point I started using several functions in program
        modules I developed over the time, so it was time to move all common
        parts into general library.


<p class="column8">
        Briefly:

<ul>
	<li>This is library, so the package itself does nothing,
            there may be some interactive functions, so just skim through code.
<li>Collection of general functions. With these you can solve your
            problems within minutes, instead of spending days thinking
	            &quot;How do I do this with lisp? Does there exist a function...?&quot;</li>
</ul>





  <a name="166" id="166"></a>
  <h2>
      Quick function help

  </h2>




<p>
<p class="column8">
        Please use function

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      tinyliby.el / ti::y-get-file-documentation    </pre></td>
    </tr>
</table>


<p class="column8">
        which will build up a buffer containing all functions/macros
        and variables used in any lisp package file. You can print the results
        to get an overview of all functions in this file.


<p class="column8">
        If you feel that some function description is not clear, please
        drop me a mail. There is no plans for separate info files; that's why
        I try to keep the function descriptions as good as possible.


<p class="column8">
        Also look at the function

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      tinyliby.el / ti::y-describe-symbols    </pre></td>
    </tr>
</table>


<p class="column8">
        which will help you to find particular lisp information from the
        emacs. E.g. to search for function that has &quot;file&quot; in their name.



  <a name="167" id="167"></a>
  <h2>
      If you're pacakge write, here is more resources

  </h2>




<p>
<p class="column8">
        Here is standard tool set I use for writing/studying/lining up
        variables for lisp...

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      tinybm.el           drawing sections (book marks)
      tinytab.el          tab minor mode
      tinyindent.el       another &quot;line up my vars&quot; minor mode
      lisp-mnt.el         std emacs package use lm-verify
      eldoc.el            show func doc immediately (under cursor)
      tinylisp.el         E.g. find lisp error.    </pre></td>
    </tr>
</table>



  <a name="168" id="168"></a>
  <h2>
      What is this 'tiny' thing?

  </h2>




<p>
<p class="column8">
        The term <em class="word">tiny</em> does not refer to file size, it just happened some
        that the first released my package was named &quot;tinyappend.el&quot;
        and the prefix has stayed since.



  <a name="169" id="169"></a>
  <h2>
      Code policy

  </h2>




<p>
<p class="column8">
        All functions are written by <span class="word-ref">[jari]</span>, unless otherwise stated. If
        there has been interesting function from some other package a
        reference to the file is preserved. All the credit and and cheers
        for the original author who wrote so respectable code, that it
        could be used right from the box! If someone contributes good,
        general purpose function, all the credit belongs to him
        automatically. Persons name and date and so on is included.



  <a name="170" id="170"></a>
  <h2>
      TinyXXX Libraries' intention

  </h2>




<p>
<p class="column8">
        These libraries are by no means private. My wish is that all Lisp
        developers would contribute their general purpose functions and
        they would be merged into FSF or other libraries so that the
        functions would be commonly available.


<p class="column8">
        The biggest problem in the lisp world seems to be compatibility:
        after every new Emacs release you have to be on your toes if that
        broke backward compatibility. This is understandable from the Emacs
        developers point of view: they don't want to carry any old burden
        with the latest high tech product. But it places other lisp package
        writes in an awkward situation: if they do have the chance
        to follow the Emacs development, sooner or later their fine package
        breaks.


<p class="column8">
        Then comes the issue of Emacs and XEmacs differences and different
        platforms, now when NT has gained firm grounding.


<p class="column8">
        In order to reuse the code in all my modules and to keep up with
        the Emacs/XEmacs interface and different releases, the general function
        has been moved to libraries.


<p class="column8">
        When a new original Emacs function (perhaps after new Emacs
        release) is found, the old code is moved to (b)backward library.
        This way a compatibility to the old versions is preserved. Feel
        free to drop maintainer a note if you know a function that should
        be used instead of some of these library functions.



  <a name="171" id="171"></a>
  <h2>
      Code reliability

  </h2>




<p>
<p class="column8">
        Almost all of these functions are in actual use all the time and
        they have been found to be quite good behaving. This doesn't mean
        that they don't contain bugs. And if you feel that function should
        have more parameters or they should behave &quot;more generally&quot;, please
        mail the maintainer. Any suggestions are considered in detail.


<p class="column8">
        The functions are <em class="word">not</em> tested systematically, one by one. Instead,
        I couple of quick tests were carried out to verify that the
        function worked expectedly. It may still have bugs, when fed with
        some other data or used in some other task. Please be patient and
        send backtrace and the values used and the bug gets fixed as fast
        as possible. Report bugs immediately, since someone may be using
        that function without knowing the error.



  <a name="172" id="172"></a>
  <h2>
      Turn on you debug

  </h2>




<p>
<p class="column8">
        If some function reports an error, immediately turn on debug
        and repeat your task

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (setq debug-on-error t)
      (setq debug-ignored-errors nil)  ;; Emacs 20.x    </pre></td>
    </tr>
</table>


<p class="column8">
        Now when error happened, you get <em class="word">Backtrace</em> buffer displayed.
        Send the content of the buffer and all variable values that
        are relevant to call. See 'e' command in backtrace to display
        values.



  <a name="173" id="173"></a>
  <h2>
      Local variable naming in the functions.

  </h2>




<p>
<p class="column8">
        following names are common inside functions' 'let' body. However,
        the coding started long time ago and there was no discipline in
        variable naming, so there are still functions which do not use
        the standard local variable naming.


<p class="column8">
        If you think about submitting general code, It would be welcomed
        if the functions used these variables. Of course it's up to you if
        you feel naming conventions are waste of time. Still, spend a moment
        thinking who might be reading your code.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      beg end     begin area, end area [points]
      bf, bfn     buffer file name
      bn          buffer name
      bp          buffer pointer  , sometimes &quot;beginning point&quot;
      buffer      buffer [pointer or name]
      cmd         usually a shell or process command string
      ep          end point -- see bp
      func        variable to store a function symbol
      fid         &quot;function id&quot;, name which is used in debug trace
      list        a list
      len         length of object [string, list, array]
      line        current line contents as string
      level       matching subexpression level
      mb me       match end/beginning point or Marker beg/end
      nbr         holding integer
      ob          original buffer [pointer or name]
      p           general point
      pb pe       point: beg, end
      ptr         a list pointer that will be moved.
      [-]re[-]    referring to regexp
      reg         register [integer ie. char]
      ret         return value of a function
      str         string
      verb        flag representing 'vebosity' usually (interactive-p)
      win         a window pointer    </pre></td>
    </tr>
</table>



  <a name="174" id="174"></a>
  <h2>
      Defining minor mode

  </h2>




<p>
<p class="column8">
        If you're eager to define minor mode in 1 minute, then here is
        one macro that does everything for you. After this you have all the
        minor mode variables ready and the mode works in both the Emacs
        and XEmacs including the menus.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (eval-and-compile   ;; So that defvars and defuns are seen
      (ti::macrof-minor-mode-wizard
       ;;
       ;; 1. prefix for variables and functions
       ;; 2. Modeline name
       ;; 3. prefix key for mode.
       ;; 4. Menu bar name
       ;; 5. &lt;forget this&gt;
       ;;
       &quot;xxx-&quot; &quot; xxxModeline&quot; &quot;\C-cx&quot; &quot;xxxMenubar&quot; nil

       &quot;XXX minor mode. Does fancy things.&quot;  ;; mode description
        Defined keys:
        \\{xxx-mode-map}
        &quot;

        &quot;XXX help&quot;    ;; message displayed when user calls mode
        nil           ;; Forms When minor mode is called

       ;; This is used by easy-menu.el and defines menu items.
       (list
        xxx-mode-easymenu-name
        [&quot;Eval whole buffer&quot; xxx-eval-current-buffer    t]
        ..)

       ;;  this block defines keys to the mode. The mode minor map is
       ;;  locally bound to 'map' symbol.
       (progn
         (define-key map &quot;-&quot; 'xxx-eval-current-buffer)
         (define-key map &quot;=&quot; 'xxx-calculate))))    </pre></td>
    </tr>
</table>



  <a name="175" id="175"></a>
  <h2>
      Defining minor mode step by step

  </h2>




<p>
<p class="column8">
        If you want to take more personal control over the minor mode
        creation, here I explain step by step what macros you need to include
        in your package to get minor mode created, This takes only
        half an hour and you have basic minor mode ready. Put all
        following calls near top of your file. We suppose we're
        creating XXX-mode.


<p class="column8">
        <strong class="word">[1]</strong> First, define standard variables for minor mode.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (ti::macrov-minor-mode &quot;xxxModeline&quot; &quot;\C-cx&quot; &quot;xxxMenubar&quot;)    </pre></td>
    </tr>
</table>


<p class="column8">
        After that user has  following varibles for customization. (for
        complete list of created variables, see the macro's description)

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      ;; Don't like default key combo C-c x
      (setq xxx-mode-prefix-key &quot;\C-cm&quot;)

      ;; The default mode string was too long, use shorter.
      (setq xxx-mode-name &quot;xxx&quot;)

      ;;  When mode runs, I want to do this.
      (add-hook 'xxx-mode-hook 'my-xxx-settings)

      ;;  I want to add additional keys
      (add-hook 'xxx-mode-define-keys-hook 'my-xxx-keys)    </pre></td>
    </tr>
</table>


<p class="column8">
        <strong class="word">[2]</strong> Next we need installation function, which installs our minor
        mode so that emacs is aware of it. The minor mode functions,
        xxx-mode, will call xxx-mode-define-keys-hook which takes care of
        defining keys to key maps and creating menus with easy-menu.el. The
        separate installation function is used, because it takes care of
        emacs specific things and if called with additional argument, it
        also knows how to remove the mode gracefully.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (ti::macrof-minor-mode-install
       xxx-install-mode
       xxx-mode
       xxx-mode-map
       xxx-mode-name
       xxx-mode-define-keys-hook)    </pre></td>
    </tr>
</table>


<p class="column8">
        <strong class="word">[3]</strong> Do we have additional files attached to the end of package?
        If yes, then we need pgp-tar unpack function too.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (ti::macrof-install-pgp-tar &quot;xxx-install-files&quot;  &quot;xxx.el&quot;)    </pre></td>
    </tr>
</table>


<p class="column8">
        <strong class="word">[4]</strong> Finally the user callable minor mode function is created.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (ti::macrof-minor-mode
       xxx-mode
       &quot;XXX minor mode. Does fancy things.&quot;
       Defined keys:
       \\{xxx-:mode-map}
       &quot;
       xxx-install-mode
       xxx-mode
       xxx-mode-name
       xxx-mode-prefix-key
       xxx-mode-easymenu
       nil                        ;Yes, print turn on/off message
       &quot;XXX help&quot;
       xxx-mode-hook)    </pre></td>
    </tr>
</table>


<p class="column8">
        That's it. when you execute all these statements you have basic core
        for emacs minor mode. The only things missing is the actual
        functions that the minor mode commands uses and the function that
        defines keys and menus for the minor mode. You probably want to
        start from the function that defines keys and menus. Here is ready
        macro for that too.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (add-hook' xxx-mode-define-keys-hook 'xxx-mode-define-keys)

      (ti::macrof-define-keys
       &quot;xxx-mode-define-keys&quot;
       'xxx-:mode-prefix-map
       'xxx-:mode-prefix-key

       'xxx-:easymenu
       'xxx-:easymenu-name
       &quot;Programming help menu.&quot;
       (list
        xxx-:easymenu-name
        [&quot;Eval whole buffer&quot; xxx-eval-current-buffer    t]
        ..)
       '(progn
          (define-key map &quot;-&quot; 'xxx-eval-current-buffer)
          (define-key map &quot;=&quot; 'xxx-calculate)
          ..))    </pre></td>
    </tr>
</table>

<hr>
               <a name="176"  id="176"></a>
               <h1>
               Tinyliba.el --- Library for (a)utoload definitions

               </h1>



  <a name="177" id="177"></a>
  <h2>
      Preface, 1998

  </h2>




<p>
<p class="column8">
        This is lisp function library, package itself does nothing.
        This library defines autoload functions and few emacs version
        detection functions.


<p class="column8">
        The autoloads are automatically generated and you should not
        fix them by hand. To add or update autoloads from a package,
        do it like this:

<ul>
	<li>Load library tinylisp.el
<li>Generate autoloads to separate buffer with
            command C-u M-x tinylisp-autoload-generate-library
	</li>
<li>At the end of buffer <em class="word">tinylisp-autoloads</em> cut'n paste
	            the definititions to this file.</li>
</ul>




<hr>
               <a name="178"  id="178"></a>
               <h1>
               Tinylibb.el --- Library of (b)ackward compatible functions.

               </h1>



  <a name="179" id="179"></a>
  <h2>
      Preface, 1998

  </h2>




<p>
<p class="column8">
        This is lisp function library, package itself does nothing.
        This library defines new [X]Emacs release functions for older
        [X]Emacs releases.



  <a name="180" id="180"></a>
  <h2>
      Code policy

  </h2>




<p>
<p class="column8">
        If there has been found a useful macro from someone's .el or from
        news, the proper source and name of author + time is preserved. All
        the credit goes to those profilic programmers.



  <a name="181" id="181"></a>
  <h2>
      Usage

  </h2>




<p>
<p class="column8">
        You must not autoload this package; but always include

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (require 'tinylibm)    </pre></td>
    </tr>
</table>


<p class="column8">
        Yes, there is no typo, you load &quot;m&quot; lib. It will handle arranging
        everything for you. This library is included by &quot;m&quot; library
        automatically. Repeat: you DO NOT PUT any of these in your
        packages:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (require 'tinylib)
      (require 'tinyliba)
      (require 'tinylibb)
      (require 'tinylibo)
      (require 'tinyliby)    </pre></td>
    </tr>
</table>


<p class="column8">
        A single statement will arrange everything:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (require 'tinylibm)    </pre></td>
    </tr>
</table>



  <a name="182" id="182"></a>
  <h2>
      Notes

  </h2>




<p>
<p class="column8">
        2000-09-12 <em><a href="mailto:ttn@revel.glug.org" >ttn@revel.glug.org</A></em> in gnu.emacs.sources
        <a href="http://www.glug.org/people/ttn/software/ttn-pers-elisp/" >http://www.glug.org/people/ttn/software/ttn-pers-elisp/</A> reported that:
        New file core/veneration.el allows GNU Emacs 19 support.
        We define some functions used by this library that are available
        in GNU Emacs 20, but not in GNU Emacs 19: <samp class="word">compose-mail</samp> and
        minimal supporting functions (see mail-n-news/compose-mail.el),
        <samp class="word">shell-command-to-string</samp>, and <samp class="word">char-before</samp>. We also redefine
        <samp class="word">match-data</samp> to handle arguments.


<p class="column8">
        1998-10 SEMI's poe*el libraries also emulate various Emacs
        versions. There should be only one emulation library for all
        package writers. It would be best if all backward compatibility
        functions were moved either to SEMI or to another common place.



<hr>
               <a name="183"  id="183"></a>
               <h1>
               Tinylibck.el --- Library to (c)onvert (k)eybindings for XEmacs or Emacs

               </h1>



  <a name="184" id="184"></a>
  <h2>
      Preface

  </h2>




<p>
<p class="column8">
        This file tries to overcome differencies between Emacs and XEmacs
        keybinding. I developed this at the time when I used 19.28 and
        I wanted to use my other packages with any emacs version in
        spite of key definition differencies. This file is in fact
        &quot;library&quot; and propably interests only lisp programmers that want
        to make some old package, that has Emacs specific bindings,
        to work in XEmacs (or vice versa).



  <a name="185" id="185"></a>
  <h2>
      Emacs 19.30+ note

  </h2>




<p>
<p class="column8">
        Newer Emacs release now supports XEmacs styled bindings.
        You can write

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (local-set-key [(control meta up)] 'ignore)    </pre></td>
    </tr>
</table>


<p class="column8">
        and it should work both in XEmacs and Emacs. If all your keybindins
        are like that and you don't use Emacs lower than 19.30, then you
        don't need this package. I recommend that you use primarily this
        style.



  <a name="186" id="186"></a>
  <h2>
      Putting your key definitions to separate file

  </h2>




<p>
<p class="column8">
        You should separate all you keybindings to <strong class="word">one</strong> file,
        do not stuff all your emacs definitions in one huge ~/.emacs,
        but instead use some basic structure like this:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      ~/.emacs            -- the main; points to ~/rc/emacs-rc.el
      ~/rc/emacs-rc.el    -- The main loader
      ~/rc/emacs-kbd.el   -- All the keybindinds
      ~/rc/emacs-x.el     -- X settings and X-packages loads
      ~/rc/emacs-vc.el    -- vc settings and modifications
      ~/rc/emacs-bup.el   -- Backup settings and redefinitions
      ~/rc/emacs-gnus.el  -- gnus customization
      ..    </pre></td>
    </tr>
</table>


<p class="column8">
        You can load your other initialize files from .emacs with <samp class="word">load</samp>
        command. Suppose you have Emacs keybinding startup file; which you
        want to make compatible with XEmacs too. The reason why you should
        use <samp class="word">ti::ck-maybe-activate</samp> is that, it can determine your emacs
        version and decide when the converter is needed and when not.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      ;; at the beginning of keybindings, you add these

      (require 'tinylibm)
      (autoload 'ti::ck-advice-control &quot;tinylibck&quot;)

      (ti::ck-maybe-activate 'xemacs-mouse)
      (load &quot;~/rc/emacs-rc-keys&quot;)     ;; All XEmacs styled bindings
      (ti::ck-maybe-activate 'xemacs-mouse 'disable)

      ;;  load rest of the startup files
      (load &quot;~/rc/emacs-rc)
      ...
      ;; End of startup file    </pre></td>
    </tr>
</table>



  <a name="187" id="187"></a>
  <h2>
      Some lowlevel explanation

  </h2>




<p>
<p class="column8">
        If you're in Emacs, you use X-event bindings like this

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (global-set-key [C-up] 'ignore)    </pre></td>
    </tr>
</table>


<p class="column8">
        Unfortunately, this does not work in XEmacs, but using the
        conversion function before the definition, it does.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (global-set-key (ti::ck-do [C-up]) 'ignore)    </pre></td>
    </tr>
</table>


<p class="column8">
        Now the current Emacs version gets the right keybinding,

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      for Emacs  it returns       --&gt; [C-up]
      for XEmacs it returns       --&gt; '(control up)    </pre></td>
    </tr>
</table>


<p class="column8">
        You can also use the XEmacs keybinding, since the conversion goes
        both ways. Having the following setting:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (global-set-key (ti::ck-do '(control up)) 'ignore)    </pre></td>
    </tr>
</table>


<p class="column8">
        it converts this to suitable form depending on the current Emacs
        in use.



  <a name="188" id="188"></a>
  <h2>
      About advices

  </h2>




<p>
<p class="column8">
        So that you don't have to go and add that 'ti::ck-do' call for every
        keybinding, I have provided advices that hook themself to
        appropriate keybinding functions.  The conversion is then done
        transparently and you don't have to change a thing in you
        keybinding settings.



  <a name="189" id="189"></a>
  <h2>
      About debugging

  </h2>




<p>
<p class="column8">
        If you suspect any weird behavior in your emacs while
        this package is loaded, you should check that the <samp class="word">ti::ck-:debug</samp>
        is turned on. (<samp class="word">M-x</samp> <samp class="word">ti::ck-debug-toggle</samp>)


<p class="column8">
        The buffer <samp class="word">ti::ck-:debug-buffer</samp> constantly records any conversion
        actions and you can find the problems quickly. Please send the
        supicious/false conversion lines to the maintainer of this package
        and if possible, tell how the conversion should go in your opinion.


<p class="column8">
        I'd recommend that you keep the debugging permanently on, because
        if problems arise afterwards and if the debug were off, there is
        no way to tell what went wrong in what command.


<p class="column8">
        Important; when you have problems, increase

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      ti::ck-:debug-buffer-size    </pre></td>
    </tr>
</table>


<p class="column8">
        immediately to some arbitrary big value so that you get all the
        conversions recorded.



  <a name="190" id="190"></a>
  <h2>
      Known limitations

  </h2>




<p>
<p class="column8">
        This package tries to do its best to make the conversion, but
        sometimes it is just impossible. For example the following
        case is beyond of this package. In Emacs you can define

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (define-key xxx-mode-map [?\C-`] 'some-function)
                               ^^^^^^^    </pre></td>
    </tr>
</table>


<p class="column8">
        But when your're in XEmacs and you try to do the same, it gives
        error although tinylibck is currently active. The reason is that lisp
        intepreter never actually passes key  &quot;?\C-`&quot; to <samp class="word">define-key</samp>
        but it actually evaluates the vector in place to an integer value
        and sends that to <samp class="word">define-key</samp> function . The call actually is
        seen in Emacs like this:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (define-key xxx-mode-map [4194400] 'some-function)
                               ^^^^^^^^^in my HP-UX 9.05    </pre></td>
    </tr>
</table>


<p class="column8">
        And in XEmacs it is evaluates to this:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (define-key xxx-mode-map [0] 'xxx-tab-backward)    </pre></td>
    </tr>
</table>


<p class="column8">
        The code &quot;0&quot; appears, because XEmacs doesn't know Emacs &quot;?\C-`&quot;.
        You should write <span class="word-ref">[(control ?\`)]</span> for XEmacs and it would work ok.
        Be aware of this limitation if you plan to use Emacs styled
        bindings. Alternatively, you can tell that you that some
        particular piece of code has been written by using XEmacs style.
        (Wouldn't you want to you use it all the time in Emacs...)

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      ;;   This is Emacs file.
      (require 'tinylibck)                   ;Keybind converter.
      (ti::ck-advice-control)             ;turn it on
      ;;
      ;;   But here I want to use xemacs style for a while
      (define-key tinytab-mode-map [(control ?\`)]  'tinytab-tab-backward)
      ;; And other similar keybindings ...
      (ti::ck-advice-control 'disable)    ;don't leave it on    </pre></td>
    </tr>
</table>



  <a name="191" id="191"></a>
  <h2>
      Thank you

  </h2>




<p>
<p class="column8">
        Vladimir Alexiev <em><a href="mailto:vladimir@cs.ualberta.ca" >vladimir@cs.ualberta.ca</A></em>
        Presented initial idea of the conversion process.
        Commented how the conversion should go in XEmacs.


<p class="column8">
        Stephen Eglen  <em><a href="mailto:stephene@cogs.susx.ac.uk" >stephene@cogs.susx.ac.uk</A></em>
        Stephen had the patience to send bug reports from XEmacs 19.12 and
        test new versions of tinylibck.el


<hr>
               <a name="192"  id="192"></a>
               <h1>
               Tinylibid.el --- Library for (Id)entifying buffer, regardless of mode

               </h1>



  <a name="193" id="193"></a>
  <h2>
      Preface, Feb 1995

  </h2>




<p>
<p class="column8">
        Seems quite uninteresting package to you? I bet it does, unless
        you're a lisp programmer who has infite time to twiddle his
        c++-mode-hook + 20 others hooks and have all the time develop nice
        little funcs to make living in emacs easier.


<p class="column8">
        While someone may think that all users stick to one mode e.g. when
        they are programming C++, that's not obvious. For example programmer
        may move between all kind of modes during programming and the
        trouble is, that while the buffer's logical content remains the same,
        the hooks know nothing about it. Hooks are just dummies that get
        called whenever you turn some mode on, try C++ mode over nroff code
        and you'll be surprised.


<p class="column8">
        Now let's see one session example:

<ol>
	<li>write list               ;lisp-mode + folding-mode
<li>hmm, write some comments ;tinyindent minor mode,  no folding
	</li>
<li>hmm, need center-command ;move to text-mode
	</li>
<li>code again               ;lisp-mode
	</li>
<li>adjust defconst var pos. ;turn on tiny tab minor mode
	<li>code again               ;lisp-mode</li>
</ol>





<p class="column8">
        Programmer may have bound all common modes into keys so that he can
        ;; can access various modes very fast; changing modes is no
        problem. What is the problem, is that when you turn off the
        CODE-mode, all information about comment-start etc. vanish.



  <a name="194" id="194"></a>
  <h2>
      Overview of features

  </h2>



<p>
<ul>
	<li>This is LIBRARY package and should be called from lisp.
<li>Try to identify buffer content by using various criteria.
	</li>
<li>Useful for checking what kind of file is in buffer and making
	            decisions based on that, like in hooks.</li>
</ul>





  <a name="195" id="195"></a>
  <h2>
      Imenu example

  </h2>




<p>
<p class="column8">
        If you're using <em class="word">imenu.el</em> to generate buffer jump points, it is
        very likely that the imenu command won't generate right jump points
        if you're in wrong mode. Let's use imenu example. Here is first
        try: The code sniffs around to see if we're on some mode and then
        configures imenu according to it.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (defun my-imenu-mouse (event)
        (interactive &quot;e&quot;)
        (my-imenu))

      (defun my-imenu (&amp;optional arg)
        &quot;Sets parameters to imenu.&quot;
        (let* (raise)
          (setq imenu-max-items 20
             imenu-sort-function nil)
          (cond
          ((memq major-mode
            '(lisp-mode emacs-lisp-mode lisp-interaction-mode))
            (setq imenu-create-index-function
                  'imenu-example--create-lisp-index
                  imenu-sort-function
                  'imenu--sort-by-name
                  raise t))
           ((memq major-mode '(c++-mode))
            (setq imenu-create-index-function
                  'imenu-example--create-c++-index
                  imenu-sort-function
                  'imenu--sort-by-name
                  raise t))
           ((memq major-mode '(c-mode))
            (setq imenu-create-index-function
                  'imenu-example--create-c-index
                  imenu-sort-function
                  'imenu--sort-by-name
                  raise t)))
          (if raise
              (imenu))))    </pre></td>
    </tr>
</table>


<p class="column8">
        Here is better and more robust way. It'll let you be in any
        mode while retaining right imenu.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (require 'imenu)

      ;;  Separate functions for keyboard and mouse.
      (defun my-imenu-mouse (event &amp;optional arg)
        (interactive &quot;e\nP&quot;)
        (my-imenu arg))

      (defun my-imenu (&amp;optional arg)
        &quot;Sets parameters to imenu. If called with arg, the output is
       unsorted.&quot;
        (interactive &quot;P&quot;)
        (let* ((sort-func (if arg nil 'imenu--sort-by-name))
               (table
                '((lisp-mode
                   imenu-example--create-lisp-index)
                  (emacs-lisp-mode
                   imenu-example--create-lisp-index)
                  (c++-mode
                   imenu-example--create-c++-index)
                  (c-mode
                   imenu-example--create-c-index)))
               ;;  So, in what mode were really?
               (mode (or (ti::id-info t) major-mode))
               (el (assoc mode table)))
          (if (null el)
              (message &quot;Sorry, no imenu for this buffer.&quot;)
            (setq imenu-max-items         20
                  imenu-sort-function             sort-func
                  imenu-create-index-function     (nth 1 el))
            (imenu))))    </pre></td>
    </tr>
</table>

<hr>
               <a name="196"  id="196"></a>
               <h1>
               Tinylibm.el --- Library of s(m)all macros or functions

               </h1>



  <a name="197" id="197"></a>
  <h2>
      Preface, 1995

  </h2>




<p>
<p class="column8">
        This is lisp function library, package itself does nothing.
        It contains small functions or macros.



  <a name="198" id="198"></a>
  <h2>
      Code policy

  </h2>




<p>
<p class="column8">
        If I have found some useful macro from someone's .el or from
        news, the proper source and name of author + time is preserved. All
        the credit goes to those programmers.



  <a name="199" id="199"></a>
  <h2>
      Usage

  </h2>




<p>
<p class="column8">
        You must not autoload this package; but always include

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (require 'tinylibm)    </pre></td>
    </tr>
</table>


<p class="column8">
        You don't need any other require commands: all my other library
        functions get defined as well by using autoload.  Repeat: you don't
        have to put these in your packages:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (require 'tinylib)   ;; leave this out
      (require 'tinyliby)  ;; not needed either.    </pre></td>
    </tr>
</table>

<hr>
               <a name="200"  id="200"></a>
               <h1>
               Tinylibo.el --- Library for handling (o)verlays

               </h1>



  <a name="201" id="201"></a>
  <h2>
      Preface 1995

  </h2>




<p>
<p class="column8">
        The functions were developed to ease the usage of highlighting,
        which really seemed &quot;inside&quot; stuff when I first wanted to use
        colored text in emacs.

<ul>
	<li>This is LIBRARY module, it does nothing on its own.
	<li>Offers functions for 19.xx overlay handling</li>
</ul>





  <a name="202" id="202"></a>
  <h2>
      Code policy

  </h2>




<p>
<p class="column8">
        All functions are written by <span class="word-ref">[jaalto]</span>, unless otherwise notified.
        If I have found interesting function from some other .el I have
        written a reference to that .el. If the code is directly taken
        'almost as is' all the credit belongs to the Author of the
        original code. Cheers for him, to write so recpectable code, that
        it can be used right from the box!


<p class="column8">
        If someone contributes good, general purpose function, all the
        credit belongs to him automatically. Persons name and date and so
        on is included.


<hr>
               <a name="203"  id="203"></a>
               <h1>
               Tinylibxe.el --- Library for Emacs and XEmacs emulation.

               </h1>



  <a name="204" id="204"></a>
  <h2>
      Preface 1996

  </h2>



<p>
<ul>
	<li>This is library, package itself does nothing.
	<li>Compatibility for both XEmacs and Emacs</li>
</ul>




<p class="column8">
        There are incompatibilities for XEmacs and Emacs, which
        prevented writing portable code. The bigger problematic things
        have been collected here, some of them have been implemented
        in lower level libraries like in tinylibb.el.



  <a name="205" id="205"></a>
  <h2>
      Overlay.el in XEmacs 19.15+

  </h2>




<p>
<p class="column8">
        Good news; XEmacs 19.15+ has new package that emulates
        Emacs overlay functions.



  <a name="206" id="206"></a>
  <h2>
      What you should know &ndash; keep this in mind

  </h2>




<p>
<p class="column8">
        This library's intention is to make it possible to use some package
        that is written only in Emacs or only in XEmacs in mind. Normally
        You couldn't use that package in another emacs, because there may
        be functions that are not implemented.


<p class="column8">
        When you load this library, it emulates those unknown functions
        as much as it can, so that that you can use the package for
        both emacs. However, it may not be possible to reproduce
        exactly the same behavior in the Emacs that was not the primary
        target for the package. The emulation may in worst case be
        only so, that you are able to load the package without errors,
        but the functionality of the package doesn't correspond
        to the original version.


<p class="column8">
        When you write your own packages, do not try to make use of the
        latest glory details of the Emacs. If you do, you can be
        sure that your package won't work anywhere else.


<hr>
               <a name="207"  id="207"></a>
               <h1>
               Tinylisp.el --- Emacs lisp programming help grab-bag

               </h1>



  <a name="208" id="208"></a>
  <h2>
      Preface, Feb 1997

  </h2>




<p>
<p class="column8">
        Private lisp help functions were scattered around files and
        in other private libraries. One day the author decided to write
        a minor mode to access all those tools that were written one by one
        and he I didn't want to continue stacking up <samp class="word">lisp-mode-hook</samp>
        for all the growing features. So, if you're programming in Emacs
        Lisp, this minor mode may slightly increase your productivity.



  <a name="209" id="209"></a>
  <h2>
      Overview of features

  </h2>




<p>
<p class="column8">
        Lisp coding help

<ul>
	<li>Create list of all variables from the buffer. (or occur menu)
            You can use this list to update your bug report function or just
            to get an overview of the variables. Check names and the order how
            you have used them (The order is important if you use defcustom)
<li>Create function list (or occur menu)
	</li>
<li>Create autoload list
	</li>
<li>Evaluate current definition under point (re-parse function,
            reset defvar or even defcustom variable)
	</li>
<li>Print variable's value under point, set variable's value
            under point (backs up the original value which you can restore)
	</li>
<li>Call function under point (to test it immediately)
	</li>
<li>Indent function/variable around point.
	</li>
<li>FINDS LISP CODE ERROR POINT.
	</li>
<li>In DEBUGGER <em class="word">Backtrace</em> hit 'R' to record the content of the value
            to <em class="word">tinylisp-record</em> This is great when you want to send bug report
            to maintainer and you can attach the state of the variables
	            with it.</li>
</ul>



<ul>
	<li>Code flow help: jump to variable of function definition even if
            it is located in different file. Does not use TAGS; but assumes
            that function is <samp class="word">known</samp> to Emacs.
<li>Two extra echo area modes: Show underlying properties/overlays or
	            Show characters' syntax information.</li>
</ul>




<p class="column8">
        Edebug support

<ul>
	<li>Sit on function name and call <samp class="word">tinylisp-edebug-instrument</samp> and
            the remote function will be instrumented. If you used just
            plain edebug, then you'd have to manually load the function into
            current point and hit <samp class="word">edebug-eval-defun</samp>, for each function.
            (Note that &quot;i&quot; auto-instrument doesn't always work from
            edebug)
<li>Easily uninstrument functions: at point, in buffer,
	            everything known</li>
</ul>




<p class="column8">
        Elp support &ndash; Lisp code profiling

<ul>
	<li>Access elp commands from echo menu
<li>Profile your package or buffer's functions easily.
            Sit somewhere in function and un/instrument it with one command.
	            Un/instrument all functions in the buffer with one command.</li>
</ul>




<p class="column8">
        Elint support &ndash; Lint your elisp code

<ul>
	<li>Code by Peter liljenberg, code location unknown.
<li>catches misspellings and undefined variables
	</li>
<li>function calls with the wrong number of arguments, and
	            some typos such as (let (a (car b)) ...)</li>
</ul>




<p class="column8">
        Checkdoc support &ndash;  Check doc strings for style requirements

<ul>
	<li><a href="ftp://ftp.ultranet.com/pub/zappo" >ftp://ftp.ultranet.com/pub/zappo</A>
<li>Easy interface to checkdoc commands.
	</li>
<li>A tool that makes sure your package follows the guidelines
	            presented in File: elisp, Node: Documentation Tips.</li>
</ul>




<p class="column8">
        Find-func.el support


<p class="column8">
	<ul>
	<li>Use this package as backup if symbol lookup fails.</li>
</ul>




<p class="column8">
        Remarks

<ul>
	<li>Please take a look new XEmacs package bench.el (19.15 and 20.2)
	            for bechmarking.</li>
</ul>





  <a name="210" id="210"></a>
  <h2>
      Tutorial, how do you check your package

  </h2>



<p>
<ul>
	<li>$ f  Take a look at your function names: are they well named,
            so that same categories begin with same words. Below it would be
            a mistake to have latter as xxx-ti::erase-buffer, because then
            you cant find all common function with <samp class="word">lisp-complete-symbol</samp>
            command on xxx-buffer-*. Code is not a spoken language but
            meant to be used by programmers (Compare function naming in
	            XEmacs and Emacs, where XEmacs does the the right thing)</li>
</ul>



<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
          xxx-buffer-handling
          xxx-buffer-clear

      Check also that your macros are defined first before functions.
      If possible, maintain this definition order in your file

          defvar, defconst, defcustom  (on top of file)
          defsubst
          defmacro
          defun    </pre></td>
    </tr>
</table>

<ul>
	<li>C-u $ v Check variable names as the function names above,
            but also see that you have defined right user variables which
            should be using <samp class="word">defcustom</samp>. The extra C-u argument will print
            this information.
<li>$ x  Check the lisp package layout: first line and footer must
            be in proper format and that Author etc. tags are in
            their places.
	</li>
<li>Check the documentation strings with Checkdoc.
            To get overview of errors, do: $ c -  and $ c RET
            which a) turned off query b) checked whole buffer for errors.
            When you have got a clear look, then start correcting mistakes
            and do $ c a (semiautomatic correction) $ c BACKSPACE to correct
	            full buffer.</li>
</ul>





  <a name="211" id="211"></a>
  <h2>
      Defcustom.el and evaluating an `defcustom' variable

  </h2>




<p>
<p class="column8">
        If you don't know what defcustom is, or if you don't use it, you
        can ignore this section. The defcustom variables are evaluated
        pretending like they were <samp class="word">defconst</samp>, but because this evaluation
        is a bit special, pay attention to following paragraph.


<p class="column8">
        If you got thrown to error during evaluation, pay attention now,
        CALL COMMAND $ Z or <samp class="word">M-x</samp> <samp class="word">tinylisp-emergency</samp> IMMEDIATELY. For full
        details, see function documentation strings in the source file for
        these:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (defadvice defconst
      (defun     tinylisp-eval-at-point    </pre></td>
    </tr>
</table>



  <a name="212" id="212"></a>
  <h2>
      Find lisp code error position

  </h2>




<p>
<p class="column8">
        The most useful functions in this package are the two error
        finding functions which try their best to put you on a line that
        generates the lisp error. You can use this feature to e.g. check
        your ~/.emacs startup files and find the spot where
        <samp class="word">eval-current-buffer</samp> fails.


<p class="column8">
        The best function, <samp class="word">tinylisp-error-find-1</samp>, was programmed by Mikael
        Djurfeldt <em><a href="mailto:mdj@sanscalc.nada.kth.se" >mdj@sanscalc.nada.kth.se</A></em> and is included here with his
        permission. Thanks Mikael, the funstion has saved from me a lot
        of debugging!



  <a name="213" id="213"></a>
  <h2>
      Following lisp code call chain

  </h2>




<p>
<p class="column8">
        The traditional way to follow lisp code is to use TAGS file (See
        'etags' or 'ctags' shell binary and C-h a &quot;tags&quot;) which reads bunch
        of *el files and builds up internal representation of all defined
        symbols and their locations.


<p class="column8">
        But using tags is not very flexible if you write the code yourself,
        because when you add new function or new variable, the TAGS file is
        immediately out of date. Hm. The TAGS is general tool for many
        programming languages, but in Emacs lisp, we can take advantage of
        the fact that Emacs already knows where the symbols are defined.
        The information is stored to <samp class="word">load-history</samp> whenever you run <samp class="word">load</samp>
        <samp class="word">require</samp> <samp class="word">load-file</samp> or <samp class="word">load-library</samp>.


<p class="column8">
        In this package, there are two functions that make use of
        <samp class="word">load-history</samp> and if the symbol is not in the history, they try to
        find definition from the current buffer. You see, if you do
        <samp class="word">eval-current-buffer</samp> the definition information is <strong class="word">not</strong> stored to
        <samp class="word">load-history</samp>. With these commands you can browse some packages
        without any extra TAGS file.


<p class="column10"><em class="quote10">
          <span class="word-ref">[The only assumption is that you have <samp class="word">loaded</samp> the file !!]</span></em>


<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      $ '     tinylisp-jump-to-definition (do not record call chain)
      $ +     tinylisp-jump-to-definition-chain (record call chain)
      $ \177  tinylisp-back-to-definition (probably your backspace key)
              This returns to previously saved call-chain point    </pre></td>
    </tr>
</table>


<p class="column8">
        The jump command also know following prefix arguments

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      M-0 $ ' tinylisp-jump-to-definition (empty call chain)
      C-u $ ' tinylisp-jump-to-definition (record call-chain)    </pre></td>
    </tr>
</table>



  <a name="214" id="214"></a>
  <h2>
      Examining text properties and overlays in buffer

  </h2>




<p>
<p class="column8">
        If you have ever played with text properties or overlays (called
        extents in XEmacs), you know how hard it is to examine buffer's
        characters and debug where the properties are.


<p class="column8">
        In this package there is &quot;constant char browsing mode&quot; where every
        time you move your cursor, the face info and/or overlay info is
        displayed in the echo-area. If you supply <samp class="word">3</samp> <samp class="word">C-u</samp> arguments, the
        information is also recored to the separate buffer. This is the
        most easiest way to examine some character properties in arbitrary
        buffer positions. See C-h f on following function:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      $ p     tinylisp-property-show-mode    </pre></td>
    </tr>
</table>



  <a name="215" id="215"></a>
  <h2>
      Examining charcter syntax

  </h2>




<p>
<p class="column8">
        Major modes define syntax tables for characters and sometimes you
        want to see the syntax class of a character under cursor. This mode
        behaves in the same manner as text property display, just turn it on
        and it will constantly show char info.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      $ y     tli-syntax-show-mode    </pre></td>
    </tr>
</table>



  <a name="216" id="216"></a>
  <h2>
      Snooping interesting variables

  </h2>




<p>
<p class="column8">
        Has is happened to you that you're debugging package and it
        installs many hooks and and sets many different variables and then
        you suddenly realize that it went all wrong? You may even have
        noticed that some ill behaving package keeps preventing file
        writing!


<p class="column8">
        No problem, you can define interesting variable sets to peek their
        contents, e.g. checking all file related hooks for problems.  And if
        you supply C-u prefix arg, your editing is updated to the
        variables. With any other non-nil arg, the contents of the
        variables are recorded (kinda before install &ndash; after install
        snooping) See function:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      $ s     tinylisp-snoop-variables    </pre></td>
    </tr>
</table>


<p class="column8">
        And additional prefix arguments: You can save variables states,
        modify them as you like, and go back to restores values.



  <a name="217" id="217"></a>
  <h2>
      Elp: notes

  </h2>




<p>
<p class="column10"><em class="quote10">
          <span class="word-ref">[excerpt from Barry's elp.el]</span>
          ...Elp can instrument byte-compiled functions just as easily as
          interpreted functions, but it cannot instrument macros.  However,
          when you redefine a function (e.g. with eval-defun), you'll need to
          re-instrument it with M-x <samp class="word">elp-instrument-function</samp>.  This will also
          reset profiling information for that function.  Elp can handle
          interactive functions (i.e. commands), but of course any time spent
          idling for user prompts will show up in the timing results.</em>



<p class="column8">
        To elp functions right, follow these steps. <strong class="word"><em class="word">important</em></strong> &quot;(defun&quot;
        must be left flushed in order the function to be found. If there is
        any leading spaces before the '(' or 'defun', then function won't
        be found and will not be (un)instrumented.

<ul>
	<li>$ e A Restore (a)ll elp'd functions
<li>$ -   Eval buffer containing functions (or eval single function)
	</li>
<li>$ e I  Instrument all functions in buffer (or single function)
	<li>$ e h     Run the harness test that calls the functions</li>
</ul>





  <a name="218" id="218"></a>
  <h2>
      Elp: Summary mode's sort capabilities

  </h2>




<p>
<p class="column8">
        When you call <samp class="word">$</samp> E' <samp class="word">s</samp> to show the elp result(s), the results
        buffer is put into <samp class="word">tinylisp-elp-summary-mode</samp> where you can sort
        the columns with simple keystrokes. The sort keys correspond to the
        column names.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      f)unction Name  c)all Count  e)lapsed Time  a)verage Time
      =============   ==========   ============   ============    </pre></td>
    </tr>
</table>



  <a name="219" id="219"></a>
  <h2>
      Elp: customizations

  </h2>




<p>
<p class="column8">
        You should be aware of this variable in elp; which resets the list
        every time you display it. You can toggle it's value from the echo
        menu.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      elp-reset-after-results    </pre></td>
    </tr>
</table>



  <a name="220" id="220"></a>
  <h2>
      Edebug support

  </h2>




<p>
<p class="column8">
        To instrument function for edebug, you'd normally have cursor inside
        current function and call <samp class="word">C-u</samp> <samp class="word">M-x</samp> <samp class="word">edebug-eval-defun</samp>. But
        suppose you only see function call like this:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (my-function arg arg arg)    </pre></td>
    </tr>
</table>


<p class="column8">
        then you'd have to a) find out where the function is defined
        b) load that file c) position cursor over the fuction definition
        d) call edebug to instrument it. That's too much of a work. Instead
        there are commands that do this for you. See edebug submap <samp class="word">C-e</samp>
        for edebug commands

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      $ C-e RET   Instrument function _named_ at point
      $ C-e DEL   Uninstrument function _named_ at point
      $ C-e SPC   Instrument all functions in buffer
      $ C-e x     Uninstrument all functions in buffer
      $ C-e X     Uninstrument all functions instrumented by $ C-e RET    </pre></td>
    </tr>
</table>



  <a name="221" id="221"></a>
  <h2>
      Todo section

  </h2>




<p>
<p class="column8">
        In standard Emacs there seems to be underused package trace.el.
        Add direct support for it.


<p class="column8">
        The regress.el provides support for writing and executing
        regression tests for Emacs Lisp code. Could that be supported too?


<p class="column8">
        Add support to xray.el



<hr>
               <a name="222"  id="222"></a>
               <h1>
               Tinyload.el --- Load set of packages when Emacs is idle (lazy load)

               </h1>



  <a name="223" id="223"></a>
  <h2>
      Preface, Jul 1997

  </h2>




<p>
<p class="column8">
        While it is possible to arrange Emacs <samp class="word">rc</samp> (start-up) files to use
        all possible and imaginable autoloads, there are still packages
        that can't be autoloaded due to their setup nature or other
        behavior: <samp class="word">require</samp> commands are necessary in <samp class="word">.emacs</samp> in order
        to use those modules. This means that for every <samp class="word">require</samp> command,
        the Emacs startup slows remarkably. Experienced Emacs users have
        very complex boot configurations, so waiting minutes for Emacs
        startup screen to appear is quite frustrating.


<p class="column8">
        The described situation gave birth to this package. Now the emacs
        is ready to use within few seconds.


<p class="column8">
        What this package does, is, that it caches the load requests and
        executes them when it thinks there is free time. Instead of setting
        up all at once on startup, the emacs configuration is built piece
        by piece, until the whole 100% configuration is there.


<p class="column8">
        The benefit is that Emacs starts instantly, and when it is
        idle, the remaining packages, that you wanted to be
        available in your daily Emacs session, are loaded.



  <a name="224" id="224"></a>
  <h2>
      Overview of features

  </h2>



<p>
<ul>
	<li>Delayed (Lazy) loading of packages (at some later time); after
            15 seconds of idle time, remaining files are loaded one by one.
<li>You no longer have to use <samp class="word">require</samp> in your .emacs, instead,
            you define <samp class="word">tinyload-:load-list</samp> where you put the requests.
	</li>
<li>Your .emacs starts faster when the extra <samp class="word">require</samp> and
	            <samp class="word">load</samp> commands be moved to load list.</li>
</ul>




<p class="column8">
        If you're a first time Emacs user or if you consider lisp
        difficult, have a look at simpler setup than what is described
        below from C-h v <samp class="word">tinyload-:load-file</samp>. The idea is that you
        tell the configuration file which lists packages that you
        want to load in format:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      PACKAGE CONFIG-WORD    </pre></td>
    </tr>
</table>


<p class="column8">
        The CONFIG-WORD should be self explanatory: it instructs in which
        OS and in which Emacs flavor the package is loaded. Here isa
        sample: reportmail is only loaded under win32 and XEmacs.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      paren
      autorevert win32
      gnus.el
      reportmail  win32-xemacs    </pre></td>
    </tr>
</table>


<p class="column8">
        Another easy interface is to use functions:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      `tinyload-load-list-add-function'
      `tinyload-load-list-add-package'
      `tinyload-load-list-delete-function'
      `tinyload-load-list-delete-package'    </pre></td>
    </tr>
</table>



  <a name="225" id="225"></a>
  <h2>
      First user notice

  </h2>




<p>
<p class="column8">
        When you use this package for the first time, you may feel
        uncomfortable with the amount of messages you see displayed on
        the echo area. And if you're in echo-area prompt (e.g. after <samp class="word">C-x</samp>
        <samp class="word">C-f</samp>) those messages may disturb the echo area prompt.


<p class="column8">
        Just don't panic. Move your cursor key to the left (C-a)
        or start typing and the load will be interrupted. As long as
        there is activity in your Emacs the load will not happen.


<p class="column8">
        The messages that are displayed in the echo area are important,
        because they get stored in <em class="word">Messages</em> buffers and you can take a
        look if anything strange happened. Like if some package couldn't be
        loaded at all. Pay attention to <em class="word">fatal</em> messages.



  <a name="226" id="226"></a>
  <h2>
      Messages in *Message* buffer

  </h2>




<p>
<p class="column8">
        There are different types of messages

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      TinyLoad: fdb ok      (10% 1/10)                         [1]
      TinyLoad: elp 'noerr! (20% 2/10)                         [2]
      TinyLoad: [ERROR] loading  ~/elisp/rc/emacs-rc-init.el   [3]    </pre></td>
    </tr>
</table>

<ul>
	<li>[1] Package was loaded and the display shows some remaining
            statistics.
<li>[2] You had defined 'noerr parameter and the
            recent load of the package failed: it didn't exist along
            <samp class="word">load-path</samp> or there was problem in the package itself.
	</li>
<li>[3] When file was loaded; some error was generated. You
            should study this file by hand and spot the problem manually.
	            Be sure that the syntax of the file is correct.</li>
</ul>




<p class="column8">
        In addition to these basic messages, there are some internal
        messages that do not concern regular user, only the maintainer.
        When he TinyLoad wakes up; you might see following message

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      Tinyload: timer expired; invoking load process..[busy;stop;N]
                                                       |    |    |
                                    user activity status    |    |
                                              Continue status    |
                                Busy count; and deadlock indicator    </pre></td>
    </tr>
</table>


<p class="column8">
        Which simply means that Emacs called the loader function and
        because <em class="word">Continue</em> <em class="word">status</em> was nil, user did nothing at the time
        of invocation. If the message <span class="word-ref">[busy;stop;N]</span> then user was doing
        something that weren't allowed to be interrupted. Usually this
        happens when cursor is in echo area e.g. after <samp class="word">C-x</samp> <samp class="word">C-f</samp>.
        If the cursor never leaves the echo area or if the busy situation
        continues for a certain period of time, the program automatically
        clears the busy signal and continues loading. You should not see
        infinite <span class="word-ref">[busy;stop.N]</span> messages. If you really see 100 such messages;
        then contact the author: there must be an unresolved deadlock and
        a bug in the program.


<p class="column8">
        When the <samp class="word">tinyload-:load-list</samp> has been handled, the loader process
        terminates itself. The following message tells that the process has
        ceased to exist. If you want to start reading the list again,
        call <samp class="word">M-x</samp> <samp class="word">tinyload-install</samp>.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      TinyLoad: Loader process terminated.    </pre></td>
    </tr>
</table>



  <a name="227" id="227"></a>
  <h2>
      Tutorial

  </h2>




<p>
<p class="column8">
        Let's supposes your emacs startup consists of following <samp class="word">rc</samp> files
        The name <samp class="word">rc</samp> comes from Unix resource files, like
        $HOME/.bashrc, $HOME/.cshrc ...

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      emacs-rc-main.el     -- the main load controller
      emacs-rc-path.el     -- settings `auto-mode-alist' etc.
      emacs-rc-bup.el      -- Backup settings
      emacs-rc-set.el      -- Emacs variable settings

      emacs-rc-keys.el     -- Keyboard customizations
      emacs-rc-font.el     -- Fonts and Font lock; face settings
      emacs-rc-hooks.el    -- All add-hook commands and mode settings.
      emacs-rc-ding.el     -- Gnus customizations (symlink to ~/.gnus)
      emacs-rc-pkg-std.el  -- Loading std Emacs packages and their setup
      emacs-rc-pkg-misc.el -- Non-std distrib, additional packages
      emacs-rc-tips.el     -- Tips (code samples) from the Usenet
      emacs-rc-mail.el     -- mail agent, Rmail, VM, message.el etc. setup    </pre></td>
    </tr>
</table>


<p class="column8">
        Now suppose your .emacs loads all these files like this

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      ;; $HOME/.emacs -- Emacs startup controller

      (require 'cl)   ;; Tell location of startup files
      (pushnew &quot;~/elisp/rc&quot; load-path :test 'string=)

      (require 'emacs-rc-path)
      (require 'emacs-rc-bup)
      (require 'emacs-rc-set)
      (load &quot;emacs-rc-keys.el&quot;)
      (require 'emacs-rc-font)
      (load &quot;emacs-rc-hooks&quot;)
      (load &quot;emacs-rc-ding&quot;)
      (load &quot;emacs-rc-pkg-std&quot;)
      (load &quot;emacs-rc-pkg-misc&quot;)
      (load &quot;emacs-rc-tips&quot;)
      (add-hook 'mail-mode-hook '(lambda () (require 'emacs-rc-mail)))

      ;; End of file $HOME/.emacs    </pre></td>
    </tr>
</table>


<p class="column8">
        The reason why there may be both <samp class="word">load</samp> and <samp class="word">require</samp> commands
        may be that you frequently make updates and changes to some of your
        start-up files. Like if you frequently update Setting for Gnus,
        and you want to reload your settings, the (load &quot;emacs-rc-ding&quot;)
        is executed again. If you used <samp class="word">require</samp> the new settings would not
        have been loaded. (See explanation of <samp class="word">load</samp> and <samp class="word">require</samp> from the
        Emacs info manual). So, to re-cap, if you would call:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      M-x load-file ~/.emacs    </pre></td>
    </tr>
</table>


<p class="column8">
        Only the <samp class="word">load</samp> commands' files would be loaded again. All the
        <samp class="word">require</samp> files would have been skipped, because the <samp class="word">rc</samp> resource
        features had already been defined.


<p class="column8">
        Now, loading all these files, either with <samp class="word">require</samp> or <samp class="word">load</samp>,
        takes too much time when you start Emacs. After some rearrangements
        you can put the delayed loading into use:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      ;; $HOME/.emacs -- Emacs startup controller

      (require 'cl)   ;; Tell location of startup files
      (pushnew &quot;~/elisp/rc&quot; load-path :test 'string=)

      ;; Have these minimum features immediately available

      (require 'emacs-rc-path)
      (require 'emacs-rc-bup)
      (require 'emacs-rc-set)
      (load &quot;emacs-rc-keys.el&quot;)

      ;;  Load this setup only when mail composing is started

      (add-hook 'mail-mode-hook '(lambda () (require 'emacs-rc-mail)))

      ;;  ........................................... lazy loading ....
      ;;  We can afford to load these later

      (setq tinyload-:load-list
        '((&quot;emacs-rc-font&quot;)
          (&quot;emacs-rc-hooks&quot;)
          (&quot;emacs-rc-ding&quot;)
          (&quot;emacs-rc-pkg-std&quot;)
          (&quot;emacs-rc-pkg-misc&quot;)
          (&quot;emacs-rc-tips&quot;)
          (&quot;emacs-rc-mail&quot;)))

      (require 'tinyload)
      ;; End of file $HOME/.emacs    </pre></td>
    </tr>
</table>


<p class="column8">
        When Emacs load this startup, only the most important files are
        loaded saving the start time considerably. After <samp class="word">tinyload</samp> finds
        that your Emacs is idle it starts loading all the rest of the
        packages you defined in the <samp class="word">tinyload-:load-list</samp>. For more complex
        setup, refer to end of tinyload.el source file, where you can
        find a complete example setup.


<p class="column10"><em class="quote10">
          NOTE: Please pay attention to one detail above. The <samp class="word">emacs-rc-mail</samp>
          will be loaded from load list <strong class="word">and</strong> it will be loaded when
          you call M-x <samp class="word">mail</samp>. Do you believe there is redundancy? The
          idea is that you may call M-x <samp class="word">mail</samp> way before the TinyLoad
          reaches that file in its load list and the hook guarantees that
          you get the setup at mail invoke time.</em>



<p class="column10"><em class="quote10">
          But it may be the other way round: TinyLoad has already loaded
          the mail setup for you and thus invoking M-x <samp class="word">mail</samp> is fast,
          because there is nothing to load any more.</em>



<p class="column10"><em class="quote10">
          Similar things you should do to GNUS, VM, RMAIL and others that
          you call and whose setup you want to have immediately available</em>




  <a name="228" id="228"></a>
  <h2>
      Delayed loading, require and autoload

  </h2>




<p>
<p class="column8">
        Above you saw how to load your Emacs <samp class="word">rc</samp> files. But the delayed
        loading is not only suitable for those. It also helps you to load
        files, that can't be autoloaded.


<p class="column10"><em class="quote10">
          If you can arrange loading a packages with <samp class="word">autoload</samp> command,
          do that. Never put <samp class="word">require</samp> or direct <samp class="word">load</samp> command into your
          Emacs <samp class="word">rc</samp> file, because load commands eat start time.</em>



<p class="column8">
        Packages usually explain in the <em class="word">installation</em> section two ways
        how to load them: here is an example from tinytab.el

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (require 'tinytab)

      or use this; your .emacs is read quicker

      (autoload 'tinytab-mode              &quot;tinytab&quot; &quot;&quot; t)
      (autoload 'tinytab-return-key-toggle &quot;tinytab&quot; &quot;&quot; t)    </pre></td>
    </tr>
</table>


<p class="column8">
        The first way forces loading the whole file (takes time); and
        the latter only tells that the package's functions
        <samp class="word">tinytab-return-key-toggle</samp> and <samp class="word">tinytab-mode</samp> exists. If you
        happen to call those functions, <strong class="word">only</strong> then the package gets
        loaded. The big difference here is that when you put the
        latter in your Emacs rc file, Emacs reads <samp class="word">autoload</samp> statements much
        faster than the <samp class="word">require</samp> command.


<p class="column8">
        It is not always possible arrange to load package with autoloads,
        because the package may behave so that in order to get the features
        installed, package must do the setup by itself: you can't do it
        yourself. Here are few packages that can't be autoloaded:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      crypt++     -- crypt(1) support.
      tinymy      -- collection of utilities
      fdb         -- Emacs Debug error filter
      fa-extras   -- Filling extras    </pre></td>
    </tr>
</table>


<p class="column8">
        When you would normally include a <samp class="word">require</samp> command for these
        into your Emacs <samp class="word">rc</samp> file, you can now move the packages to load
        list and keep only autoloads in the <samp class="word">rc</samp> files.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      ;; Old rc file

      (autoload ....
      (autoload ....
      (require 'fa-extras)
      (autoload ....

      ;; New rc file

      (autoload ....
      (autoload ....
      (autoload ....    </pre></td>
    </tr>
</table>


<p class="column8">
        And the missing <samp class="word">require</samp> entry has been moved to
        <samp class="word">tinyload-:load-list</samp>.



  <a name="229" id="229"></a>
  <h2>
      Use separate rc file for load definitions

  </h2>




<p>
<p class="column8">
        It may be good idea to make a separate <samp class="word">rc</samp> file that only has
        the load list definition and a call to tinyload.el, like this:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      ;; emacs-rc-tinyload.el -- load definitions for tinyload.el
      ;;
      ;; If you compile this file, `defconst' shuts up Byte Compiler

      (defconst tinyload-:load-list
        '(...
          ...))
      (require 'tinyload)
      (provide 'emacs-rc-tinyload)
      ;; End of file    </pre></td>
    </tr>
</table>


<p class="column8">
        And then you add following call to your <em class="word">$HOME/.emacs</em>, to the end
        of the file, although the place really doesn't matter.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (require 'emacs-rc-tinyload)    </pre></td>
    </tr>
</table>



  <a name="230" id="230"></a>
  <h2>
      Used timer process

  </h2>




<p>
<p class="column8">
        A normal timer process is used to load the packages from the load
        list. The timer awakens at regular intervals and loads one package at
        a time: more packages are not loaded if there was input pending at
        the time of previous load. The load messages are recorded to
        <em class="word">Messages</em> buffer. In old Emacs releases this buffer does not
        exist; but it will be created for you.



  <a name="231" id="231"></a>
  <h2>
      About implementation

  </h2>




<p>
<p class="column8">
        When <samp class="word">tinyload-:load-list</samp> is set, the value of the variable is
        saved under property <samp class="word">original</samp>. When the idle timer runs, the list
        is read from the beginning and each package at a time is loaded.
        The last unloaded package position is saved under property 'pos.


<p class="column8">
        The situation looks like this:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      tinyload-:load-list 'original   --&gt; (list) original contents
      tinyload-:load-list 'pos        --&gt; (nth nbr) next package to load.    </pre></td>
    </tr>
</table>


<p class="column8">
        If your do something in your emacs while the list is being looped,
        or when the loader function is about to be called, that interrupts
        the work. Next time the timer functions run runs, happens:

<ul>
	<li>It checks if the current list matches <samp class="word">original</samp>. Yes, means that
            the list hasn't been modified. No, means that it should examine
            the list all aver again, starting from the beginning.
<li>If the list was original, it picks the <samp class="word">pos</samp> point and
            loads all the remaining packages, one at a time until it
            sees activity.
	</li>
<li>If there is nothing to load, the <samp class="word">pos</samp> points to the end
            of list. Function returns immediately and does nothing.
            At this point the loader process terminates itself by
	            clearing the idle timer list.</li>
</ul>





  <a name="232" id="232"></a>
  <h2>
      Force loading

  </h2>




<p>
<p class="column8">
        There is also property <samp class="word">fatal-list</samp> which contains entries that
        couldn't be loaded. The list is updated while the loading takes
        place. If you examine the failed files and make corrections;
        you can try to reload the whole load list again if you call

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      C-u M-x tinyload-loader-process    </pre></td>
    </tr>
</table>



  <a name="233" id="233"></a>
  <h2>
      Special features

  </h2>




<p>
<p class="column8">
        In case you want to load all packages and leave nothing in
        autoload state, add this code to your Emacs startup file. When the
        loader process exits, it will check all Emacs functions for autoload
        definitions and load those packages as well.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (add-hook 'tinyload-:process-uninstall-hook
                'tinyload-autoload-function-load)    </pre></td>
    </tr>
</table>



  <a name="234" id="234"></a>
  <h2>
      Restart and cancel

  </h2>




<p>
<p class="column8">
        If you want to restart the evaluation of load list, call <samp class="word">M-x</samp>
        <samp class="word">tinyload-install</samp>, which will install the package again by removing
        old processes and resetting counters. To stop the loaded process
        permanently, call <samp class="word">tinyload-cancel</samp>.




  <a name="235" id="235"></a>
  <h2>
      Bugs

  </h2>




<p>
<p class="column8">
        Every effort has been made to check that Emacs has no activity
        before the package is loaded at the background. A series of
        <samp class="word">sit-for</samp> <samp class="word">input-pending-p</samp> and more obscure mini-buffer
        checks have been run before the load kicks in. If the package
        is still loaded while you were doing something, please send
        suggestion how the event could be detected so that the load
        wouldn't interrupt you again. However, there is no single and
        sure solution to notice user activity reliably.


<p class="column8">
        Despite of the efforts, an unlucky moment may load the
        package, when it was not appropriate.  Please hang on and wait
        for the load to finish, you're will regain control after if if
        you had pressed any key.


<hr>
               <a name="236"  id="236"></a>
               <h1>
               Tinymacro.el --- Fast way to assign newly created macro to a key

               </h1>



  <a name="237" id="237"></a>
  <h2>
      Preface, 1995

  </h2>




<p>
<p class="column8">
        This started as a very little project when
        <em><a href="mailto:mosh@ramanujan.cs.albany.edu" >mosh@ramanujan.cs.albany.edu</A></em> (Mohsin-Ahmed) 1995-03-17 in
        gnu.emacs.help post asked for easy way to assign newly created
        macro to some key. In reponse the author sent a simple function to do
        it, but he informaed that one macro, which was recycled every time,
        was too little. Author started modifying code more, and that was
        the birth of this package.



  <a name="238" id="238"></a>
  <h2>
      Description

  </h2>



<p>
<ul>
	<li>Two keystrokes to make a macro: one to record, one to
            assign it to key.
<li>To see the macro assignments to keys, just call <samp class="word">tinymacro-macro-info</samp>
	<li>Default macro count is 10, increase with <samp class="word">tinymacro-:stack-max</samp></li>
</ul>




<hr>
               <a name="239"  id="239"></a>
               <h1>
               Tinymailbox.el --- Berkeley style aka std. mailbox browsing minor mode

               </h1>



  <a name="240" id="240"></a>
  <h2>
      Preface, sep 1997

  </h2>




<p>
<p class="column8">
        It is possible to use Procmail <a href="http://www.procmail.org/" >http://www.procmail.org/</A> to manage
        growing incoming mail. But sometimes your recipes go wrong and
        mail ends up folders that you dind't intend to.
        People usually direct UBE, UCE and Spam mail to different folders, but
        sometimes procmail filter just guesses wrong and it sends perfetly
        valid mail into one of these reject folders. It is good to check
        the Spam mailboxes manually for valid mail and then extract it out
        of them. Not very nice job to do. At the the time Gnus was not
        available for managing multiple forlders so I decided to pull out
        some old code and make it a package.



  <a name="241" id="241"></a>
  <h2>
      Overview of features

  </h2>



<p>
<ul>
	<li>Browse standard unix mailbox .mbox .mbx .spool
<li>Kill, copy messages from mailbox. Copy message bodies.
	</li>
<li>Highlighting and defcustom supported.
	</li>
<li>Hide or show headers during mailbox browsing.
	</li>
<li>Simple summaries can be done with <samp class="word">occur</samp> command. Eg. to browse
	            messages based on <samp class="word">From</samp> or <samp class="word">Subject</samp> Headers.</li>
</ul>





  <a name="242" id="242"></a>
  <h2>
      Showing and hiding headers

  </h2>




<p>
<p class="column8">
        When you browse a mail folder, it has lot of attached headers,
        which don't interest you at all when you want to look at the
        messages itself. for example, here is one typical header from
        a test message

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      From nobody Sun Sep 28 20:57:48 1997
      To: nobody
      Subject: Re: bandwidth (was: [RePol] check this issue)
      References: &lt;em&gt;<a href="mailto:tbd8lwmfid.fsf@totally-fudged-out-message-id" >tbd8lwmfid.fsf@totally-fudged-out-message-id</a>&lt;/em&gt;
      From: Foo bar &lt;em&gt;<a href="mailto:judgeDredd@marylyn.com" >judgeDredd@marylyn.com</a>&lt;/em&gt;
      Date: 28 Sep 1997 20:57:47 +0300
      In-Reply-To: Jeff's message of &quot;Tue, 23 Sep 1997 01:35:26 -0400&quot;
      Message-ID: &lt;em&gt;<a href="mailto:tbiuvlmick.fsf@marylyn.com" >tbiuvlmick.fsf@marylyn.com</a>&lt;/em&gt;
      X-Mailer: Quassia Gnus v0.11/Emacs 19.34
      Lines: 3
      Xref: marylyn.com junk-test:4
      X-Gnus-Article-Number: 4   Sun Sep 28 20:57:48 1997    </pre></td>
    </tr>
</table>


<p class="column8">
        When you go from this message with <samp class="word">tinymailbox-forward</samp>, the headers
        that you're interested in are only shown according to
        <samp class="word">tinymailbox-:header-show-regexp</samp>. The messages headers are collapsed
        as you move around the messages. This approach was chosen, so that
        parsing a big message file (Gnus nnfolder backend) wouldn't put you
        on hold while the headers were collapsed. Now the headers are
        handled while you browse forward and backward. The above headers
        lookes like this after
        processing it:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      To: nobody
      Subject: Re: bandwidth (was: [RePol] check this issue)
      From: Foo bar &lt;em&gt;<a href="mailto:judgeDredd@marylyn.com" >judgeDredd@marylyn.com</a>&lt;/em&gt;
      Date: 28 Sep 1997 20:57:47 +0300
      X-Mailer: Quassia Gnus v0.11/Emacs 19.34
      X-Gnus-Article-Number: 4   Sun Sep 28 20:57:48 1997    </pre></td>
    </tr>
</table>


<p class="column8">
        By default all the <samp class="word">X-</samp> headers are shown, so you may want to make
        the <samp class="word">tinymailbox-:header-show-regexp</samp> a bit more restrictive if your
        messages have too much X-headers. You can toggle this message
        hiding feature with

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      C-q     or tinymailbox-header-hide-mode    </pre></td>
    </tr>
</table>



  <a name="243" id="243"></a>
  <h2>
      Copying or deleting messages

  </h2>




<p>
<p class="column8">
        When you browse the mailbox, you can perform copy or delete on
        the current message with following commands.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      ' RET   tinymailbox-copy
      ' SPC   tinymailbox-copy-body
      ' d     tinymailbox-delete    </pre></td>
    </tr>
</table>



  <a name="244" id="244"></a>
  <h2>
      Moving between the messages

  </h2>




<p>
<p class="column8">
        There are couple of movement commands that let you jump from
        one message to another. See also variable <samp class="word">tinymailbox-:move-header-regexp</samp>

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      C-p     tinymailbox-forward-body  or Ctrl-home
      C-n     tinymailbox-backward-body or Ctrl-end
      home    tinymailbox-forward (see tinymailbox-:move-header-regexp)
      end     tinymailbox-backward    </pre></td>
    </tr>
</table>

<hr>
               <a name="245"  id="245"></a>
               <h1>
               Tinymy.el --- Collection of simple solutions.

               </h1>



  <a name="246" id="246"></a>
  <h2>
      Preface, Nov 1995

  </h2>




<p>
<p class="column8">
        Emacs startup files started to look quite interesting:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      emacs-rc-tips     emacrs-rc-el      emacrs-rc-el      emacrs-rc-el.sun
      emacs-rc-18       emacs-rc-19       emacs-rc-abb      emacs-rc-compile
      emacs-rc-debug    emacs-rc-default  emacs-rc-font     emacs-rc-ding
      emacs-rc-font.b   emacs-rc-gnus     emacs-rc-hooks
      emacs-rc-init     emacs-rc-init2    emacs-rc-mail
      emacs-rc-o        emacs-rc-o-19     emacs-rc-out
      emacs-rc-path     emacs-rc-pc       emacs-rc-prog     emacs-rc-set
      emacs-rc-test     emacs-rc-time     emacs-rc-tips     emacs-rc-vc
      emacs-rc-w3       emacs-rc-x-menu   emacs-rc-xe
      emacs-rc-dired
      ..    </pre></td>
    </tr>
</table>


<p class="column8">
        Private functions seemed to grow all the time, most of which were
        turned into packages, but sometimes it was just function or two
        that made a life with Emacs easier.  What you see here is a
        selection of so called general <em class="word">my</em> functions. The term <em class="word">my</em> does
        not refer to <em class="word">mine</em>, but has a background in function
        naming. Remember? All user functions are recommended to be named
        so, that the first word is <samp class="word">my-</samp>, like <samp class="word">my-FUNC-NAME-HERE</samp>



  <a name="247" id="247"></a>
  <h2>
      Overview of features

  </h2>




<p>
<p class="column8">
        Timer processes

<ul>
	<li>RMAIL/other buffers saved in regular intervals.
<li>Revert buffer in background and ask confirmation, if file
            has changed on disk. By <em><a href="mailto:duthen@cegelec-red.fr" >duthen@cegelec-red.fr</A></em>
            (Jacques Prestataire) This feature is automatically disabled
            if autorevert.el is present and running.
	</li>
<li>Mail lock watchdog. If you have this lock in your file system,
	            you cannot receive mail.</li>
</ul>




<p class="column8">
        Buffer

<ul>
	<li>Cursor changes shape according to <samp class="word">overwrite-mode</samp>
<li>Rename any buffer with one key <samp class="word">C-z</samp> <samp class="word">n</samp> to be able to launch
            e.g. new <em class="word">shell</em> or <em class="word">mail</em> buffer.
	</li>
<li>Scroll command goes to window end/beginning and does not scroll
            immediately. See variable <samp class="word">tinymy-:scroll-mode</samp> for more.
	</li>
<li>Trim trailing whites paces from the buffer when file
            is saved.
	</li>
<li>Stamp file when buffer is saved by looking into RCS-like tags
            &quot;Docid:&quot;, &quot;Contactid:&quot; and LCD package entry fields.
	</li>
<li>Gzip or unzip current file buffer.
	<li>Add up numbers in rectangle area</li>
</ul>




<p class="column8">
        Compile

<ul>
	<li>Guess compile command by looking at the buffer content
            Configure variable <samp class="word">tinymy-:compile-table</samp> and
            <samp class="word">tinymy-:compile-command-c-code</samp>. The compile command you
            chose is buffer local and lasts until you change it.
            This is different than hitting M-x compile, because compile
	            Does not &quot;remember&quot; each buffer's correct compile command.</li>
</ul>




<p class="column8">
        Files

<ul>
	<li>Toggle write/read-only file permissions on disk with
            C-x q or <samp class="word">M-x</samp> <samp class="word">tinymy-buffer-file-chmod</samp>
<li>If file saved had #!, it is automatically made chmod u+x.
	            Idea and code by Jesper Pedersen <em><a href="mailto:blackie@imada.ou.dk" >blackie@imada.ou.dk</A></em></li>
</ul>




<p class="column8">
        Gnus, mail

<ul>
	<li>Save lisp package in buffer like <em class="word">mail</em> to file: find
            package regions.
<li>Copy current buffer's contents to new mail buffer and
            set subject line. You can send diff buffers and file buffers
	            conveniently this way: <samp class="word">C-z</samp> <samp class="word">m</samp> (Zend buffer as Mail)</li>
</ul>




<p class="column8">
        Keys

<ul>
	<li>Jumps to matching paren {([&quot;. <strong class="word">Bound</strong> to key &quot;%&quot;.
<li>Better word movement: LikeThisInC++Mode.
            Moving forward/backward always keeps cursor at the
            beginning of word. See also <samp class="word">c-forward-into-nomenclature</samp>
            <strong class="word">Bound</strong> to keys <samp class="word">C-left</samp>, <samp class="word">C-right</samp> in X and <samp class="word">Esc-b</samp>, <samp class="word">Esc-f</samp>
            in non-windowed Emacs.
	</li>
<li>PgUp and PgDown behave differently; they jump to
            window's beg/end first and only next key hit scrolls.
            <strong class="word">Bound</strong> to keys <samp class="word">prior</samp> and <samp class="word">next</samp>. Check if your keyboard
	            produces another pgUp and PgDown events.</li>
</ul>




<p class="column8">
        Line formatting

<ul>
	<li>Fixing all backslash(\) lines in current paragraph to the
            same column as the starting line. Very useful in makefile mode,
            shell mode or when writing C/C++ macros. It even inserts missing
	            backslashes.</li>
</ul>




<p class="column8">
        Mouse

<ul>
	<li>Point window and it gets cursor focus: The frame is
            raised and window selected. No need to click window any more.
<li>Show File information in echo-area: Point mouse near
            the end of window and Displayed info contains
            BUFFER MODES SIZE PATH. You do not consume your mode line
            or frame title any more for buffer specific information.
	            Example output:</li>
</ul>



<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
          TinyMy: -rw-r--r-- 108k /users/jaalto/elisp/tinymy.el    </pre></td>
    </tr>
</table>


<p class="column8">
        Shell

<ul>
	<li>Easy shar/tar/UU commands. configure variables
	            <samp class="word">tinymy-:shar-command</samp> and <samp class="word">tinymy-:tar-command</samp></li>
</ul>




<p class="column8">
        vc

<ul>
	<li>Key C-x C-q now won't call vc blindly. To prevent mistakes,
            a confirmation will be asked. You can also just toggle the
	            buffer's read-only flag, without engaging vc.</li>
</ul>




<p class="column8">
        Window


<p class="column8">
	<ul>
	<li>Flip the order of two windows</li>
</ul>





  <a name="248" id="248"></a>
  <h2>
      Minor modes in this package

  </h2>




<p>
<p class="column7"><em><strong>
       Sort minor mode</strong></em>



<p class="column8">
        If you have data in columns, use <samp class="word">C-cmS</samp> or <samp class="word">M-x</samp> <samp class="word">tinymy-sort-mode</samp>
        to toggle sort mode on and off. With it you can sort columns 1-9
        easily. Mode line indicator is &quot;S&quot;


<p class="column7"><em><strong>
       Display minor mode</strong></em>



<p class="column8">
        Hot key <samp class="word">C-cmD</samp> or <samp class="word">M-x</samp> <samp class="word">tinymy-display-mode</samp>. If you have DOS file and
        you load it into Emacs, you usually see the ^M characters. With the
        display mode active, it hides them from the screen, but they are
        still in the buffer. This display mode will hide other non-ascii
        characters too. See the source if you want to find out the full
        repertoire.


<p class="column8">
        This display mode is <strong class="word">automatically</strong> turned on when you load an
        dos-like file that has ^M character at the end of line.
        Mode line indicator is &quot;D&quot;.


<p class="column8">
        Another display made selection also let's you view MS Word binary
        files in some extent.



  <a name="249" id="249"></a>
  <h2>
      Features immediately activated when package loads

  </h2>



<p>
<ul>
	<li>You own Emacs lisp package LCD stamp is updated every time
            you save the package. Configure <samp class="word">tinymy-:stamp-lcd-regexp</samp>
            to detect your packages.
<li>Your most valuable buffers are periodically saved.
            Configure variable <samp class="word">tinymy-:save-buffer-modes</samp> and
            <samp class="word">tinymy-:save-buffer-regexp</samp>
	</li>
<li>You mailbox lock is kept on eye on, if the lock remains,
            you won't be able to receive mail. (safety measure).
	</li>
<li>If you use procmail you want to configure
            <samp class="word">tinymy-:mail-check-inbox-file-permissions</samp>
            otherwise, your mailbox's mode permissions are kept eye on:
            &quot;Permission error: -rw-------&quot; warning will be show if the
            mailbox doesn't have right modes.
	</li>
<li>Automatic window selection when you point it with mouse cursor.
            See <samp class="word">tinymy-:install-select-window-auto</samp>.
	</li>
<li>When buffer that has <samp class="word">#!</samp> to indicate shell
	            script, is save, the +x flag is set on for the file.</li>
</ul>





  <a name="250" id="250"></a>
  <h2>
      What commands are defined when you load this file?

  </h2>




<p>
<p class="column8">
        It's better to look at the code of this file, than to explain all the
        key definitions here, because I may not remember update this
        text section every time I add new interactive commands to the file.


<p class="column8">
        All the new interactive commands can be found from these two
        functions:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      tinymy-define-keys
      tinymy-mail-common-keys    </pre></td>
    </tr>
</table>


<p class="column8">
        See their description, or alternatively hit

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      C-h m                                ;; to view all bindings
      M-x delete-non-matching-lines tinymy ;; show bound keys    </pre></td>
    </tr>
</table>



  <a name="251" id="251"></a>
  <h2>
      Key bindings

  </h2>




<p>
<p class="column8">
        When you load this package, you can also install global key-bindings that
        if you set the load hook:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (setq tinymy-:load-hook
          '(tinymy-install
            tinymy-define-keys
            tinymy-define-key-extra
            tinymy-alias)    </pre></td>
    </tr>
</table>


<p class="column8">
        If you want to use your own bindings, use it like this:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (setq tinymy-:load-hook '(tinymy-install my-tinymy-keys tinymy-alias)
                                               ^^^^^^^^^^^^^^
      (defun my-tinymy-keys ()    </pre></td>
    </tr>
</table>


<p class="column8">
        There is table of global bindings which you can modify if the
        bindings clash: the auto install will warn you about this
        automatically and your own bindings are not replaced by default.
        See variable: <samp class="word">tinymy-:define-key-table</samp>


<hr>
               <a name="252"  id="252"></a>
               <h1>
               Tinynbr.el --- Number conversion minor mode oct/bin/hex

               </h1>



  <a name="253" id="253"></a>
  <h2>
      Preface, aug 1997

  </h2>




<p>
<p class="column8">
        One day in a laboratory the developer once forgot his desk
        calculator in another building. He was examining binary (hex)
        files and other electronic documents that used hex and base10
        numbers. He shroudly remembered that Unix included some basic
        calculator, but he dind't remember what was the name and how
        to use it. Whoops. Grin.


<p class="column8">
        Instead of returning to get the missing calculator, he started
        pouring some lisp to make a simple minor mode to help
        to get along with the current task at hand. It didn't take
        long to make it, and the laboratory day was success.
        Ahem. Maybe should look at package calc.el someday.



  <a name="254" id="254"></a>
  <h2>
      Overview of features

  </h2>



<p>
<ul>
	<li>Int         --&gt; hex,oct,bin conversion at current point
	<li>hex,oct,bin --&gt; int         conversion at current point</li>
</ul>




<hr>
               <a name="255"  id="255"></a>
               <h1>
               Tinypad.el --- Emulate Windows notepad with extra menu

               </h1>



  <a name="256" id="256"></a>
  <h2>
      Preface, aug 1997

  </h2>




<p>
<p class="column8">
        In gnu newsgroup there was a request that a class had been used to
        using Windows notepad and in order to make the transition to Emacs
        smooth, Emacs should have some notepad emulation mode so that
        pupils wouldnn't get lost completely in new envinronment. And here
        is it, a small notepad emulation. It installs one new menu to Emacs
        menu bar which is arranged exactly like the Windows notepad. I have
        included only the commands that are directly available from inside
        emacs and e.g. 'printer setup' is something that is not found there.
        But in order to be complete emulation, all the choices as in normal
        notepad are available.



  <a name="257" id="257"></a>
  <h2>
      Overview of features

  </h2>



<p>
<ul>
	<li>Minor mode, but once turned on, occupies every emacs buffer
            until turned off.
<li>Adds menu 'TinyPad' which contains identical
            menu definitions that are found from Winbdows notepad
	</li>
<li>The keybindings use <samp class="word">Meta</samp> as the Alt key to access the
            menu items, so you may need to configure your keyboard
            with 'xmodmap' in order to get 'Alt' key produce <samp class="word">Meta</samp>
	</li>
<li>Windows specific commands are not emulated, like
            <samp class="word">Print</samp> 'Setup'.
	</li>
<li>Following famous windows shortcut keys are <strong class="word">not</strong>
            Emulated; I was lazy and didn't try to reorganize the
            Emacs keys. Erm... for now you have to stick to emacs
	            equivalents and live without these.</li>
</ul>



<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      Undo   in   Control-z
      Cut    in   Control-x
      Copy   in   Control-c
      Paste  in   Control-v    </pre></td>
    </tr>
</table>



  <a name="258" id="258"></a>
  <h2>
      Code note

  </h2>




<p>
<p class="column8">
        Why on earth I made this package to use &quot;global&quot; minor mode?
        I can't remember the reason. A simple menubar entry may have
        sufficed just fine.... Oh, it was that remaping the bindings.
        You see, when minor mode is turned on, it conquers the mappings
        underneath.


<p class="column8">
        [1997-10-23] Hey, I just saw pointer to package Map-zxcv.el which
        takes care oc mapping the missing zxcv, so I don't have to bother
        with those here. Nice. You can ask it from Kim F. Storm
        <em><a href="mailto:storm@olicom.dk" >storm@olicom.dk</A></em>


<hr>
               <a name="259"  id="259"></a>
               <h1>
               Tinypage.el --- Handling ^L pages, select, cut, copy, head renumber.

               </h1>



  <a name="260" id="260"></a>
  <h2>
      Preface, jun 1996

  </h2>




<p>
<p class="column8">
        I had found paged.el by Michelangelo Grigni <em><a href="mailto:mic@mathcs.emory.edu" >mic@mathcs.emory.edu</A></em>
        one year or so ago and had liked it very much. Unfortunately
        it used narrowing and didn't offer easy page select, copy, cut
        actions which belong to basic page editing.


<p class="column8">
        Paged.el has one nice feature: It can renumber pages and make summary
        out of them. If I have time I will include those features to
        package too.



  <a name="261" id="261"></a>
  <h2>
      Overview of features

  </h2>



<p>
<ul>
	<li>Copy, cut, paste, yank (after/before current page) ^L pages.
<li>Show  page-nbr/page-count/page-size in modeline.
	</li>
<li>Can renumber numbered header levels, where last level is indicated
            with number. Eg. &quot;A.1 A.2&quot;  or &quot;1.2.1.1 &quot;1.2.1.2&quot;
	</li>
<li>Shows popup in X to jump to headings
	<li>Create table of contents.</li>
</ul>





  <a name="262" id="262"></a>
  <h2>
      About making pages &ndash; basics

  </h2>




<p>
<p class="column8">
        If you're totally unfamiliar to the concept of page: you make
        pages in emacs by adding the linefeed marker in the text, normally
        on its own line, just before your topics or headings.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      C-q C-l  --&gt; ^L    </pre></td>
    </tr>
</table>


<p class="column8">
        That inserts the ^L character in the buffer. That is where your
        page starts. The layout of your doc may look like this:


<p class="column11">
           ^L
           1.0 Topic one
         txt txt txt txt txt txt txt txt
         txt txt txt txt txt txt txt txt


<p class="column11">
           ^L
           1.1
          txt txt txt txt txt txt ..


<p class="column11">
           ^L
           1.1.1.1
          txt txt txt txt txt txt txt txt
          txt txt txt txt txt txt txt ...




  <a name="263" id="263"></a>
  <h2>
      About renumbering

  </h2>




<p>
<p class="column8">
        This package offers simple renumbering features, but it
        won't do everything for you! Let's first tell what it won't
        do. Renumbering these is piece of cake:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      1.1
      1.7.1.5             (1)
      1.5
      1.5.4.1             (2)
      1.5.4.5
      1.9    </pre></td>
    </tr>
</table>


<p class="column8">
        The result is

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      1.1
      1.7.1.5
      1.2
      1.5.4.1
      1.5.4.2
      1.3    </pre></td>
    </tr>
</table>


<p class="column8">
        tsk-tsk, before you say anything... It went all right.
        Now you see what it won't do for you.

<ol>
	<li>It can't know that the 1.7.1.5 belongs under previous 1.1,
            because no back tracking is done. I won't even try!
	            <span class="word-ref">[write a separate package if you want that...I won't do it]</span></li>
</ul>



<ol>
	<li>Same goes here, it can't know that the 1.5.4.1 should actually
	            start from 1.5.1.1</li>
</ul>




<p class="column8">
        The thumb rule is, that you <strong class="word">go</strong> and make sure all the <strong class="word">first</strong>
        level headings (those that end to X.X.1.1) are right before doing
        renumbering. In the above case, you should have done these before
        calling M-x tinypage-renumber-forward.

<ol>
	<li>--&gt; 1.1.1.1
	<li>--&gt; 1.5.1.1  <strong class="word">AND</strong> do replace M-% 1.5.4 with 1.5.1</li>
</ol>




<p class="column8">
        Then all the renumberin would have gone just fine.
        Little handy work and this package helps you to number your doc easily.




  <a name="264" id="264"></a>
  <h2>
      Renumbering &ndash; be cautious

  </h2>




<p>
<p class="column8">
        If you have index section in you file, you have a little problem,
        because this package does not know nothing about such things.
        If the Index section is at the beginning, just go past it and
        use function:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      M-x tinypage-renumber-forward    </pre></td>
    </tr>
</table>


<p class="column8">
        Using

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      M-x tinypage-renumber-buffer    </pre></td>
    </tr>
</table>


<p class="column8">
        Would be disaster. It can only be used for non-index buffers.



  <a name="265" id="265"></a>
  <h2>
      Creating index

  </h2>




<p>
<p class="column8">
        After you have renumbered all, your old index section is useless,
        Just call function

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      M-x tinypage-toc    </pre></td>
    </tr>
</table>


<p class="column8">
        And copy the showed buffer in place of the old index.



  <a name="266" id="266"></a>
  <h2>
      Limitations

  </h2>




<p>
<p class="column8">
        Since the numbering is done according to regexp, there is
        no way to avoid the following false hit:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      1.1 Overview
      This is highly technical document concerning the latest
      NASA ultrawave reflective shield technique. You should
      refer to chapter:

          1.5

      Where the Daddy-Cool portable sondium emission detector is
      described in full...    </pre></td>
    </tr>
</table>


<p class="column8">
        The Number 1.5 is unfortunately renumbered to 1.2, and possibly
        causing headache in the NASA and in the spying countries...
        If you know elegant way to prevent these false hits, please
        drop me a mail. At this time I haven't much payed attention to this.



  <a name="267" id="267"></a>
  <h2>
      Code Note

  </h2>




<p>
<p class="column8">
        The renumbering used here uses brute force, so the execution time
        is O(n2). If you have more that 30-40 sections, the renumbering
        might take 15-40 minutes. If you care to send me more pleasant
        numbering I'd be very gratefull and you're name would be carved to
        this module. For now, I'm just too lazy to change anything.


<hr>
               <a name="268"  id="268"></a>
               <h1>
               Tinypair.el --- Self insert character (pa)irs () &quot;&quot; '' &lt;&gt;

               </h1>



  <a name="269" id="269"></a>
  <h2>
      Preface, 1995

  </h2>




<p>
<p class="column8">
        I saw paired-insert.el posted to gnu.emacs.help group, and
        the code was so badly documented that I got frusrated. And when I
        finally got it going, I wasn't quite pleased with it.
        The code showed lot of promises, but it couldn't do smart pairing.
        Instead I started developing this module.



  <a name="270" id="270"></a>
  <h2>
      Overview of features

  </h2>



<p>
<ul>
	<li>Minor mode for paired characters.
	<li>[] {} &lt;&gt; '' `' &quot;&quot;</li>
</ul>





  <a name="271" id="271"></a>
  <h2>
      Pairing control

  </h2>




<p>
<p class="column8">
        <em class="word">Remember</em> Always ask youself &quot;Does this character the cursor is
        on, belong to <strong class="word">word</strong> class?&quot;, when you wonder why the pairing does
        not take in effect around the current character block.


<p class="column8">
        The pair control is turned off for lisp mode, because it makes
        things worse if the pairing is on. The pairing in US style includes

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      `'    </pre></td>
    </tr>
</table>


<p class="column8">
        But European people almost never use backquote, intead they use:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      ''    </pre></td>
    </tr>
</table>



  <a name="272" id="272"></a>
  <h2>
      General pairing rules, just some of them

  </h2>




<p>
<p class="column8">
        The pairing is done according to assoc lists in the following way:

<ul>
	<li>if there is whitespace in front of char, then pair is inserted
<li>if character is over pair-end, no pairing takes effect.
            Like if you press opening paren when you're sitting on the
	            closing paren:</li>
</ul>



<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      ()
       *  &lt;-- cursor here, pressing another ( does not pair.    </pre></td>
    </tr>
</table>


<p class="column8">
        but this behavior can be controlled through variable


<p class="column8">
        o  if the cursor is at the beginning of the word (see syntax-table):
      -- if there is no pairs around the word, the whole word is paired.
      -- if there is pair, no pairing takes effect. The char acts as
      self-insert-command.

<ul>
	<li>if previous character is word. then the '  doesn't pair. Reason
	            is in english language .........................^</li>
</ul>



<ul>
	<li>if character is repeated with prefix arg, the pairing isn't done,
	            instead the character is repeated as in self-insert-command.</li>
</ul>





  <a name="273" id="273"></a>
  <h2>
      Cursor positioning

  </h2>




<p>
<p class="column8">
        By default the cursor is positioned in the &quot;middle&quot; of the inserted
        pair chars. But for words, this is impossible, because there is no
        middle position. Please see the variables

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      tinypair-:word-positioning
      tinypair-:word-positioning-function    </pre></td>
    </tr>
</table>


<p class="column8">
        which allow you to customize cursor positioning after word pairing.



  <a name="274" id="274"></a>
  <h2>
      Word about syntax tables

  </h2>




<p>
<p class="column8">
        Syntax table play a major part in pairing, especially pairing words
        correctly. Suppose you're writing in text mode:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      ...txt txt... (help is the key)
                     *                    &lt;-- cursor    </pre></td>
    </tr>
</table>


<p class="column8">
        If you now press &quot; to have the word HELP paired, you don't get it,
        because normally text mode's syntax table says that &quot;(&quot; belongs
        to group &quot;w&quot; (word) too. So the actual word is seen as &quot;(help&quot; and
        the program determines that you're inside a word, thus not
        allowing the pairing.


<p class="column8">
        In the other hand, if you were in any other mode, say in C++, the
        &quot;(&quot; is defined as open parenthesis syntax and it that case the
        seen word seen would have been &quot;help&quot; and the &quot; character would have
        been added around the HELP string. Like this:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      ...txt txt... (&quot;help&quot; is the key)
                      *                   &lt;-- cursor    </pre></td>
    </tr>
</table>


<p class="column8">
        You may propably want quickly to see the syntax definition of
        characters; use function from my lisp libraries

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (defalias 'syntax-info 'ti::string-syntax-info)    </pre></td>
    </tr>
</table>


<p class="column8">
        To return to this syntax problem in text mode, you could do the
        following, to make certain characters out of &quot;w&quot; class.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (defun my-syntax-default (table )
        &quot;My syntax table settings.&quot;
        (modify-syntax-entry ?[ &quot;_&quot; table)
        (modify-syntax-entry ?] &quot;_&quot; table)
        (modify-syntax-entry ?{ &quot;_&quot; table)
        (modify-syntax-entry ?} &quot;_&quot; table)
        (modify-syntax-entry ?( &quot;_&quot; table)
        (modify-syntax-entry ?) &quot;_&quot; table)
        (modify-syntax-entry ?/ &quot;.&quot; table)
        (modify-syntax-entry ?\' &quot;\&quot;&quot; table)
        (modify-syntax-entry ?\&quot; &quot;\&quot;&quot; table)
        (modify-syntax-entry ?_ &quot;w&quot; table))    </pre></td>
    </tr>
</table>


<p class="column8">
        Then you just change the definitions of syntax table in hook:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (setq text-mode-hook 'my-text-mode-hook)
      (defun my-text-mode-hook ()
        (my-syntax-default  text-mode-syntax-table))    </pre></td>
    </tr>
</table>


<p class="column8">
        Do you wonder why I put {}()[] into &quot;_&quot; class and not in
        corresponding &quot;(&quot; or &quot;)&quot; classes? Well, my stig-paren just went
        beserk and started beeping the bell whenever I was nearby
        &quot;)&quot; class... The &quot;_&quot; shut it down, so I just chose it. You can
        of course put the chars into any class you like.




<hr>
               <a name="275"  id="275"></a>
               <h1>
               Tinypath.el --- Manage Emacs startup dynamically.

               </h1>



  <a name="276" id="276"></a>
  <h2>
      Preface, Feb 1999

  </h2>






 <p> <a name="277" id="277"></a>
  <h2>
      How it all begun

  </h2>




<p>
<p class="column8">
        When you have set up your Emacs installation to your liking, a day
        comes when you decide that it's time to seriously reconsider the
        directory structure of your installed lisp packages. At start, it
        is customary to use simple file hierarchy where all private
        packages are installed under:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      ~/elisp   ;; some people also prefer ~/lisp    </pre></td>
    </tr>
</table>


<p class="column8">
        Complete kits are usually installed directly under the root:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      ~/elisp/packages/bbdb-2.00.06/
      ~/elisp/packages/psgml-1.0.3/
      ~/elisp/packages/pcl-cvs-2.9.2/    </pre></td>
    </tr>
</table>


<p class="column8">
        A more sophisticated way is to use symlinks to the latest
        versions, so that you don't have to change <samp class="word">load-path</samp> every
        time you install a new version. It is only matter of updating
        the symlink:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      ~/elisp/packages/pcl-cvs/  --&gt; ~/elisp/packages/pcl-cvs-2.9.2/
      |
      This path is in the `load-path'    </pre></td>
    </tr>
</table>


<p class="column8">
        In windows world you may have your <strong class="word">H:</strong> disk mounted to Unix <strong class="word">$HOME</strong>:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      H:  --&gt; Unix $HOME  \\SERVER\DIRECTORY\YOUR-LOGIN-DIR    </pre></td>
    </tr>
</table>


<p class="column8">
        Now, there is a catch when you use Unix symlinks in <samp class="word">$HOME/elisp</samp>
        and try to access the directories from Windows. Having set PC's
        HOME environment variable to point to H:, Emacs can start reading
        Unix <samp class="word">$HOME/.emacs</samp> startup file, but you soon encounter simple
        error messages like &quot;Can't load library xxx&quot;, which soon follow by
        bigger concerns: &quot;autoloading xxx failed&quot;. The problem is the
        mounted H: disk. You see, PC's network mount can't distinguish
        symlinked directories from real directories, so all symlinked Unix
        directories in <samp class="word">load-path</samp> are dead. And that's why most of the
        files cannot be found any more.


<p class="column7"><em><strong>
       The conclusions</strong></em>



<p class="column8">
        For cross platform solution it is best not to rely on symlinks,
        because they don't work over a Windows mount. Secondly,
        updating <samp class="word">load-path</samp> should not be needed by hand after a new
        package installation, after a directory name change, after
        directory structure change, etc. A dream package would solve this
        all and do the hard work: &quot;There, that is the root(s) of all Emacs
        lisp, go and sniff all the directories and update <samp class="word">load-path</samp>&quot;
        That was what this package originally was all about. Nowadays it
        does a little more than that. Your <samp class="word">load-path</samp> is updated
        automatically without any manual work. You only have to give the
        start ROOT path(s) of your installed lisp hierarchies in the file
        system. This package is highly effective: scanning thousands of
        files in a matter of seconds and once the cache has been created,
        it takes only a snap to load it in next sessions. All <samp class="word">require</samp> and
        <samp class="word">load</samp> commands execute also faster than previously, because the
        information about existing files is immediately available. The
        speedup is helped through advised functions.



  <a name="278" id="278"></a>
  <h2>
      Overview of features

  </h2>




<p>
<p class="column7"><em><strong>
       Automatic load-path configuration</strong></em>


<ul>
	<li>Define list of <samp class="word">root</samp> directories of your Emacs lisp and this
            package will recursively add directories which contain .el or
            .elc files to <samp class="word">load-path</samp>
<li>A cache is utilized to remember previous scan and
            expired periodically. Using cache speeds up loading files
            considerably if you have many directories. The number of lisp
            directories doesn't affect the load performance any more.
            This is accomplished by using extra advice code in functions:
            <samp class="word">load</samp>, <samp class="word">load-library</samp>, <samp class="word">require</samp>, <samp class="word">locate-library</samp> and
            <samp class="word">autoload</samp>.
	</li>
<li>When Emacs becomes idle (some 15 minutes of idle time) the
            cache and <samp class="word">load-path</samp> is validated for erroneous entries and
            rebuilt as needed. This feature should auto-detect changes in
            directory structure automatically and help semi auto-installing
            new directories (packages) for you.
	</li>
<li>The <samp class="word">load-path</samp> is optimized so, that users' files automatically
            take precedence first (~/elisp), next any other files found,
            and last the core Emacs files in the distribution.
            For example speedbar.el that comes with Emacs is too outdated
            if used with JDE package and that is the reason why core Emacs
	            files come last.</li>
</ul>




<p class="column7"><em><strong>
       Automatic Info-default-directory-list configuration</strong></em>


<ul>
	<li>If you download packages that include Emacs info files,
            the <samp class="word">Info-default-directory-list</samp> is updated at the same time
            as the <samp class="word">load-path</samp>, when root directories are examined.
<li>No more manual updating of info files. The missing
            <samp class="word">dir</samp> entry is created or updated as needed.
	</li>
<li>You can update all <strong class="word">new</strong> info files in your system by calling
	            M-x <samp class="word">tinypath-info-scan-Info-default-directory-list</samp></li>
</ul>




<p class="column8">
        If you have added new info files by hand, just call function
        <samp class="word">tinypath-info-handler</samp> to update your Emacs and update the
        <samp class="word">dir</samp> entry.


<p class="column7"><em><strong>
       Automatic manpath configuration</strong></em>


<ul>
	<li>In Unix systems the MANPATH contains directories where to
            find manual pages, but in Win32, there is no default
            MANPATH and <samp class="word">M-x</samp> <samp class="word">man</samp> does not work.
<li>If package <em class="word">woman.el</em> <a href="http://centaur.maths.qmw.ac.uk/Emacs/" >http://centaur.maths.qmw.ac.uk/Emacs/</A>
            is along <samp class="word">load-path</samp>, it is automatically configured to
            support to read manual pages. It replaces the <samp class="word">M-x</samp> <samp class="word">man</samp>
	            command.</li>
</ul>




<p class="column7"><em><strong>
       Win32 Cygwin environment support</strong></em>


<ul>
	<li>If <em class="word">cygwin1.dll</em> (&lt;<a href="http://www.cygwin.com/" >http://www.cygwin.com/</A>&gt;) is in your path,
            automatic detection tries to find the Cygwin root and scan
            manual and info pages for use with <em class="word">woman.el</em>
<li>The other file Unix-like hierarchies, like reed-kotler
	            etc., are also dealt with variable <samp class="word">tinypath-:extra-path-root</samp>.</li>
</ul>




<p class="column7"><em><strong>
       Compressed lisp file support</strong></em>


<ul>
	<li>Overloads commands LOAD, LOAD-LIBRARY, LOAD-FILE, REQUIRE
            and AUTOLOAD to accept <samp class="word">jka-compr</samp> compressed lisp .el files.
            This may include .Z .gz .z .bz2 files.
<li>Primarily meant to be used in low quota accounts.
	</li>
<li>You don't have to change a thing in your Emacs startup file, all
            will work as usual.
	</li>
<li>Correctly handles aliased commands that turn out to be
	            in <samp class="word">autoload</samp> state.</li>
</ul>





  <a name="279" id="279"></a>
  <h2>
      How to set up your load path

  </h2>




<p>
<p class="column8">
        The <samp class="word">tinypath-:load-hook</samp> contains function <samp class="word">tinypath-setup</samp> which
        starts examining all directories under <samp class="word">load-path</samp> and
        <samp class="word">tinypath-:load-path-root</samp> which is set to reasonable defaults of
        site wide and personal installations. If you keep all your lisp
        files under <em class="word">$HOME/elisp</em>, then you do not need to configure anything
        for this package to work. Your <samp class="word">load-path</samp> has been updated after
        this statement at the beginning of your <em class="word">$HOME/.emacs</em>

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (load &quot;~/elisp/tiny/tinypath&quot;)   ;; Or where you have it installed    </pre></td>
    </tr>
</table>


<p class="column8">
        If you have <strong class="word">many</strong> separate Emacs lisp root directories, like one
        for <em class="word">site-lisp</em> and one for <em class="word">site-packages</em> and one for your
        <em class="word">personal</em> <em class="word">lisp</em> files, then you have add those to variable
        <samp class="word">tinypath-:load-path-root</samp>. Below there is an example for PC users,
        where the E: partition replicates identical Unix tree structure.
        The following actually works for Unix too, because non-existing
        directories will be ignored:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (setq tinypath-:load-path-root
        '(&quot;~/elisp&quot;  &quot;E:/usr/share/emacs/site-lisp/common&quot;))
      (load &quot;~/elisp/tiny/tinypath&quot;)    </pre></td>
    </tr>
</table>



  <a name="280" id="280"></a>
  <h2>
      XEmacs and Emacs specific directories

  </h2>




<p>
<p class="column8">
        In spite of great effort from developers to make packages
        compatible for both Emacs platforms, there is always some packages
        that only works with Emacs or XEmacs. It is assumed that the site
        admin has created directories like these to keep the <em class="word">site-lisp</em>
        installation clean:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      ;;   This might be also under /opt/share/site-lisp
      ;;   Refer to file hierarchy standard at
      ;;   <a href="http://www.pathname.com/fhs/" >http://www.pathname.com/fhs/</a>

      /usr/share/site-lisp/common/   .. For XEmacs and Emacs
      /usr/share/site-lisp/emacs/    .. Packages only for Emacs
      /usr/share/site-lisp/xemacs/   .. Packages only for XEmacs    </pre></td>
    </tr>
</table>


<p class="column8">
        To take care of the Emacs specific <samp class="word">load-path</samp> setting, use code
        similar to this snippet. If you load the setup multiple times, the
        <samp class="word">pushnew</samp> ensures that the directories are not added multiple
        times.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (require 'cl)
      (dolist (path (&quot;~/elisp&quot;
                     &quot;/usr/share/emacs/site-lisp/common&quot;
                     ;;  Select Emacs or XEmacs specific installations
                     (if (boundp 'xemacs-logo)
                         &quot;/usr/share/site-lisp/xemacs&quot;
                       &quot;/usr/share/site-lisp/emacs&quot;)))
        (when (stringp path)
          (pushnew path tinypath-:load-path-root :test 'string=)))

      ;; PLEASE COPY VERBATIM. THERE ARE OPTIMIZATIONS
      ;; THAT ACTIVATE If YOU ADD THE PATH
      (pushnew &quot;~/elisp/tiny/lisp&quot; load-path :test 'stringp=)
      (load &quot;tinypath.el&quot;)    </pre></td>
    </tr>
</table>


<p class="column8">
        In fact this package will check current emacs version and make sure
        that only correct directories are included to the <samp class="word">load-path</samp>. If
        you simply instructed to search the whole site-lisp root
        <samp class="word">/usr/share/site-lisp</samp>, and current emacs binary is &quot;emacs&quot;, then all
        directories that contain path portion <samp class="word">/xemacs</samp> are automatically
 ,      ignored.


<p class="column7"><em><strong>
       Building part of site-lisp using Net</strong></em>



<p class="column8">
        If we continue talking a bit more about site-lisp, there is utility
        <em class="word">mywebget.pl</em> at &lt;<a href="http://perl-webget.sourceforge.net/" >http://perl-webget.sourceforge.net/</A>&gt; The
        packaging file includes a <em class="word">mywebget-emacs.conf</em> which contains
        knowledge where the various lisp developers' home pages are and how
        to download all known lisp tools that does not come with Emacs. If
        you have lot of disk space and you're interested in getting more
        lisp tools to go with your Emacs, follow the instruction laid out
        in mywebget.pl's project page.


<p class="column8">
        If you are further interested in Emacs packages, see CVS version
        available for Unix at &lt;<a href="http://www.cvshome.com/" >http://www.cvshome.com/</A>&gt; and for Win32
        <samp class="word">cvs</samp> will ship with the &lt;<a href="http://cygwin.com" >http://cygwin.com</A>&gt; installation. With CVS
        you can track development os Tiny Tools, Gnus, BBDB and others very
        effectively (by minimizing network traffic) and in timely fashion.
        Here is suggestion there you could put all your CVS lisp downloads:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
       /usr/share/emacs/site-lisp/net/cvs-packages    </pre></td>
    </tr>
</table>


<p class="column8">
        Now, the overall structure of whole site-lisp looks something like
        this:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
               ROOT/  ( /usr/share/emacs or equivalent )
               |
               +--site-lisp/
                  |
                  +--emacs/
                     |  ...Eamcs only files
                  |  +--packages/
                  |  |  +--pcl-cvs-2.9.9/
                  |  |  +-... and so on
                  |  +--win32/
                  |     +--gnuserv/
                  |     +-... and so on
                  +--net/
                  |  +--users/
                  |     +-LispDeveloperA
                  |     +-LispDeveloperB
                  |     +-... and so on
                  |  +--cvs-packages/
                  |     +--liece/
                  |     +--lookup/
                  |     +--ILISP/
                  |     +--jess-mode/
                  |     +--devel/
                  |     +--emacro/
                  |     +--tnt/
                  |     +--cc-mode/
                  |     +--mailcrypt/
                  |     +--bbdb/
                  |     +--gnus/
                  |     +-... and so on
                  +--common/
                  |     ...COMMON for both Emacs and XEmacs
                  |     =======================================
                  |     ...Packages that you find posted to the
                  |     ...gnu.emacs.sources and whose author's
                  |     ...do not have a homepage
                  +--xemacs/
                     |  ...XEamcs only files
                     +--cvs-packages/
                        +--xemacs-packages/    </pre></td>
    </tr>
</table>


<p class="column7"><em><strong>
       XEmacs 21.2+ core packages</strong></em>



<p class="column8">
        The recent XEmacs versions ship with only the very basic
        installation. Lisp packages are distributed in separate archive
        <em class="word">xemacs-packages</em> (nick named SUMO due to its huge size). There is
        also <em class="word">mule-packages</em> and <em class="word">site-packages</em> archives. A built-in
        heuristics tries to guess the location of these by looking under and
        near your XEmacs installation:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      .../XEmacs/XEmacs-NN.N/xemacs-packages
      .../XEmacs/xemacs-packages    </pre></td>
    </tr>
</table>


<p class="column8">
        If the archives have been installed elsewhere, you have to tell the
        location by defining following variable prior loading TinyPath. You
        can't put these to <samp class="word">tinypath-:load-path-root</samp> because this is
        special information that needs to present during the very initial
        boot-up to find crucial packages like <em class="word">jka-compr.el</em>.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (setq tinypath-:core-emacs-load-path-list
            '(&quot;/usr/share/site-lisp/xemacs/xemacs-packages&quot;
               &quot;/usr/share/site-lisp/xemacs/mule-packages&quot;
               &quot;/usr/share/site-lisp/xemacs/site-packages&quot;))    </pre></td>
    </tr>
</table>



  <a name="281" id="281"></a>
  <h2>
      Finding load-path directories

  </h2>




<p>
<p class="column8">
        If you only used default $HOME/elisp directory for your files, the
        <samp class="word">tinypath-:load-path-function</samp> starts recursively searching all
        the directories under the root(s) <samp class="word">tinypath-:load-path-root</samp>. Not all
        directories are counted in when the search descends below the root(s).
        Variable <samp class="word">tinypath-:load-path-ignore-regexp</samp> decides if the directory
        should be ignored. By default:

<ul>
	<li>Package's additional subdirectories like texinfo, tex, doc, etc,
            misc, RCS, CVS, zip are ignored.
<li>Any temporary directories named .../t/ .../T/ .../tmp* .../temp*
            are ignored.
	</li>
<li>Directories that do not contain any files ending to .el or .elc are
	            ignored.</li>
</ul>





  <a name="282" id="282"></a>
  <h2>
      Gnus and other 3rd party packages

  </h2>



<p>
<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      _NOTE:_ in the latest version *Gnus* is treated specially. All
      Gnus versions are detected along load-path and the very latest
      Gnus version is installed to your `load-path'. This is based on
      the knowledge in the `gnus-version' variable and the heuristics
      will pick the newest for you. You actually do not have to do
      anything else, but to drop latest Gnus somewhere, to be able to
      use it immediately.    </pre></td>
    </tr>
</table>


<p class="column8">
        It is important to understand how this package works: It caches
        every possible lisp directory it can find. Now, if you have
        installed private copy of Gnus, say in <samp class="word">~/elisp/cvs-packages/gnus</samp>,
        there is a problem, because Emacs distribution also includes Gnus.
        There is NO WAY TO TELL OR CHANGE path order when the cache is in
        use. This is a design decision and cannot be changed. The old trick,
        where a new directory was added in front of <samp class="word">load-path</samp>, will not
        work because everything goes through cache. What you need to do
        instead, is to tell that the &quot;other&quot; Gnus should be ignored during
        cache creation, so that it is completely unknown.


<p class="column7"><em><strong>
       Solution: ignoring directories</strong></em>



<p class="column8">
        There is very simple way. Put your regular expression to
        <samp class="word">tinypath-:ignore-file-regexp-extra</samp> and it will tell which
        directories to ignore.  Naturally you must put the lisp code
        <strong class="word">before</strong> you load package.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (setq tinypath-:load-path-ignore-regexp-extra
            &quot;\\|[/\\]x?emacs[/\\0-9.]+[/\\]lisp[/\\]gnus&quot;)
      ;; PLEASE COPY VERBATIM. THERE ARE OPTIMIZATIONS
      ;; THAT ACTIVATE If YOU ADD THE PATH
      (require 'cl)
      (pushnew &quot;~/elisp/tiny/lisp&quot; load-path :test 'stringp=)
      (load &quot;tinypath.el&quot;)    </pre></td>
    </tr>
</table>


<p class="column8">
        <span class="word-ref">[For advanced Lisp programmers]</span> You can add ignored gnus directory
        to <samp class="word">tinypath-:load-path-ignore-regexp</samp> via
        <samp class="word">tinypath-:load-path-ignore-regexp-hook</samp>. When the hook is run, the
        default value for <samp class="word">tinypath-:load-path-ignore-regexp</samp> is already
        available. In hook, append regular expression that excludes the
        Gnus directory. Here is an example; make sure that you don't add
        the regexp multiple times. The multiple invocations is protected by
        setting a plist property and checking it. The ugly [\\/] makes the
        regexp compatible with both Unix and win32 paths. System
        directories in Unix are typically /emacs/NN.NN/ and in win32
        /emacs-NN.NN/, that's why added &quot;-&quot;.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (add-hook 'tinypath-:load-path-ignore-regexp-hook
                'my-tinypath-:load-path-ignore-regexp-hook)

      (defun my-tinypath-:load-path-ignore-regexp-hook ()
        ;;  Do this only once
        (unless (get 'my-tinypath-:load-path-ignore-regexp-hook 'set)
          ;; mark as done.
          (put 'my-tinypath-:load-path-ignore-regexp-hook 'set t)
          (setq tinypath-:load-path-ignore-regexp
                (concat
                 tinypath-:load-path-ignore-regexp
                 &quot;[/\\]x?emacs[/\\0-9.]+[/\\]lisp[/\\]gnus&quot;))))    </pre></td>
    </tr>
</table>


<p class="column8">
        #todo: What about XEmacs public/private Gnus installations ?



  <a name="283" id="283"></a>
  <h2>
      Updating new lisp packages

  </h2>




<p>
<p class="column8">
        Suppose you have installed a new version of a package:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      ~/elisp/gnus/pgnus-0.74/
      ~/elisp/gnus/pgnus-0.95/    ;; NEW    </pre></td>
    </tr>
</table>


<p class="column8">
        Both these directories end up being added to the <samp class="word">load-path</samp>, but
        that is not preferable. It is the latest version that should be in
        the <samp class="word">load-path</samp>. The solution is to move the old versions under
        some directory name that will be ignored by default. It is
        recommended that a backup of previous packages are renamed to start
        with a word &quot;tmp-&quot;. All directories that start with prefix <em class="word">tmp</em>
        are ignored, the problem has been solved. However if you update
        package in a site-lisp directory, there may be a distant problem
        that somebody needs older version of the package. If you made the
        backup like above, that user cannot load the old package any more,
        because it doesn't show up in <samp class="word">load-path</samp>

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      % mv ~/elisp/gnus/pgnus-0.74/ ~/elisp/gnus/tmp-pgnus-0.74/    </pre></td>
    </tr>
</table>


<p class="column10"><em class="quote10">
          There is no easy answer to keep old packages. Admin could
          announce that: &quot;new version has been installed in DIR, the old
          one is in TMP-OLD-DIR&quot; and have users manually arrange their
          <samp class="word">load-path</samp> if needed. Following simple lisp command would solve
          their setup. The statement below adds the old directory to the
          <em class="word">beginning</em> of <samp class="word">load-path</samp> and thus load commands would find the
          old version of the package first.</em>


<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (load &quot;~/elisp/tiny/tinypath&quot;)
      (pushnew TMP-OLD-OLD-DIR load-path :test 'string=)
      (tinypath-cache-regenerate)    </pre></td>
    </tr>
</table>


<p class="column8">
        Remember to mention to users that they need to update cache with
        <samp class="word">tinypath-cache-regenerate</samp> (called with prefix argument) to see
        the changes.



  <a name="284" id="284"></a>
  <h2>
      Duplicate files in path

  </h2>




<p>
<p class="column8">
        If you have accustomed to putting your path to specific order, you
        have to rethink your strategy if you are going to use this package.
        The philosophy behind creating this utility was: YOU SHOULD NOT
        NEED TO DO MANUAL WORK TO UPDATE PATHS. This means that the order of
        the paths <em class="word">must</em> not be significant. Now, You may face a situation
        where you install a library or package that contains a file, which
        has already been installed to your hierarchy. Take for example,
        <em class="word">smtpmail.el</em>:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      /usr/local/bin/emacs-20.4/lisp/mail/smtpmail.el
      /usr/share/site-lisp/common/packages/semi/flim-1.12.1/smtpmail.el    </pre></td>
    </tr>
</table>


<p class="column8">
        We have a problem here if FLIM's <em class="word">smtpmail.el</em> is not compatible with
        the one in Emacs. If it is, then there is no problem. Either one can be
        loaded, and the <samp class="word">load-path</samp> order does not matter. But you don't
        know that before you get error &quot;function smtpmail-xxxx not defined&quot;
        and you start investigating with (locate-library &quot;smtpmail&quot;) which
        package is actually active.


<p class="column8">
        After installing tinypath.el package, please investigate your path
        with <span class="word-ref">[C-u]</span> <samp class="word">M-x</samp> <samp class="word">tinypath-cache-problem-report</samp> and see if you
        find many duplicate entries. Investigate each one and possibly move
        the file to another name or remove older ones. E.g. in the above
        situation, the cure might be moving FLIM's <em class="word">smtpmail.el</em> under name
        <em class="word">flim-smtpmail.el</em> so that it doesn't get loaded with (require
        'smtpmail). The best is to contact the maintainer(s) and tell them
        about conflicts. Here is a sample of one generated problem report:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      imenu.el
        323 34073 1998-05-07 16:28:08 e:/usr/share/site-lisp/common/other/
        910 37169 1999-12-04 02:47:58 e:/usr/share/site-lisp/common/programming/java/jde/jde-2.1.6beta13/lisp/
        1350 38663 1999-11-28 01:14:38 e:/usr/local/bin/emacs/gnu-emacs/emacs-20.4.1/lisp/
      base64.el
        515  9943 1999-12-11 19:15:20 e:/usr/share/site-lisp/common/packages/gnus-5.8.2/lisp/
        807  9892 1999-11-15 00:00:12 e:/usr/share/site-lisp/common/packages/w3-4.0pre.46/lisp/    </pre></td>
    </tr>
</table>


<p class="column8">
        <strong class="word">Explanation:</strong> User had used <em class="word">imenu</em> as a separate package since
        early Emacs versions in &quot;other&quot; directory. The latest Emacs already
        ships with one, so it is best to delete the offending
        <samp class="word">other/imenu.el.</samp> Keep on eye on the numbers here: The lower, the
        more close it is to the beginning of cache when the directories
        were searched. The Package with lowest score will get loaded. For
        base64.el there seems to be no problem. Gnus path has lowest score, it
        is the current latest development version, so it will get loaded
        before w3's base64.el . A simple major mode <samp class="word">tinypath-report-mode</samp> is
        turned on for report buffer. Unnecessary files can be deleted with
        <samp class="word">Control-shift-mouse-1</samp> or <samp class="word">C-c</samp> <samp class="word">C-d</samp>.



  <a name="285" id="285"></a>
  <h2>
      Symlinked directories are ignored

  </h2>




<p>
<p class="column8">
        It is traditional to use symlinks a lot in Unix to arrange easy
        access to versioned packages. Here is the traditional way how you
        can always refer to ~/elisp/gnus/ no matter what version is
        currently installed.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      ln -s ~/elisp/packages/gnus-N.NN  ~/elisp/packages/gnus    </pre></td>
    </tr>
</table>


<p class="column8">
        This package however <em class="word">skips</em> those symlinks and records the
        absolute path name to the <samp class="word">load-path</samp>. There are couple of points:
        a) it is more instructive to peek the <samp class="word">load-path</samp> to actually see
        what versions have been installed to the Emacs b) The symlinks are
        error prone since there may be several symlinks that lead to same
        directory. In general, it is not a problem that the symlink
        directory is not included in the <samp class="word">load-path</samp>. There may be one
        situation  where symlink causes trouble for this package:


<p class="column10"><em class="quote10">
          If you draw a symlink to the the current directory from <em class="word">SEPARATE</em>
          directory, then that directory will never be seen:</em>


<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      ln -s ~/some-disk/elisp/artist-1.1/ ~/elisp/packages/artist-1.1    </pre></td>
    </tr>
</table>


<p class="column8">
        You shouldn't do this, instead either <strong class="word">a)</strong> move the package
        physically under the ~/elisp/ from the ~/some-disk/elisp/ so
        that the recursive search will record it or <strong class="word">b)</strong> add the
        separate directory ~/some-disk/elisp to the
        <samp class="word">tinypath-:load-path-root</samp>.



  <a name="286" id="286"></a>
  <h2>
      Using cache

  </h2>




<p>
<p class="column8">
        Now when you're freed from update burden of the directories in your
        disk, you can concentrate organizing the files under sensible
        directories. Here is an example how the organizing could go:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      ~/elisp/users/kevinr/       Kevin Rodger's files
      ~/elisp/users/ilya/         Ilya Zakharevich's files
      ..
      ~/elisp/packages/bbdb-2.00.06/  Version-ed packages
      ~/elisp/packages/psgml-1.0.3/
      ~/elisp/packages/pcl-cvs-2.9.2/
      ~/elisp/packages/tiny-19990215/
      ...
      ~/elisp/mime/               All MIME relates packages under this
      ~/elisp/mime/semi/          SEMI packages
      ~/elisp/mime/tm/            TM packages
      ...
      ~/elisp/lcd/                LCD (lisp code) hierarchy
      ~/elisp/lcd/misc/           <a href="http://www.cs.indiana.edu/LCD/" >http://www.cs.indiana.edu/LCD/</a>
      ~/elisp/lcd/functions/
      ...
      ~/elisp/other/              All single add-on packages    </pre></td>
    </tr>
</table>


<p class="column8">
        All these paths in <samp class="word">load-path</samp> and you can imagine how slow a
        standard Emacs would become: it takes even more time to find some
        package xxx, when Emacs sees a call (require 'xxx), because Emacs
        must start looking into every single directory under <samp class="word">load-path</samp>
        until it can determine if it can or cannot load the asked package.
        This utility will store all lisp files in cache, and it is
        activated by default. The variable <samp class="word">tinypath-:cache-expiry-days</samp>
        controls the interval when it is concluded that a new tree
        recursion is needed. If you install new packages during those
        non-expiry days, it is best to call <samp class="word">C-u</samp> <samp class="word">M-x</samp>
        <samp class="word">tinypath-cache-regenerate</samp> to build up to date image of your files
        and <samp class="word">load-path</samp> directories.


<p class="column10"><em class="quote10">
          If you want one short advice: always call <samp class="word">tinypath-cache-regenerate</samp>
          after any lisp file or directory update.</em>




  <a name="287" id="287"></a>
  <h2>
      Cache file and different Emacs versions

  </h2>




<p>
<p class="column8">
        It is important that each Emacs loads correct cache file. The cache
        file's name is derived from the emacs version. The emacs type is
        &quot;xemacs&quot; &quot;win32-xemacs&quot; &quot;emacs&quot; or &quot;win32-emacs&quot;.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
        tinypath-:cache-file-prefix
      + EMACS-TYPE
      + HOST
      + EMACS-VERSION
      + tinypath-:cache-file-postfix

      ~/elisp/config/emacs-config-tinypath-cache-win32-HOST-emacs-20.4.1.el.gz
      ==========================================                        ======
      prefix                                                           postfix    </pre></td>
    </tr>
</table>


<p class="column7"><em><strong>
       Unix hosts and NFS mounts</strong></em>



<p class="column8">
        In Unix environment, it is also common that several hosts are NFS
        mounted so that your home disk is available from every server. The
        available programs are not usually NFS mounted, but programs are
        stored locally on each server's own disk. Now, there would be a
        problem if you logged to host <em class="word">A</em> and started tinypath.el which had
        made cache in on host <em class="word">B</em>, because <em class="word">A</em> does not have the same
        directories as <em class="word">B</em> did (site-lisp). This has been taken care of by
        including <strong class="word">hostname</strong> part in the cache file name. For each host, a
        separate cache file is created. Now, suppose all the Unix hosts are
        same brand, say Sun OS, Linux, or HP-UX and a good administrator has
        separated the programs and the data in their own directory
        structures. Furthermore, these structures are NFS mounted and thus
        visible to the remote machines. In this scenario, it would not
        really matter to which host you log into, because you would always
        see the same programs and site-lisp directories and there would not
        be need for host specific cache files. In that case, disable the
        <em class="word">HOST</em> word by writing a simple function which will return an empty
        string &quot;&quot;:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (setq tinypath-:cache-file-hostname-function '(lambda () &quot;&quot;))    </pre></td>
    </tr>
</table>



  <a name="288" id="288"></a>
  <h2>
      Info file support

  </h2>




<p>
<p class="column8">
        In addition to updating the <samp class="word">load-path</samp>, the recursive function
        has a chance to search for installed info files as well. When you
        keep all your site lisp under one directory, it is not uncommon
        that the bigger packages include documentation files in info format
        as well. Like:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      /usr/share/site-lisp/emacs/pcl-cvs-2.9.9/
      /usr/share/site-lisp/common/packages/psgml-1.2.1/    </pre></td>
    </tr>
</table>


<p class="column8">
        One possibility is that after you download and uncompressed
        package, you would copy the info file to some central directory
        where you keep all you info files. This is lot of manual work.
        (Never mind that in Unix you might use Makefile to install
        everything, in Win32 it's all manual work). This package do the
        same job by looking for directories that either have info files or
        a central info repository called <samp class="word">dir</samp>. <samp class="word">dir</samp>. If the repository
        has all the info files up to date, nothing is done. In other cases:

<ul>
	<li>If the central <samp class="word">dir</samp> in the directory does not exits,
            it is created.
<li>If <samp class="word">dir</samp> does not contain entry for info file, it is added.
	            The entry name is derived from the filename.</li>
</ul>




<p class="column8">
        The <samp class="word">Info-default-directory-list</samp> is updated to include any new
        directory locations and they are saved to same cache file. When you
        call <samp class="word">C-h</samp> <samp class="word">i</samp> you will see the new info entries. Easy and
        maintenance friendly. No need to worry about supplied info files any
        more, they are automatically integrated to your Emacs. If you have
        installed any new packages to your system, Emacs packages or Unix
        packages that installed something with &quot;install -c&quot;, it is best to
        update your info files with <samp class="word">M-x</samp>
        <samp class="word">tinypath-info-scan-Info-default-directory-list</samp>. This is also
        called if you call: <samp class="word">C-u</samp> <samp class="word">M-x</samp> <samp class="word">tinypath-cache-regenerate</samp>



  <a name="289" id="289"></a>
  <h2>
      Cygwin support (Win32 and woman.el)

  </h2>




<p>
<p class="column8">
        It is common that Emacs in Win32 environment is coupled with
        <a href="http://www.cygwin.com" >http://www.cygwin.com</A> toolkit which contains all the manual pages
        for the unix commands and possibly new info pages. This package
        will locate <samp class="word">cygwin1.dll</samp> file along PATH and recurse whole cygwin
        installation root to find new entries that can be used inside
        Emacs. In theory this all should happen automatically and the only
        thing you have to do is to ensure that you have proper PATH
        settings at your OS level before this package is started. If Cygwin
        /bin directory in in PATH, <samp class="word">tinypath-:extra-path-root</samp> will get set
        to a correct value at boot time.


<p class="column8">
        If you have more places where you keep Unix tools which contain
        more manual or info pages, like Reed Kotler
        <a href="http://www.reedkotler.com/" >http://www.reedkotler.com/</A> you <strong class="word">must</strong> manually set variable
        <samp class="word">tinypath-:extra-path-root</samp> to the list of search root directories.
        If you set this yourself, you <strong class="word">must</strong> also include the cygwin
        installation root directory

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (setq tinypath-:extra-path-root
            '(&quot;e:/unix-root/cygwin&quot;
              &quot;e:/unix-root/reed-kotler&quot;
              ...))    </pre></td>
    </tr>
</table>


<p class="column8">
        Package <em class="word">woman.el</em> will be configured automatically if it is along
        <samp class="word">load-path</samp> to handle manual page viewing with command <samp class="word">M-x</samp>
        <samp class="word">man</samp>. Please make sure that you do not destroy the pre-defined
        <samp class="word">woman-manpath</samp> in your Emacs startup files with lisp commands or
        the efforts to find out new manual pages are thrown off the window.
        Search you startup files for anything that looks like <samp class="word">setq</samp>,
        <samp class="word">defvar</samp>, <samp class="word">defconst</samp>: (setq woman-manpath ... and change the code
        to <strong class="word">add</strong> to the variable instead:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (require 'cl)
      (dolist (path '(&quot;one&quot; &quot;two&quot; &quot;three&quot;))
        (pushnew (expand-file-name path) woman-manpath :test 'string))    </pre></td>
    </tr>
</table>



  <a name="290" id="290"></a>
  <h2>
      Faster Emacs configuration (Perl emacs-util.pl)

  </h2>




<p>
<p class="column8">
        Indication of this feature at startup is following message, where
        EXT refers to externally launched process which must be waited
        until further processing is done.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      TinyPath: EXT Process running ... [may take a while]    </pre></td>
    </tr>
</table>


<p class="column8">
        As this package evolved and more support was added to various
        environments, like Cygwin, which requires traversing hundred of
        directories to find out if they contained info or manual pages,
        it came evident that Emacs Lisp method is too slow. An alternative
        method was developed using Perl language and script <em class="word">emacs-util.pl</em>
        which can traverse directory hierarchies to find relevant
        directories for the setup. This interface is automatically used
        if two conditions are met in current environment:

<ul>
	<li>Binary <em class="word">perl</em> must be along PATH. (according  <samp class="word">executable-find</samp>)
<li>perl script <em class="word">emacs-util.pl</em> must be along PATH. Either copy
            the file to suitable place or include tiny-tool kit's /bin
            directory to your PATH (This is not the whole story, see
	            &quot;Internal optimizations&quot;).</li>
</ul>




<p class="column8">
        If all goes well, a <samp class="word">call-process</samp> to the utility script will
        return the file hierarchies much faster than the Emacs Lisp ever
        could. The difference is that you don't see the traversing progress
        as you would if Emacs Lisp did the same thing. The command line
        arguments passed to the utility scripts can be found from the
        <em class="word">Message</em> buffer and you can run the program yourself if you think
        that it returns incorrect listing. Print the script help with
        following command:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      % perl emacs-util.pl --help    </pre></td>
    </tr>
</table>


<p class="column8">
        Here are some performance statistics of the perl script in action.
        (Use --verbose argument to see the statistics)

<ul>
	<li>Intel 400MHz, IBM GXP 80G IDE disk, whole Cygwin installation
            scan: 3 min 46 sec, dirs: 2373, files: 35 271
<li>Same PC, but this time site-lisp directory, subset of Cygwin
            hierarchy at /usr/share/site-lisp took:
	            0 min 13 sec, dirs: 648, files: 8750</li>
</ul>




<p class="column8">
        Let's consider one scenario that you may encounter if you intend to
        use Cygwin similarly as the big brother Linux. Let's suppose that
        you have dedicated a disk portion where you intend to duplicate
        whole Linux-like directory hierarchy. You have ROOT under which you
        keep all the files, including anything that is Cygwin-related.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      E:/usr/share/site-lisp      Emacs lisp as outlined earlier
      E:/usr/share/site-perl      Perl packages and scripts
      E:/usr/share/site-php       PHP code
      E:/usr/share/site-cvs       Various other external CVS C-packages    </pre></td>
    </tr>
</table>


<p class="column8">
        The default heuristics <samp class="word">win32-cygwin-p</samp> should find <em class="word">cygwin1.dll</em>
        installed and report that Cygwin root is <em class="word">E:/</em> This means that
        <samp class="word">tinypath-:extra-path-root</samp> will get set for you when package
        loads. Suppose further that you have set variable
        <samp class="word">tinypath-:load-path-root</samp> to point out suitable locations in
        <em class="word">E:/usr/share/site-lisp</em>. It would seem that this combination means
        that the hierarchies would be traversed multiple times, since the
        Cygwin root already includes all the rest:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      E:/                             Cygwin root
      E:/usr/share/site-lisp/emacs    For this emacs...
      E:/usr/share/site-lisp/common   Emacs and XEmacs compatible tree    </pre></td>
    </tr>
</table>


<p class="column8">
        Don't worry. The Perl utility is smart enough to reduce this to
        search only <em class="word">E:/</em> and discard other roots as redundant. Hm, what if
        other lisp files are found <strong class="word">outside</strong> of the
        <em class="word">E:/usr/share/site-lisp/</em>, because it searches every dir starting
        from <em class="word">E:/</em> Say:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      E:/tmp/try/some-file.el    </pre></td>
    </tr>
</table>


<p class="column8">
        Will the directory <em class="word">E:/tmp/try/</em> reported as lisp <samp class="word">load-path</samp>
        candidate and added to search list? Yes and no. Yes, it will be
        reported, but No, it will not be added to the <samp class="word">load-path</samp> because it
        doesn't match the initial user's idea where to look for lisp files. If
        you pump up the <samp class="word">tinypath-:verbose</samp> to level 5, you can see PATH-NOK
        messages labeled &quot;candidate&quot; to indicate those rejections. Only files
        that reside under <samp class="word">tinypath-:load-path-root</samp> directories are counted
        in.



  <a name="291" id="291"></a>
  <h2>
      Updating running Emacs

  </h2>




<p>
<p class="column8">
        Suppose you have downloaded the latest versions of packages X, Y and Z
        and you want your current emacs's paths updated. You can do this:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      M-x tinypath-cache-regenerate    </pre></td>
    </tr>
</table>


<p class="column8">
        A bit of skepticism: It is a fortunate event if it all worked that
        easily. You see, you already have several packages loaded in your
        Emacs and they are using the &quot;old&quot; code. Now you wiped the old
        directories away and told Emacs to look for only &quot;new&quot; directories.
        After a while you may run into bizarre dependency problems. I
        recommend that after any major package update, which contains lot
        of files (like Gnus), you:

<ul>
	<li> Install package and regenerate cache in current Emacs with
             <samp class="word">M-x</samp> <samp class="word">tinypach-cache-regenerate</samp>.
<li> Save your  current session (see <em class="word">desktop.el</em>, <em class="word">tinydesk.el</em>)
	<li> Quit, and restart Emacs</li>
</ul>





  <a name="292" id="292"></a>
  <h2>
      Compressed lisp file support

  </h2>




<p>
<p class="column8">
        IN ORDER TO USE THE FULL COMPRESSION SUPPORT FOR AUTOLOAD FUNCTIONS
        AS WELL, SET VARIABLE <samp class="word">tinypath-:compression-support</samp> to symbol
        <samp class="word">all</samp>. THE DEFAULT SUPPORT ONLY HANDLES <samp class="word">require</samp> and <samp class="word">load</samp> commands.
        You must set this variable before package loads.


<p class="column7"><em><strong>
       Jka-compr and this package</strong></em>



<p class="column8">
        jka-compr has native support to un/compress any file that have
        specific extensions. The handling is done via
        <samp class="word">file-name-handler-alist</samp> and commands like these will load
        properly including any autoloads.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (load &quot;my-el.gz&quot;)    </pre></td>
    </tr>
</table>


<p class="column8">
        The obvious problem is that you have to manually go and change all
        you load commands so that they end in .gz so that jka-compr takes
        care of loading. What if you later uncompress the file? You have to
        go and update all the load commands in you Emacs startup files.
        This isn't very nice, since you should be able to un/compress elisp
        files whenever you wish and still have permanent statement like one
        below. Basically this is what the compression support here is all
        about; you don't have to worry if the file is compressed or not
        when these advised functions are in effect. The following statement
        will always work:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (load &quot;my-el&quot;)    </pre></td>
    </tr>
</table>


<p class="column7"><em><strong>
       How the compressed loading works</strong></em>


<ul>
	<li>When user request <samp class="word">load</samp> FILE, try to find some compressed file
            that JKA knows about by adding extensions &quot;.gz&quot; and &quot;.Z&quot; and
            whatever user has configured JKA to handle. <strong class="word">LIMITATION:</strong>
            only .gz .Z .bz2 and the like that compress one file at a time
            is currently supported. Don't try using .zip or similar.
<li>If the FILE is absolute path, then look from that
            directory only.
	</li>
<li>If no directory is given, find the file along the path.
	</li>
<li>If there was somewhere a compressed file, just load it (because JKA
            will transparently uncompress it), eval it, and kill the buffer.
	</li>
<li>If NO COMPRESSED file was found, just follow normal
	            emacs rules.</li>
</ul>




<p class="column7"><em><strong>
       Note: Why you should not prefer compressed .elc files</strong></em>



<p class="column8">
        The purpose of compression support is to make it possible to
        have more useful lisp files in an account that has a limited
        disk space (quota).  Keeping lisp files in compressed format
        saves quite a much disk space.

<ul>
	<li>Plain text, lisp <samp class="word">.el</samp>, files may compress better.
<li>The documentation in comments is important, e.g all the
            instruction to use the file are there. Byte compiling
            strips away documentation.
	</li>
<li>In order to debug or send bug reports you have to use .el files,
            the .elc files are useless.
	</li>
<li>The performance ratio that the .elc files offer may not
	            be a crucial factor (many times you couldn't tell).</li>
</ul>




<p class="column7"><em><strong>
       Note: advised emacs commands</strong></em>



<p class="column8">
        The adviced functions can be further adviced, but
        if the redefined function uses <samp class="word">interactive-p</samp> test, it will
        not indicate user call (like M-x load-library). The reason why
        the advised functions detect it, is that advice.el's
        <samp class="word">ad-do-it</samp> macro cannot pass the interactive flag information
        to the original functions.



  <a name="293" id="293"></a>
  <h2>
      Trouble shooting

  </h2>




<p>
<p class="column8">
        There is no denying it, this package is dangerous. When something
        goes wrong, it really goes wrong and your Emacs is messed up
        completely. So, here are some trouble shooting tips, that you
        might want to try to rescue the situation or understand what is
        going on. The most usual blame is the <em class="word">cache</em> content which does not
        contain the correct or up to date information.


<p class="column7"><em><strong>
       Package is not found or loaded?</strong></em>



<p class="column8">
        Please confirm that the file location is known and is in right
        directory by calling <samp class="word">M-x</samp> <samp class="word">locate-library</samp>. If the result is
        not correct, please check <samp class="word">tinypath-:load-path-root</samp> and
        <samp class="word">tinypath-:extra-path-root</samp>. Try to remedy the situation,
        regenerate cache with <samp class="word">M-x</samp> <samp class="word">tinypath-cache-regenerate</samp>.


<p class="column7"><em><strong>
       You don't know what particular package is causing troubles</strong></em>



<p class="column8">
        Go to the <em class="word">Message</em> buffer and clear it (<samp class="word">C-x</samp> <samp class="word">h</samp> followed by
        <samp class="word">C-w</samp>). Run the path generation engine with debug <samp class="word">M-x</samp>
        <samp class="word">tinypath-debug-external-helper</samp> and study the output. It may
        be ignoring some files that you think should be included. Please
        check content of <samp class="word">tinypath-:load-path-ignore-regexp</samp> and
        <samp class="word">tinypath-:load-path-ignore-regexp-extra</samp>.


<p class="column7"><em><strong>
       You need to see the internals</strong></em>



<p class="column8">
        Call function <samp class="word">tinypath-cache-file-find-file</samp> to display the current
        Cache and use <samp class="word">C-s</samp> and <samp class="word">C-r</samp> to search entries in the file. Remember
        that you must not modify this file, because any changes you do, will
        get overwritten next time the cache is created. The problem is
        somewhere else if you can see incorrect settings in cache file.



  <a name="294" id="294"></a>
  <h2>
      Code note: General

  </h2>




<p>
<p class="column8">
        Because this package is among the first that is loaded from Emacs
        startup file, It contains copies of some functions from TinyLib
        libraries, to make the package independent until the point where
        the <samp class="word">load-path</samp> has been set up and other libraries are available.
        In the code you may find marks &quot;#copy:&quot; which indicate code that
        has been copied/simplified to be used here. Autoloads statements in
        this package defer loading functions until the end is reached and
        <samp class="word">load-path</samp> is determined and the rest of the functions can be
        loaded from the libraries.



  <a name="295" id="295"></a>
  <h2>
      Code note: Where is that emacs package

  </h2>




<p>
<p class="column8">
        If you ever need to know the location of a package that Emacs
        would load or has loaded, while this utility is in effect,
        use this call:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (insert (tinypath-cache-p &quot;gnus.el&quot;))    </pre></td>
    </tr>
</table>


<p class="column8">
        In fact the regula call yields same result, because
        <samp class="word">locate-library</samp> is adviced:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (insert (locate-library &quot;&quot;gnus.el&quot;))    </pre></td>
    </tr>
</table>


<p class="column8">
        More easily, if you have tinylisp.el, which takes advantage of
        tinypath.el cache, you can load any emacs package for editing
        with command:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      M-x load-library RET tinylisp RET
      M-x tinylisp-library-find-file
      (tinypath cache)Lisp Library: gnus.el RET    </pre></td>
    </tr>
</table>


<p class="column8">
        Alternatively there is mode hot-keys $ l f  and $ l p :

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      M-x load-library RET tinylisp RET
      M-x tinylisp-mode  (in *scratch* buffer, see &quot;E&quot; in modeline)
      $ l f
      (tinypath cache)Lisp Library: gnus.el RET    </pre></td>
    </tr>
</table>



  <a name="296" id="296"></a>
  <h2>
      Code note: Internal optimizations

  </h2>




<p>
<p class="column8">
        In the installation section it is instructed that the location of the
        package is pushed into the <samp class="word">load-path</samp> before the package is loaded:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (require 'cl)
      (pushnew &quot;~/elisp/tiny/lisp&quot; load-path :test 'stringp=)
      (load &quot;tinypath.el&quot;)    </pre></td>
    </tr>
</table>


<p class="column8">
        Please follow this instruction. The reason is that program tries to
        use most efficient code to boot everything up and the first thing
        it can do is to check the location where it has been saved. This
        package will use this information assume that the Perl program
        emacs-util.pl is available in <em class="word">~/some/path/bin/emacs-util.pl</em>. If
        that fails, the Perl program is searched along <samp class="word">exec-path</samp>. This is
        usually desirable, situation because every new installation include
        newer version of emacs-util.pl and the one at <samp class="word">exec-path</samp> may not
        be up to date. The perl code will speed up booting compared to pure
        Emacs Lisp implementation. In addition the Perl code section in
        this file (often referred as &quot;external&quot;) has extra features
        included.



  <a name="297" id="297"></a>
  <h2>
      Code note: *Messages*

  </h2>




<p>
<p class="column8">
        This package will print loads of messages to Emacs &quot;*Message*&quot; or
        XEmacs &quot; <em class="word">Message-Log</em>&quot; buffer. This is a design decisions so that
        execution can be easily traced during Emacs load time. It also help
        reporting errors. The default <samp class="word">tinypath-:verbose</samp> 3 will log the most
        important messages.  Even if you set the level to 0 or nil, still
        some messages are displayed. Have a look at Message buffer if you have
        not much used it before. You may find interesting information to
        debug some of your own mis-configurations, like stale directories
        in <samp class="word">exec-path</samp>.



  <a name="298" id="298"></a>
  <h2>
      Code note: Custom

  </h2>




<p>
<p class="column8">
        If you have Emacs that does not contain <em class="word">custom.elc</em> (Yes, it must be
        in compiled format, be sure to check), you can download Noah
        Friedman's excellent custom emulation package <em class="word">cust-stub.el</em> at
        <a href="http://www.splode.com/~friedman/software/emacs-lisp/" >http://www.splode.com/~friedman/software/emacs-lisp/</A> You have to load
        it from absolute location before loading this packages like this:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (load &quot;~/elisp/noah/cust-stub&quot;)
      (load &quot;~/elisp/tiny/lisp/tinypath&quot;)    </pre></td>
    </tr>
</table>



  <a name="299" id="299"></a>
  <h2>
      Code note: Insinuating packages

  </h2>




<p>
<p class="column8">
        Some packages can be auto-configured when the perl script reads the
        contents of the directories. Like package <em class="word">woman.el</em> which
        needs to know the location of man path directories. For other
        packages there are different &quot;installations&quot;. Gnus is one
        interesting example: Every Emacs and XEmacs release comes with
        Gnus version, which is usually outdated and many install Gnus
        privately. The problem is multiple Gnus versions in the load
        paths and the wished situation is that there would be only the
        latest. there is experimental code to find out which of the
        Gnus packages along <samp class="word">load-path</samp> is the latest and after making
        hopefully right decision (according to gnus-version-*
        variable) the other Gnus locations are hidden by modifying
        <samp class="word">load-path</samp> and <samp class="word">tinypath-:load-path-ignore-regexp</samp>. This is a
        complimentary method
        to that suggested in the manual section &quot;3rd party packages&quot;.



  <a name="300" id="300"></a>
  <h2>
      Code note: Elp profiling results 2001-03-01

  </h2>




<p>
<p class="column8">
        The profiling results were run using method below. It must be note,
        that the <samp class="word">tinypath-external-*</samp> is the time when the external perl
        program examines all the directories, so EXT time is not significant
        because it varies from system to system. The
        <samp class="word">tinypath-external-setup-parse-data</samp> is the actual time spent in
        parsing the returned data. The functions that are called most of the
        time are the ones that must be kept on eye on and they seem to
        perform very well. Immediate below are the most important functions
        that perform the Parsing after the perl has returned results (these
        are not from the total listing, but after tweaking)

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      tinypath-external-output-parse                   1    4.89  4.89
        tinypath-external-output-parse-1               5    1.09  0.21
        tinypath-external-output-parse-1-cache         1    3.79  3.79


      tinypath-external-setup-parse-data               1    5.77  5.77
        tinypath-external-setup-1-load-path            249  0.70  0.002
        tinypath-external-setup-1-man-path             44   0.0   0.0
        tinypath-exec-path-append                      73   0.92  0.012
        tinypath-info-handler                          31   8.46  0.27
        tinypath-external-setup-cache                  1    0.0   0.0    </pre></td>
    </tr>
</table>


<p class="column7"><em><strong>
       The timing information was tested and generated with:</strong></em>


<ul>
	<li>C-x C-f Load file to buffer.
<li><samp class="word">M-x</samp> <samp class="word">load-library</samp> tinylisp.el
	</li>
<li><samp class="word">M-x</samp> <samp class="word">turn-on-tinylisp-mode</samp>
	</li>
<li>$ -    to eval current buffer
	</li>
<li>$ e I  to instrument everything
	</li>
<li><samp class="word">M-x</samp> <samp class="word">tinypath-cache-regenerate</samp>
	<li>$ e s  to show results</li>
</ul>




<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      Function Name                                    Count  Elap Ave
      ===============================================  ====  ===== =====
      tinypath-cache-regenerate                        1     78.11 78.11
      tinypath-cache-setup                             1     71.63 71.63
      tinypath-cache-setup-scan                        1     66.35 66.35
      tinypath-external-setup                          1     65.52 65.52
      tinypath-external-helper                         1     56.08 56.08
      tinypath-external-helper-call                    1     52.29 52.29
      tinypath-info-handler                            31    12.47 0.402
      tinypath-info-files-in-directory                 62    10.81 0.174
      tinypath-external-setup-parse-data               1     8.23  8.23
      tinypath-info-scan-Info-default-directory-list   1     6.48  6.48
      tinypath-info-directory-contents-update          31    4.07  0.131
      tinypath-external-output-parse                   1     3.79  3.79
      tinypath-external-output-parse-1-cache           1     3.63  3.63
      tinypath-load-path-clean                         3     3.25  1.083
      tinypath-directory-list-clean                    12    2.85  0.237
      tinypath-expand-file-name                        1493  2.59  0.001
      tinypath-file-extension-compressed               2584  2.47  0.000
      tinypath-ti::write-file-variable-state             1     1.38  1.38
      tinypath-cache-file-write                        1     1.38  1.38
      tinypath-external-setup-1                        1     1.21  1.21
      tinypath-path-ok-p                               995   1.10  0.001
      tinypath-cache-setup-clear                       1     0.77  0.77
      tinypath-external-setup-1-load-path              249   0.70  0.002
      tinypath-path-ok-this-emacs-p                    1604  0.38  0.000
      tinypath-exec-path-check                         1     0.33  0.33
      tinypath-exec-path-check-verbose                 1     0.33  0.33
      tinypath-external-output-parse-1                 5     0.16  0.032
      tinypath-exec-path-clean                         1     0.16  0.16
      tinypath-external-bin-location                   1     0.06  0.06
      tinypath-exec-path-append                        73    0.06  0.000
      tinypath-executable-find                         1     0.06  0.06
      tinypath-Info-default-directory-list-clean       2     0.05  0.025
      tinypath-external-setup-1-man-path               44    0.05  0.001
      tinypath-emacs-versions                          1     0.0   0.0
      tinypath-info-file-DIR                           31    0.0   0.0
      tinypath-cache-status-string                     1     0.0   0.0
      tinypath-cache-file-name                         1     0.0   0.0
      tinypath-emacs-lisp-file-list-cache-clear        1     0.0   0.0
      tinypath-cache-status-message                    1     0.0   0.0
      tinypath-time-string                             1     0.0   0.0
      tinypath-use-compression-maybe                   1     0.0   0.0
      tinypath-directory-up                            1     0.0   0.0
      tinypath-self-location                           1     0.0   0.0
      tinypath-external-setup-cache                    1     0.0   0.0
      tinypath-info-handler-DIR                        31    0.0   0.0
      tinypath-exec-path-from-path                     1     0.0   0.0    </pre></td>
    </tr>
</table>



  <a name="301" id="301"></a>
  <h2>
      Todo

  </h2>



<p>
<ul>
	<li>In theory it is possible to load remote files with ange-ftp/EFS in
            manner of load-library RET /user@host:/path/to/file but this
            has never been tested using this package.
<li>It may be possible to add /user@host:/path/to/dir/
            to <samp class="word">load-path</samp>, but that has never been tested.
	</li>
<li><em class="word">xemacs-packages</em> can be downloaded using CVS. Hm, where would
	            this cvs download be? Any chance to make auto-boot find that too?</li>
</ul>




<hr>
               <a name="302"  id="302"></a>
               <h1>
               Tinyperl.el --- Grab-bag of Perl related utilities. Pod documentation

               </h1>



  <a name="303" id="303"></a>
  <h2>
      Preface, march 1998

  </h2>




<p>
<p class="column8">
        Perl was quite new in 1994 and perl programs imported
        libraries using <samp class="word">require</samp> command. Some time passed and the
        new Perl 5 was a complete rewrite. It introduced new Object
        and reference technologies to language but lot of perl coders
        couldn't grasp the new ideas immediately. Many made the
        decision to move to perl 5 only after it was mature
        enough. The perl 5 coding was so much cleaner and simpler
        compared to perl 4.


<p class="column8">
        As a result some additional Emacs functions were needed the Perl
        work going and this module more or less concentrates on helping to
        document perl programs with POD or getting perl man pages via
        <samp class="word">perldoc</samp> interface. The other companion that you would already
        know is the <samp class="word">cperl-mode</samp> which is the best mode for coding the
        perl language.



  <a name="304" id="304"></a>
  <h2>
      Overview of features

  </h2>




<p>
<p class="column8">
        In Windows, both Activestate Perl and native Cygwin perl are
        supported. But you cannot use both. If you have accustomed to
        Activestate Perl, you may consider moving to Cygwin Perl, because
        it is more close to the Unix Perl where you can even use
        &quot;perl -eCPAN -e shell&quot; to install modules directly from CPAN.


<p class="column8">
        Sorry to tell you, but multiple perl installations are not
        supported. The one that is in your path first is used. Perl
        advances each time so much that you're much safer if you always
        have the latest version. This is true with Java and Python
        as well.


<p class="column8">
        <samp class="word">tinyperl-mode</samp> minor mode:

<ul>
	<li>Instant function help: See documentation of <samp class="word">shift</samp>, <samp class="word">pop</samp>...
<li>Show Perl manual pages in <em class="word">pod</em> buffer
	</li>
<li>Load library source code into Emacs, like Devel::DProf.pm
	</li>
<li>Grep through all Perl manual pages (.pod)
	</li>
<li>Follow POD manpage references to next pod page with TinyUrl
	</li>
<li>Colored pod pages with <samp class="word">font-lock</samp>
	<li>Update perl <samp class="word">$VERSION</samp> variable automatically on save.</li>
</ul>




<p class="column8">
        Other minor modes:

<ul>
	<li>Separate <samp class="word">tinyperl-pod-view-mode</samp> for reading pod2text pages
	<li>Separate <samp class="word">tinyperl-pod-write-mode</samp> for writing POD documentation</li>
</ul>





  <a name="305" id="305"></a>
  <h2>
      Package startup

  </h2>




<p>
<p class="column8">
        At package startup the perl binary's <samp class="word">tinyperl-:perl-bin</samp>
        <samp class="word">@INC</samp> content is cached. If you have modules somewhere else than
        the standard <samp class="word">@INC</samp>, then add additional <samp class="word">-I</samp> switches to the
        <samp class="word">tinyperl-:inc-path-switches</samp> so that these additional paths are
        cached too.


<p class="column8">
        In addition the Perl POD manual pages and paths are cached at startup.
        This is derived from <em class="word">Config.pm</em> module $Config{privlib}.


<p class="column8">
        If you need to change any of the above settings in environment
        during the session, reload package or call <samp class="word">tinyperl-install</samp> to
        update the changed values.



  <a name="306" id="306"></a>
  <h2>
      Saving TinyPerl state (cache)

  </h2>




<p>
<p class="column8">
        When the package is used for the first time, the Perl <samp class="word">@INC</samp> is read
        and all .pl and .pm files along the path are cached and written to
        file <samp class="word">tinyperl-:cache-file</samp>. Next time this package is loaded, the
        cache file is read. This speeds up package initialization next time.


<p class="column8">
        If you upgrade Perl or add new packages along @INC, you
        must rebuild the cached information and have it updated to
        <samp class="word">tinyperl-:cache-file</samp>. You do this by calling <samp class="word">tinyperl-install</samp>
        with a prefix argument (e.g. <samp class="word">C-u</samp>).


<p class="column8">
        The cache information is expired periodically, so it should keep up
        with the environment changes quite well. The default cache period
        is 7 days, but this can be set via
        <samp class="word">tinyperl-:cache-file-days-old-max</samp>.



  <a name="307" id="307"></a>
  <h2>
      Perl Minor Mode description

  </h2>




<p>
<p class="column8">
        Turning on <samp class="word">tinyperl-mode</samp> in any buffer gives you commands to
        retrieve Perl's POD (Plain Old Documentation) pages. This is
        most useful with the programming mode <samp class="word">perl-mode</samp>. Function
        <samp class="word">turn-on-tinyperl-mode</samp> is also added to hooks
        <samp class="word">perl-mode-hook</samp> and <samp class="word">cperl-mode-hook</samp> by default.
        The list of key below may be not completely up to date, so
        consult <samp class="word">C-h</samp> <samp class="word">f</samp> <samp class="word">tinyperl-mode</samp>.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      C-c ' f             tinyperl-pod-find-file
      C-c ' F             tinyperl-pod-find-file-this-buffer
      C-c ' P             tinyperl-pod-by-module
      C-c ' P             tinyperl-pod-by-manpage
      C-c ' k             tinyperl-pod-kill-buffers

      C-c ' m             tinyperl-module-find-file
      C-c ' d             tinyperl-perldoc
      C-c ' g             tinyperl-pod-grep    </pre></td>
    </tr>
</table>

<ul>
	<li><samp class="word">tinyperl-pod-find-file</samp>
            run pod2text over file pointed by the function. After running this
            The internal POD documentation in the file is presented in man page
            format. You can use function <samp class="word">tinyperl-pod-find-file-this-buffer</samp>
            to check the layout of the POD that you're writing to the current
            perl program.
<li><samp class="word">tinyperl-pod-by-module</samp>
            View module pages by completing the installed Perl modules
            and running pod2text. Like reading documentation of &quot;Getopt::Long&quot;.
	</li>
<li><samp class="word">tinyperl-pod-by-manpage</samp>
            View Perl manual pages, like &quot;perlfunc.pod&quot; and run pod2text
	</li>
<li><samp class="word">tinyperl-pod-kill-buffers</samp>
            Kill all <em class="word">pod</em> buffers from Emacs
	</li>
<li><samp class="word">tinyperl-module-find-file</samp>
            Complete installed module in @INC and load source code into Emacs.
            Like if you want to see real code of &quot;Getopt::Long&quot;
	</li>
<li><samp class="word">tinyperl-perldoc</samp> Use perldoc -f to display documentation of
            a perl function at point.
	</li>
<li><samp class="word">tinyperl-pod-grep</samp>
            Grep regexp from all Perl POD manual pages. Answers to
	            question &quot;Is this mentioned in FAQ&quot;.</li>
</ul>





  <a name="308" id="308"></a>
  <h2>
      POD view mode description: navigating in pod page and following URLs

  </h2>




<p>
<p class="column8">
        When pod is loaded to buffer, another package, <em class="word">tinyurl.el</em>, is
        turned on. It can track several different kind of URLs, including
        perl pod manpages for references like:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      See perlfunc manpage
          ^^^^^^^^^^^^^^^^

      See [perltoc]
          ^^^^^^^^^

      Devel::Dprof manpage
      ^^^^^^^^^^^^^^^^^^^^    </pre></td>
    </tr>
</table>


<p class="column8">
        You can use mouse-2 at the point to jump to the referenced POD
        page. Wait couple of seconds at the current line and any
        references or URLs found are marked. If you do not want to use
        TinyUrl package, add this setup:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (add-hook tinyperl-:load-hook 'my-tinyperl-:load-hook)

      (defun my-tinyperl-:load-hook ()
        &quot;My TinyPerl customisations.&quot;
        (remove-hook 'tinyperl-:pod2text-after-hook
                     'turn-on-tinyurl-mode-1))    </pre></td>
    </tr>
</table>


<p class="column8">
        In <em class="word">pod</em> buffer where the pod documentation is displayed, an
        additional browsing mode, <samp class="word">tinyperl-pod-view-mode</samp>, is turned on to
        help moving around topics. If you find the PgUp keys non-customary,
        see variable <samp class="word">tinyperl-:key-pageup-control</samp>.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      ;;  moving down/up topics

      PgDown              tinyperl-pod-view-heading-forward
      PgDown              tinyperl-pod-view-heading-backward

      S-PgDown    tinyperl-pod-view-heading-forward2
      S-PgDown    tinyperl-pod-view-heading-backward2

      ;; Moving down/up one pod page at a time
      ;; The pod pages are all gathered to single buffer *pod*

      Meta-PgDown tinyperl-pod-view-forward
      Meta-PgUp   tinyperl-pod-view-backward

      ;;  The normal PgUp/Down command is available here

      Control-PgDown      scroll-up
      Control-PgUp        scroll-down    </pre></td>
    </tr>
</table>


<p class="column8">
        By default the POD documentation is kept in a single buffer where
        you can conveniently use C-s and C-r searches. If you would like to
        use separate POD buffers instead, a la M-x man, set variable
        <samp class="word">tinyperl-:pod-buffer-control</samp> to 'many. The opposite is 'single.



  <a name="309" id="309"></a>
  <h2>
      POD Write mode description

  </h2>




<p>
<p class="column8">
        There is additional minor mode to help you write POD in the current
        buffer The minor mode is in function <samp class="word">tinyperl-pod-write-mode</samp> and
        you can switch to it any time you're adjusting the pod section.
        Don't keep on all the time, since it occupies some keys that are
        normally needed in programming.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      PgDown      tinyperl-pod-write-heading-forward
      PgUp        tinyperl-pod-write-heading-backward    </pre></td>
    </tr>
</table>


<p class="column8">
        With shift

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      PgDown      tinyperl-pod-write-token-forward
      PgUp        tinyperl-pod-write-token-backward    </pre></td>
    </tr>
</table>


<p class="column8">
        Inserting default POD templates for program

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      C-c . m     tinyperl-pod-write-skeleton-script-manpage
      C-c . f     tinyperl-pod-write-skeleton-script-function
      C-c . i     tinyperl-pod-write-skeleton-item    </pre></td>
    </tr>
</table>


<p class="column8">
        Inserting default POD skeletons for Modules or Classes.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      C-c . B     tinyperl-pod-write-skeleton-module-header
      C-c . E     tinyperl-pod-write-skeleton-module-footer
      C-c . F     tinyperl-pod-write-skeleton-module-function    </pre></td>
    </tr>
</table>


<p class="column8">
        POD skeleton for functions (C-c . F) is very different from the
        Module skeletons. This due to fact, that a Module offers documented
        function interface and the user callable functions should be
        described separately with POD in order to print the manual of the
        module.


<p class="column8">
        The POD skeletons for Modules are based on following Module
        layout. This is my only a suggested layout, see
        Lingue::EN:Squeeze.pm for complete first hand example. The
        places below where you see &quot;P O D&quot; are the places where you
        add pod. For each, a different pod skeleton is inserted and
        when the whole file is printed, it gives nice and maintainable
        interface description.


<p class="column8">
        There is another group of people that prefer writing the whole
        documentation after the <strong class="word">_END</strong>_. It has drawback that then you
        separate the descriptions from the actual place where the code
        resides. The idea here has been that the documentation (function)
        is kept immediately above the code: if you change it (function),
        you can update the documentation at the same place.


<p class="column8">
        In the other hand, by putting documentation after <strong class="word">_END</strong>_, the
        load time of module is decreased, because POD text is never
        read by perl interpreter. Another point to keep in mind is,
        that the computing power and disk speed will increase, so the
        <strong class="word">_END</strong>_ solution's benefit is neglible. The maintenance is
        easier when the documentation is not separated from the place
        where it would be the most natural (nearest to the code).

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      F I L E   B A N N E R

      P O D  H E A D E R
      NAME
      REVISION
      SYNOPSIS
      DESCRIPTION
      EXPORTABLE VARIABLES
      EXAMPLES

      #   module interface is written next

      use strict;

      BEGIN
      {
            .. EXPORT          # The export interface
            .. EXPORT_OK
      }

      Define exported globals

      Define private variables

      P O D   I N T E R F A C E   S T A R T

      P O D  P U B L I C for public functions or method
      sub ...

      NORMAL banner of private function
      sub ...

      P O D   F O O T E R
      KNOWN BUGS
      AVAILABILITY
      AUTHOR

      1;
      __END__    </pre></td>
    </tr>
</table>



  <a name="310" id="310"></a>
  <h2>
      Perl SelfStubber

  </h2>




<p>
<p class="column8">
        If you're developing Perl modules, you can make it to use autoload
        interface. Module compiles much faster and it delays loading of
        functions until they are called. You can read about SelfStubber
        from the Module page <em class="word">Devel::SelfStubber.pm</em> which links to
        <em class="word">SelfLoader.pm</em>, which is (one file) to my opinion better
        autoload choice than <em class="word">Autoloader.pm</em> (splits file to many files by
        function)


<p class="column8">
        To use SelfStubber with this package, you need to arrange your
        module to read like below. Notice the &quot;BEGIN:&quot; and &quot;END:&quot;
        comment-tokens are for function <samp class="word">tinyperl-selfstubber-stubs</samp>,
        which will fill in the section with the right stubs.


<p class="column8">
        If you don't have &quot;BEGIN: Devel::SelfStubber&quot; and &quot;END:
        Devel::SelfStubber&quot; sections in your file, calling
        <samp class="word">tinyperl-selfstubber-stubs</samp> prints the found stubs in separate
        shell buffer.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      package MyClass;

      use Exporter;
      use SelfLoader;
      use vars qw( $VERSION @ISA @EXPORT @EXPORT_OK );

      @ISA    = qw(Exporter);

      @EXPORT = qw( .. );

      $VERSION = ..

      # BEGIN: Devel::SelfStubber

      # END: Devel::SelfStubber

      1;
      __DATA__

      &lt;implementation: functions and variables&gt;

      __END__    </pre></td>
    </tr>
</table>



  <a name="311" id="311"></a>
  <h2>
      Updating the VERSION variable

  </h2>




<p>
<p class="column8">
        If you plan to submit your perl module or program to the CPAN
        at <a href="http://cpan.perl.org/" >http://cpan.perl.org/</A> the upload criteria is that your file
        must have a version number. The traditional method has long
        used some version control software's number (those of CVS or
        RCS etc.), but it really doesn't tell much to the <em class="word">user</em>. It might
        tell something to the developer, but from user's point of view,
        he is much more interested in knowing when the file was
        last updated. The version number 2.77 may be two years old.


<p class="column8">
        Where is that variable used? The <em class="word">MakeMaker</em> perl module (that
        you use when making packages ready to CPAN upload) reads the
        first variable named VERSION and names your release according
        to it.


<p class="column8">
        Consider to use two version numbers: one for the release and
        one for the kit name. In order to <em class="word">MakeMaker</em> to pick up the
        version number for a kit (tar.gz release, that is, for the
        user), it must see a VERSION variable. You can store the
        (a) version control software's number at the beginning of file
        inside comments and the (b) release number to a perl variable.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      # @(#) $Id: emacs-tiny-tools-part2.src,v 1.8 2007/05/01 17:20:35 jaalto Exp $

      use vars qw ( $VERSION );

      #   This is for use of Makefile.PL and ExtUtils::MakeMaker
      #   So that it puts the tardist number in format YYYY.MMDD
      #   The REAL version number is defined later
      #
      #   The following variable is updated by Emacs setup whenever
      #   this file is saved

      $VERSION = '2007.0909';    </pre></td>
    </tr>
</table>


<p class="column8">
        If the VERSION variable uses number format NNNN.NNNN, then it
        is assumed to contain ISO 8601 date YYYY.MMDD and this package
        will update the <samp class="word">$VERSION</samp> variable's date every time file is
        saved (see <samp class="word">write-file-hooks</samp> and <samp class="word">tinyperl-version-stamp</samp>).



  <a name="312" id="312"></a>
  <h2>
      Submitting your perl script to CPAN

  </h2>




<p>
<p class="column8">
        In addition to archiving your Perl <em class="word">libraries</em> to CPAN, you can also
        submit perl <em class="word">scripts</em> there. In order to get your submission right
        refer to page:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      <a href="http://www.perl.com/CPAN-local//scripts/submitting.html" >http://www.perl.com/CPAN-local//scripts/submitting.html</a>    </pre></td>
    </tr>
</table>


<p class="column8">
        The most important point is that your script includes pod that
        describes your script. It must contain at minimum the headings
        README, SCRIPT CATEGORIES, COREQUISITES, OSNAMES which are already
        included in the default pod skeleton via command

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      `tinyperl-pod-write-skeleton-script-manpage'    </pre></td>
    </tr>
</table>


<p class="column8">
        Here is code that that can be used in Perl programs to print out
        the pod documentation when --help option is requested (Use
        Getop::Long.pm). The code works for both Win32 and Unix Perl
        implementations. The variable $LIB identifies the &quot;group&quot; where the
        function belongs, in this case it is program, while it could have
        been a Perl library module too. You set global $LIB variable at the
        beginning of file with:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      use English
      use <a href="File::Basename" >File::Basename</a>;

      use vars qw( $LIB );
      $LIB = basename $PROGRAM_NAME;    </pre></td>
    </tr>
</table>


<p class="column8">
        Here is the help function written with POD (perl 5.004 or higher)

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      &lt;  Create this Help() function banner with mode key           &gt;
      &lt;  C-c . f   or `tinyperl-pod-write-skeleton-script-function' &gt;

      # ***************************************************************
      #
      #   DESCRIPTION
      #
      #       Print help and exit.
      #
      #   INPUT PARAMETERS
      #
      #       $msg        [optional] Reason why function was called.-
      #
      #   RETURN VALUES
      #
      #       none
      #
      # ***************************************************************

      =pod

      &lt; This part: appears after you have called                  &gt;
      &lt; C-c . m  or  `tinyperl-pod-write-skeleton-script-manpage' &gt;

      =cut

      sub Help (;$)
      {
          my $id  = &quot;$LIB.Help&quot;;
          my $msg = shift;  # optional arg, why are we here...

          pod2text $PROGRAM_NAME;

          print $msg if $msg;

          exit 1;
      }    </pre></td>
    </tr>
</table>

<hr>
               <a name="313"  id="313"></a>
               <h1>
               Tinyprocmail.el --- Emacs procmail minor mode. Lint code checker.

               </h1>



  <a name="314" id="314"></a>
  <h2>
      Preface, Sep 1997

  </h2>




<p>
<p class="column8">
        Procmail may revolutionize your daily email management. If
        receive 10-25 Spam messages per week, you may start to wonder if there
        automatic way to handle mail, so that Spam never lands on your
        inbox, $MAIL. Procmail is the answer. You can use it to pre-filter
        all mailing list messages without bloating the primary inbox. You
        may already use Gnus to read the mailing lists, but the mail
        splitting work is best handled by procmail. Why? Because procmail
        is always running, while your Emacs and Gnus isn't. Procmail
        processes incoming messages as soon as they are received and takes
        care of them, like forwarding those UBE messages to appropriate
        postmasters, if you had written such recipe to your $HOME/.procmailrc



  <a name="315" id="315"></a>
  <h2>
      What is Procmail?

  </h2>




<p>
<p class="column8">
        <span class="word-ref">[Excerpted from the procmail faq]</span> Procmail is a mail processing
        utility, which can help you filter your mail; sort incoming mail
        according to sender, Subject line, length of message, keywords in
        the message, etc; implement an ftp-by-mail server, and much more.
        Procmail is also a complete drop-in replacement for your MDA. (If
        this doesn't mean anything to you, you don't want to know.)
        Learn more about procmail at <a href="http://www.procmail.org/" >http://www.procmail.org/</A>



  <a name="316" id="316"></a>
  <h2>
      Some terms

  </h2>




<p>
<p class="column8">
        <span class="word-ref">[Excerpted from the Email Abuse FAQ]</span>


<p class="column8">
        <strong class="word">UBE</strong> = Unsolicited Bulk Email.<br>
        <strong class="word">UCE</strong> = (subset of UBE) Unsolicited Commercial Email.<br>


<p class="column8">
        <strong class="word">Spam</strong> = Spam describes a particular kind of Usenet posting (and
        canned spiced ham), but is now often used to describe many kinds of
        inappropriate activities, including some email-related events. It
        is technically incorrect to use &quot;spam&quot; to describe email abuse,
        although attempting to correct the practice would amount to tilting
        at windmills



  <a name="317" id="317"></a>
  <h2>
      Overview of features

  </h2>



<p>
<ul>
	<li>Minor mode for writing Procmail recipes (use tab for indenting)
<li>Linting procmail code: From batch command line or
            interactively. In interactive mode yuser can auto-correct code
            on the fly. Linting performance is about 160 recipes in 15 seconds.
	</li>
<li>Font-lock supported.
	</li>
<li>files that have extension .rc or name .procmailrc trigger
            turning on <samp class="word">tinyprocmail-mode</samp> (By using <samp class="word">auto-mode-alist</samp>). Please
            check that the first line does not have anything that would
	            override this, like &quot;-*- text -*-&quot;.</li>
</ul>




<p class="column8">
        Quick reference

<ul>
	<li>M-x <samp class="word">tinyprocmail-mode</samp> toggles Procmail writing mode
<li>        C-c ' L  to Lint whole buffer interactively
	</li>
<li>C-u     C-c ' L  to Lint whole buffer and gathers info.
	<li>C-u C-u C-c ' L, same as above, but be less pedantic.</li>
</ul>




<p class="column8">
        Required packages

<ul>
	<li>tinylib*.el     all lisp libraries
<li>tinytab.el      General programming mode. TAB key handling
	</li>
<li>tinymy.el       Aligning \ continuation chars to the right
	<li>tinycompile.el  General parser for compile output. See Lint.</li>
</ul>





  <a name="318" id="318"></a>
  <h2>
      Writing the procmail code

  </h2>




<p>
<p class="column8">
        The coding functions are provided by other modules. The tab key
        advances 4 characters at a time, and minimalistic brace alignment
        is supported when you press tab before the ending brace.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      TAB     tinytab-tab-key                         tinytab.el    </pre></td>
    </tr>
</table>


<p class="column8">
        The RET autoindents, but this can be turned off by calling

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      C-c ' RET   tinytab-return-key-mode    </pre></td>
    </tr>
</table>


<p class="column8">
        Whole regions can be adjusted with commands

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      C-TAB   tinytab-indent-by-div-factor         --&gt;
      A-S-TAB tinytab-indent-by-div-factor-back    &lt;--
      C-c TAB tinytab-indent-region-dynamically    &lt;--&gt;    </pre></td>
    </tr>
</table>


<p class="column8">
        Jumping to matching brace or matching parentheses

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      %               tinymy-vi-type-paren-match    </pre></td>
    </tr>
</table>



  <a name="319" id="319"></a>
  <h2>
      Tabs and spaces

  </h2>




<p>
<p class="column8">
        When the procmail mode is active, the tab key does not produce a
        tab character, but sufficient amount of spaces. There is a reason
        for this, mostly due to Lint parser which has to move up and down
        columnwise when checking the code. The movements can't be done if
        the code includes tabs. If you need a literal tab in your regexps,
        you can get it with standard emacs way 'C-q` <samp class="word">TAB</samp>.



  <a name="320" id="320"></a>
  <h2>
      Aligning the lines that have backslashes.

  </h2>




<p>
<p class="column8">
        In procmail, you use backslashes a lot, like in the following example.
        The backslashes here are put after each line, but this construct is
        error prone, because if you later on add new <samp class="word">echo</samp> commands or
        otherwise modify the content, you may forget to update the
        backslashes.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      :0 fh
      * condition
      | (formail -rt | \
         cat -; \
         echo &quot;Error: you requested file&quot;; \
         echo &quot;that does not exist&quot;;\
         ) | $SENDMAIL -t    </pre></td>
    </tr>
</table>


<p class="column8">
        To fix this code block, you can use command C-c ' \ or
        <samp class="word">tinyprocmail-fix-backslashes-region</samp>. It would have been enough to write
        the <strong class="word">first</strong> backslash and then call C-c ' \ and the rest of the
        backslashes would have been added below the same cloumn.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      :0 fh
      * condition
      | (formail -rt |                                    \
         cat -;                                           \
         echo &quot;Error: you requested file&quot;;                \
         echo &quot;that does not exist&quot;;                      \
         ) | $SENDMAIL -t    </pre></td>
    </tr>
</table>



  <a name="321" id="321"></a>
  <h2>
      Rules on how to write Procmail recipe

  </h2>




<p>
<p class="column8">
        In order to use the linting service, This package requires that
        you write your procmail code in following manner. These rules are
        needed, so that it would be possible to parse the procmail code
        efficiently and more easily.


<p class="column9"><strong>
         <span class="word-ref">[recipe start]</span></strong>


<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      :   # (old way) although legal procmail, illegal here. Use :0    </pre></td>
    </tr>
</table>


<p class="column9"><strong>
         <span class="word-ref">[flag order]</span></strong>



<p class="column8">
        In order to autocorrect read flags from the buffer, the flag order
        must be decided: and here is the de facto order. The one presented
        in the procmail man page &quot;HBDAaEehbfcwWir&quot; is errourneous, because
        flags &quot;aAeE&quot; must be first, otherwise it causes error in procmail
        (heresay). The idea here is that the most important flags are
        put to the left, like giving priority 1 for <samp class="word">aAeE</samp>, which affect
        the receipe immedately. Priority 2 has been given to flag <samp class="word">f</samp>,
        which tells if receipe filters somthing. Also (h)eader and (b)ody
        should immediately follow <samp class="word">f</samp>, this is considered priority 3.
        In the middle there are other flags, and last flag is <samp class="word">c</samp>, which
        ends the receipe, or allows it to continue.&quot;

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      :0 aAeE HBD fhbwWirc: LOCKFILE
         |    |   |  |   |
         |    |   |  |   (c)ontinue or (c)opy flag last.
         |    |   |  (w)ait and Other flags
         |    |   (f)ilter flag and to filter what: (h)ead or (b)ody
         |    (H)eader and (B)ody match, possibly case sensitive (D)
         The `process' flags first. Signify (a)ad or (e)rror
         receipe.    </pre></td>
    </tr>
</table>


<p class="column8">
        Every recipe starts with <samp class="word">:0</samp> <samp class="word">flags:</samp>, but if you prefer <samp class="word">:0flags:</samp>
        more, you can use following statement. This 'flag-together (or not)
        format is automatically retained when everytime you call lint.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (setq tinyprocmail-:flag-and-recipe-start-style 'flags-together)    </pre></td>
    </tr>
</table>


<p class="column9"><strong>
         [lockfile]</strong>



<p class="column8">
        The lockfile names must be longer than two characters. Shorter
        lockfile name trigger an error. Also lockfile must have extension
        $LOCKEXT or .lock or .lck; no other non-standard extensions are
        allowed. The lockfile name must be within charsert [-_$.a-zA-Z0-9/]
        and anything else is considered as an odd lock file name.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      :0 : c          # Error, should this read :0 c: instead?
      :0 : file       # Invalid, should read &quot;file.$LOCKEXT&quot;
      :0 : file.tmp   # Invalid, non-standard extension.
      :0 : file=0     # Invalid filename (odd characters in name)    </pre></td>
    </tr>
</table>


<p class="column9"><strong>
         <span class="word-ref">[condition line]</span></strong>


<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      * H B ?? regexp # valid procmail, llegal here: write &quot;HB&quot;    </pre></td>
    </tr>
</table>


<p class="column9"><strong>
         [Variables]</strong>



<p class="column8">
        The literal value on the right-hand side must be quoted with double
        quotes if a simple string is being assigned. If there is no quotes or
        backticks, then Lint assumes that you forgot to add variable
        dollar($). Try to avoid extra spaces in the variable initialisation
        construct too <samp class="word">:-</samp>.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      DUMMY  = yes        # Warning, did you mean DUMMY = $yes
      VAR    = ${VAR:-1}  # No spaces allowed: &quot;$ {&quot; is illegal.    </pre></td>
    </tr>
</table>


<p class="column9"><strong>
         <span class="word-ref">[program names]</span></strong>



<p class="column8">
        Program <samp class="word">sendmail</samp> must be named sendmail, but it can also be variable
        $SENDMAIL. Similarly, program <samp class="word">formail</samp> must be named <samp class="word">formail</samp> or
        it can be variable $FORMAIL. Use of $MY_SENDMAIL or $MY_FORMAIL are
        illegal and cause missing many lint checks.


<p class="column9"><strong>
         <span class="word-ref">[commenting style]</span></strong>



<p class="column8">
        In recent procmail releases you're allowed to place comments inside
        condition lines. Lint will issue a warning about this practise
        if your procmail version does not support this. But while you
        may place comments inside conditions, they should be indented by
        some amount of spaces. The default indent is 4 spaces.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      * condition1    --&gt; * condition
      # comment               # comment
      # comment               # comment
      * condition2        * condition    </pre></td>
    </tr>
</table>


<p class="column8">
        This is recommended for readability (separating conditions
        from comments) and Lint will fix these comment misplacements.


<p class="column9"><strong>
         <span class="word-ref">[redirecting to a file]</span></strong>



<p class="column8">
        If you print something to file, then the shell redirection tokens
        &gt; and &gt;&gt; must have surrounding spaces, otherwise they are not
        found in the procmail code. (because &gt; can be used in regexps)

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      :0 :
      | echo &gt; test.tmp       # Do not use &quot;echo&gt;test.tmp&quot;    </pre></td>
    </tr>
</table>



  <a name="322" id="322"></a>
  <h2>
      Linting procmail code

  </h2>




<p>
<p class="column8">
        Writing procmail recipes is very demanding, because you have to
        watch your writing all the time. Forgetting a flag or two, or adding
        unnecessary flag may cause your procmail code to work improperly.
        The Lint interface in this module requires that

<ul>
	<li>You write your procmail code in certain way. (see above)
<li>buffer is writable and can be modified. This is due
            to fact that program moves up and down to the same column
            as previous or next line. In order to make such movements,
	            the tabs must be expanded when necessary.</li>
</ul>




<p class="column8">
        To help <em class="word">Linting</em> you procmail code, there are two functions

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      C-c ' l         tinyprocmail-lint-forward
      C-c ' L         tinyprocmail-lint-buffer    </pre></td>
    </tr>
</table>


<p class="column8">
        These functions check every recipe and offer corrective actions if
        anything suspicious is found. If you don't want to correct the
        recipes, you can pass prefix argument, which gathers Lint run
        to separate buffer. In parentheses you see the buffer that was
        tested and to the right you see the program and version number.
        In this buffer you can press Mouse-2 or RET to jump to the line.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      *** 1997-10-19 19:37 (pm-test.rc) tinyprocmail.el 1.10
      cd /users/foo/pm/
      pm-test.rc:02: Error, Invalid or extra flags.
      pm-test.rc:10: Error, Invalid or extra flags.
      pm-test.rc:10: info, Redundant `Wc:' because `c:' implies W.
      pm-test.rc:11: String `&gt;' found, recipe should have `w' flag.
      pm-test.rc:15: info, flag `H' is useless, because it is default.    </pre></td>
    </tr>
</table>


<p class="column8">
        The output buffer can be sorted and you can move between blocks
        with commands

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      sl      tinyprocmail-output-sort-by-line
      se      tinyprocmail-output-sort-by-error
      b       tinyprocmail-output-start
      e       tinyprocmail-output-end    </pre></td>
    </tr>
</table>



  <a name="323" id="323"></a>
  <h2>
      Lint: auto-correct

  </h2>




<p>
<p class="column8">
        In many cases the Lint functions are able to autocorrect the code:
        answer <samp class="word">y</samp> to auto-correct current point. If you want to correct
        the place yourself, then abort the Linting with <samp class="word">C-g</samp> and fix the
        indicated line.



  <a name="324" id="324"></a>
  <h2>
      Lint: directives

  </h2>




<p>
<p class="column8">
        Most of the time the Lint knows what is best for you, but there
        may be cases where you have very complex procmail code and you
        know exactly what you want. Here are the Lint directives that you
        can place immediately before the recipe start to prevent Lint
        from whining. The word <samp class="word">Lint:</samp> can have any number of surrounding
        spaces as long as it is the first word after comment.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      # Lint: &lt;Lint flags here&gt;
      :0 FLAGS    </pre></td>
    </tr>
</table>


<p class="column8">
        The comment must be in the previous line, the following is <strong class="word">not</strong>
        recognized.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      # Lint: &lt;Lint flags here&gt;
      #   I'm doing some odd things here and ....
      :0 FLAGS    </pre></td>
    </tr>
</table>


<p class="column8">
        Here is list of recognized Lint directives. each directive must have
        leading space.

<ul>
	<li><samp class="word">-w</samp>. In &quot;|&quot; recipe, ignore exit code. If you don't give
            this directive, the missing &quot;w&quot; flag is suggested to put there.
<li><samp class="word">-i</samp>. If you have recipe that, 1) has no &quot;f&quot;  2) has nt &quot;&gt;&quot;
            3) has &quot;|&quot; action, then the recipe doesn't seem to store
            the stdin anywhere. This may be valid case e.g. if you use
            MH's rcvstore. You can suppress the &quot;-i&quot; flag check with
            this directive.
	</li>
<li><samp class="word">-c</samp>. This is used in conjunction with <samp class="word">-i</samp> when you only
            do something as a side effect and you reaally don't want to use
	            (c) copy flag.</li>
</ul>





  <a name="325" id="325"></a>
  <h2>
      Lint: error messages

  </h2>




<p>
<p class="column8">
        The error messages should be self-explanatory, but if you don't
        understand the message, please refer to <em class="word">pm-tips.txt</em> file available
        from main procmail site.


<p class="column8">
<span class="quote7">info, backticks in var init. Not a recommended practise</span><br>
        See <samp class="word">pm-tips.txt</samp> and section that talks about variable definitions.



  <a name="326" id="326"></a>
  <h2>
      Lint: batch mode from command line

  </h2>




<p>
<p class="column8">
        You can also lint the procmail files from command line prompt
        like this. (You must have Emacs 19.30+ which has working -eval)

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
          % emacs -batch -q -eval                                     \
             '(progn (load &quot;cl&quot;) (push &quot;~/elisp&quot; load-path)           \
              (load &quot;tinyprocmail&quot; )                                        \
              (find-file &quot;~/pm/pm-test.rc&quot;)                           \
              (tinyprocmail-lint-buffer-batch)                                \
              ) '    </pre></td>
    </tr>
</table>


<p class="column8">
        Change the filename &quot;~/pm/pm-test.rc&quot; to the file being linted.
        The Lint results will appear in file <samp class="word">tinyprocmail-:lint-output-file</samp> which
        is ~/pm-lint.out by default. Below you see a shell script to run
        the above command more easily. Rip code with <samp class="word">ti::package-rip-magic</samp>

 #!/bin/csh -f
 # @(#) pm-lint.sh &ndash; LINT A procmail batch lint with emacs tinyprocmail.el
 #
 # $Docid: 2002-01-30 Jari Aalto $
 #
 set file  = $1
 #
 set EMACS = xemacs-19.14
 set out   = $HOME/pm-lint.lst
 #
 #  notice all these 3 lines must be concatenaed together! There must be
 #  no \ continuation characters. to the right.
 #
 $EMACS -batch -q -eval
     '(progn (load &quot;cl&quot;) (push &quot;~/elisp&quot; load-path) (load &quot;tinyprocmail&quot;)
     (find-file &quot;'&quot;$file&quot;'&quot;) (tinyprocmail-lint-buffer-batch) ) '  2&gt;&amp;1 $out
 #
 # end of pm-lint.sh




  <a name="327" id="327"></a>
  <h2>
      Highlighting

  </h2>




<p>
<p class="column8">
        Just couple of words about the chosen regexps for procmail code.
        Notice, that if you make a mistake, the dollar($) in front of
        identifier is not highlighted. This should help with spotting
        errors by eye better.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      $VAR = ${VAR:-&quot;no&quot;}     # Error, extra $ to the left.
       ===    </pre></td>
    </tr>
</table>

<hr>
               <a name="328"  id="328"></a>
               <h1>
               Tinyreplace.el --- Handy query-replace, area, case preserve, words

               </h1>



  <a name="329" id="329"></a>
  <h2>
      Preface 1995

  </h2>




<p>
<p class="column8">
        I saw post in gnu.emacs.help where brianp@ssec.wisc.edu (Brian Paul)
        asked for help to replace his C variables: &quot;Suppose I want to
        replace all occurances of the variable i in my C program with j.&quot;
        The normal emacs function query-replace wasn't suitable for this
        task because it offered too many false hits. (Guess how many i
        characters are used in non-variable context!).


<p class="column8">
        Well later I rembered that one could have used \bi\b to search
        words. But the nature of &quot;word&quot; is very different here as it
        would have been with \b, which relies on syntax table which you
        seldom want to change, whilst the &quot;word definition &quot; here can be
        changed on the fly. (Remember that \bi\b still matches entries
        like &quot;i.here&quot; where you would want to match only plain &quot;i&quot;)


<p class="column8">
        Things are not that simple always, in fact, the first
        implementation of this package had to do with the latex math
        equation replace, so that program would automatically skip over
        normal text and perform replace within the blocks only. I think
        the engine offers lots of other usages too.


<p class="column8">
        I decided to pull out the v1.0 and make it a complete package,
        so here you are folks.



  <a name="330" id="330"></a>
  <h2>
      Overview of features

  </h2>



<p>
<ul>
	<li>Companion to emacs's query-replace. Simple interface.
<li>Text beeing replaced is highlighted AND terminals that cannot see
            the highlight will see &quot;=&gt;&quot; string marking the line beeing
            processed
	</li>
<li>Preserve case while replacing &quot;FoO&quot; --&gt; &quot;BaR&quot; (symmetry)
	</li>
<li>Toggle case sensitivity and symmetry during the replace.
	</li>
<li>Word match mode on/off during replace: 'matchTHIS or THIS '
	</li>
<li>&quot;Narrow to function&quot;, go to &quot;beg of file&quot; when you start
            replacing. You're put back to position where you were when
            you quit.
	</li>
<li>Can replace over many files. (Reads compile buffer output)
            ChecksOut files from RCS when needed (if they are not locked)
	</li>
<li>You can define <samp class="word">tinyreplace-exlude-line-regexp</samp> that skips any line
	            matching looking-at regexp at the beginning of line.</li>
</ul>





  <a name="331" id="331"></a>
  <h2>
      How to use

  </h2>




<p>
<p class="column8">
        If you know lisp, you can go and take straight advantage of the
        engine function:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      tinyreplace-replace-region-1    </pre></td>
    </tr>
</table>


<p class="column8">
        Normally functions work within area defined by you, but
        there is 'applications' section which offers several ready to run
        functions for various needs:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      tinyreplace-replace-region     ;like query replace but in selected area
      tinyreplace-replace-forward    ;start from current point.

      tinyreplace-latex-blk-replace  ;replacer text surrounded by latex BLOCKS
      tinyreplace-latex-math-replace ;replace text within latex
                                     ;math equations only.    </pre></td>
    </tr>
</table>



  <a name="332" id="332"></a>
  <h2>
      What commands do I have while replacing interactively?

  </h2>




<p>
<p class="column8">
        There is some handy commands that normal emacs replace lacks

<ul>
	<li>toggle case sensitivity during replace
<li>toggle symmetry during replace (one to one char case replace)
	</li>
<li>Go to start of buffer <strong class="word">now</strong> (return back when you exit replace)
	</li>
<li>search backward
	</li>
<li>limited undo
	</li>
<li>Narrow to current function, so that you can replace local variables
	</li>
<li>Flash function name where you're (only for some programming
	            languages.)</li>
</ul>




<p class="column8">
        See function tinyreplace-replace-region-1 for command explanation.  To
        abort the search, you just press Ctrl-g or 'Q' and you'll be
        returned to the starting point of search.



  <a name="333" id="333"></a>
  <h2>
      Command line prompt explanation

  </h2>




<p>
<p class="column8">
        The command line prompt will look like this

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      Replace 'xx' with 'yy' (a,bvuBFNU? [+CSX] !ynqQ)    </pre></td>
    </tr>
</table>


<p class="column8">
        Where the flag settings active are displayed between brackets.  +
        means that you have used (N)arrow command, C indicates case
        sensitivity, S tells that symmetry is activated and X means that
        line exclude is oboeyed. For full explanation of the commands,
        please press


<p class="column11">
           ?


<p class="column8">
        Which will print the command summary and explanation momentarily.



  <a name="334" id="334"></a>
  <h2>
      Special commands in command line

  </h2>




<p>
<p class="column8">
        When you edit the Seach string or destination string, there is
        some keys that you can use.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      C-l     Yank the text under point to current prompt
      C-o     Yank previous SRING1    </pre></td>
    </tr>
</table>


<p class="column8">
        The Yank command is <samp class="word">C-l</samp> not <samp class="word">C-y</samp>, because if you edit and kill
        inside the promt line, you can use regular <samp class="word">C-y</samp> to yank text
        back. The <samp class="word">C-l</samp> command reads a space separated text from the buffer and
        pastes it into the prompt for editing.


<p class="column8">
        The <samp class="word">C-o</samp> command yanks the SEARCH string to the prompt. It comes
        handy if you used <samp class="word">C-l</samp> to yank the initial search string, edited
        yanked text and wanted to share it in the next prompt. This way you
        don't have to do the editing again, but only modify the previous
        string. To pick right word (Yank <samp class="word">C-l</samp>) from the buffer, when you
        don't have have mouse, you can use following keys. Text to the left
        shows you briefly where the point currenly is.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      &lt;           Moves buffer's point backward
      &gt;           Moves buffer's point forward    </pre></td>
    </tr>
</table>


<p class="column8">
        This feature propably is at its best in a compile buffer where you
        have grep results and you draw region around the the files where
        you want the replace to happen. Move a little with [&lt;&gt;] and you
        will be soon in a line that has the grep word, then yank it to the
        replace prompt.



  <a name="335" id="335"></a>
  <h2>
      Note about the arrow pointer

  </h2>




<p>
<p class="column8">
        Terminals that do not have highlight capability to see which portion of
        text will be replaced will appreciate the arrow at the beginning of
        line to show where the text is located.


<p class="column8">
        The option &quot;a&quot; that refreshes the arrow marker is <em class="word">forced</em> to ask a
        minibuffer question in order to change the state of arrow (hide or
        show). I found no other way to do this and I think it's a bug in
        19.28 emacs, because the state is not immediately shown in buffer.


<p class="column8">
        Drop me a mail if you know how to do the updating without using the
        extra <samp class="word">read-from-minifuffer</samp> &quot;Refresh arrow..&quot; question.



  <a name="336" id="336"></a>
  <h2>
      Note about commands

  </h2>




<p>
<p class="column8">
        The commands are hard wired in this module and you cannot add new
        ones as you can in replace.el which is minor-mode based.  This
        package is meant to be companion to replace.el, and for that reason
        the interface has been designed to be as simple as possible without
        any additional modes.


<p class="column8">
        If you need some new command, please mail author directly.
        There is no plan to convert this module to minor mode.


<hr>
               <a name="337"  id="337"></a>
               <h1>
               Tinyrmail.el --- RMAIL add-ons, pgp, mime labels, Spam complaint.

               </h1>



  <a name="338" id="338"></a>
  <h2>
      Preface, overview of features

  </h2>




<p>
<p class="column8">
        1998-01: I no longer use RMAIL, but Gnus, and support for this
        module is questionable. If you're using RMAIL or considering using
        it, please strongly think if you could use <samp class="word">Gnus</samp> instead. I've
        written another module <em class="word">tinygnus.el</em> whehre I can provide better
        support than for this on.

<ul>
	<li>Detect PGP, MIME mail and label incoming messages accordingly.
            User can add more checking functions and labels to incoming email
            messages
<li>New label summary cmd with AND e.g. finding {pgp,v} verified pgp
	</li>
<li>Flag incoming mail as deleted by regexp.
	</li>
<li>&quot;S&quot; command for Spam message reply.
	</li>
<li>Commands to fix your RMAIL messages.
	</li>
<li>advice: &quot;n&quot; and &quot;p&quot; do not to auto display msg in Summary buffer
	</li>
<li>advice: mouse click in Summary does not automatically update msg
	<li>advice: <samp class="word">rmail-ignored-headers</samp> now reformats old messages too.</li>
</ul>





  <a name="339" id="339"></a>
  <h2>
      Description

  </h2>




<p>
<p class="column8">
        This little package offers some autmatic detection of PGP
        MIME  mails: It attaches labels to your incoming mails.
        There is also new summary function, which enables you to
        make a query by ANDing the labels in your RMAIL.


<p class="column8">
        This means, that you can now classify your message, like this:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      BASE
      SUBSET-IDENTIFIER
            MINOR-IDENTIFIER
               NOTE-IDENTIFIER    </pre></td>
    </tr>
</table>


<p class="column9"><strong>
         Eg. For PGP mails I have</strong>


<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      {pgp}
      {pgp,v}         -- verified signature
      {pgp,u}         -- not verified
      {pgp,v,e}       -- verified and encrypted    </pre></td>
    </tr>
</table>


<p class="column8">
        The normail rmail's summary function gives you the OR summary, which
        would mean, that if you wanted symmary by {pgp,v}, it would give
        you all mail that has either {v} or {pgp} somewhere. Well, this
        summary is not suitable if you use one CHAR to denote attributes
        of your base-identifiers (multichar)



  <a name="340" id="340"></a>
  <h2>
      Automatic deletion of incoming mail

  </h2>




<p>
<p class="column8">
        There is default function to mark messages as deleted according
        to regexp. Please configure this variable to suit your needs:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      tinyrmail-:delete-regexp    </pre></td>
    </tr>
</table>


<p class="column8">
        If you want more personal control whether the mail
        should be deleted or not, please remove the default delete function
        and add your own:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (add-hook 'tinyrmail-:load-hook 'my-tinyrmail-:load-hook)

      (defun my-tinyrmail-:load-hook ()
        &quot;Cancel some default settings and modify parameters.&quot;
        (remove-hook 'tinyrmail-:get-new-mail-hook
                     'tinyrmail-delete-function)
        (add-hook    'tinyrmail-:get-new-mail-hook
                     'my-rmail-delete-function))


      (defun my-rmail-delete-function ()
       ...)    </pre></td>
    </tr>
</table>



  <a name="341" id="341"></a>
  <h2>
      Replying to UBE aka spam messages

  </h2>




<p>
<p class="column8">
        The spamming has become a very serious promlem in private
        email communication. Not only the spammers send mail to newsgroups,
        but they are harrashing private mailboxes as well.


<p class="column8">
        With this package you can send reply to a spammer and complaint
        to all postmasters that have allowed the spam mail to travel through
        their networks. The addresses are parsed from the Received headers
        of the message and verified by <samp class="word">nslookup</samp>. ou can turn off the
        nslookup if you wasn't faster response, but this may result
        bounched messages back to you.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (setq tinyrmail-:ube-use-nslooup t)    </pre></td>
    </tr>
</table>


<p class="column8">
        So that you don't sned complaint to your local admin and not to
        some other known middleman domain (like forwarding service), you
        shoul also set following variable to regular expression to reject
        some addresses:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (setq tinyrmail-:ube-ignore-site-regexp
            &quot;YOUR-SITE\\|155\\.0\\.233&quot;)    </pre></td>
    </tr>
</table>


<p class="column8">
        The text to the beginning of message is read from file pointed
        by <samp class="word">tinyrmail-:ube-message-file</samp>.



  <a name="342" id="342"></a>
  <h2>
      New commands in RMAIL

  </h2>




<p>
<p class="column8">
        Refer to function tinyrmail-define-default-keys for exact setup.
        Currently the only new command added is

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      &quot;L&quot; tinyrmail-rmail-summary-by-labels-and
      &quot;U&quot; tinyrmail-ube-send-to-postmasters
          UBE = Unsolicited Bulk Email    </pre></td>
    </tr>
</table>



  <a name="343" id="343"></a>
  <h2>
      Fixing RMAIL format

  </h2>




<p>
<p class="column8">
        Sometimes you may get following error after you have hit &quot;g&quot;
        to get new mail: &quot;Cannot convert to babyl&quot;. The reason for
        this behavior is still not quite clear to me, but the cause
        is in the incoming message that does not have

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      From    </pre></td>
    </tr>
</table>


<p class="column8">
        Field at the beginning of message. I have seen even some garbage
        Prepended to field so that it looked like

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      m?From    </pre></td>
    </tr>
</table>


<p class="column8">
        What have to start editing the RMAIL file directly to fix its
        format. Change the mode to text-mode, run M-x widen and search the
        last message that rmail was not able to read. You will easily find the
        point where &quot;*<em class="word">*</em> EOOH&quot; markers do not appear any more.


<p class="column8">
        Now starts the fixing part to make rmail happy again:

<ul>
	<li>Make sure From line is left flushed. Edit if needed and put
            lines in their right places.
<li>Select all individual message's headers at a time.
	</li>
<li>Call function tinyrmail-fix-make-rmail-message-header
            which you should propably bound to some convenient key.
            The ESC-z combination is propably free for temporary use.
	            (local-set-key &quot;\ez&quot; 'tinyrmail-fix-make-rmail-message-header)</li>
</ul>




<p class="column8">
        After you have converted all headers to rmail format, you can
        start rmail again with command

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      M-x rmail-mode    </pre></td>
    </tr>
</table>


<p class="column8">
        If you made any mistakes, rmail will let you know and you have to
        repeat the header fixing again. (possibly removing the prevous
        EOOOH markers and reconverting them). We aren't quite finished
        yet. You see, on error, rmail leaves the read mail into your home
        directory. Please check that

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      ~/.newmail-USERNAME    </pre></td>
    </tr>
</table>


<p class="column8">
        file doesn't contain any new message that aren't already in your RMAIL
        buffer. If there is only old message, delete that file. Now we
        have finished and you can again use &quot;g&quot; to get new mail.



  <a name="344" id="344"></a>
  <h2>
      Standard Rmail distribution changes

  </h2>




<p>
<p class="column8">
        This package changes the standard Rmail distribution sligtly and here
        summary. If you want to disable these features or only use some of
        them, you have to put separate configuration to your .emacs.
        To disable forms:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (setq tinyrmail-:load-hook '(tinyrmail-install))    </pre></td>
    </tr>
</table>


<p class="column8">
        To disable advices, you do

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (setq tinyrmail-:load-hook '(tinyrmail-install my-tinyrmail-install))

      (defun my-tinyrmail-install ()
        (ti::advice-control
          '(rmail-show-message
            rmail-summary-enable
            rmail-summary-next-msg
            )
           &quot;^tinyrmail&quot;
           'disable
           ))    </pre></td>
    </tr>
</table>


<p class="column8">
        <samp class="word">tinyrmail-:forms-rmail</samp>

<ul>
	<li>Every time RMAIL package is loaded these forms are executed.
<li>These define some keybindings to summary buffer
            that I have found appropriate. Mouse-2 selects message
            (and does not yank as the original). RET key also selects message.
	</li>
<li>The post command hook is cleared so that you can search regexp
            in summary buffer. Normally moving a cursor would move the
            current message too.
	</li>
<li>The &quot;q&quot; quit key is too easily pressed and I have removed it
            alltogether. If I really want to quit RMAIL, I usually
	            quit Emacs too.</li>
</ul>




<p class="column8">
        Advices:


<p class="column8">
        <em class="word">rmail-show-message</em> active


<p class="column8">
        The message's headers are now always reformatted. If you change
        variable <samp class="word">rmail-ignored-headers</samp>, the old messages are not affected
        until you &quot;t&quot;oggle headers. This advice does it for you
        automatically every time you select message. This advice slows
        message displaying a bit, but for me, it isn't very noticeable.
        You can very well turn this off if you dont' change content of
        <samp class="word">rmail-ignored-headers</samp>.


<p class="column8">
        <em class="word">rmail-summary-enable</em> active


<p class="column8">
        This replaces whole function. The original function did automatic
        message update whenever you moved around summary buffer. Now you
        can keep summary buffer search separated from the current
        message displayed.


<p class="column8">
        <em class="word">rmail-summary-next-msg</em> active


<p class="column8">
        Same as above.



<hr>
               <a name="345"  id="345"></a>
               <h1>
               Tinyscroll.el --- Enable or disable auto-scroll for any buffer.

               </h1>



  <a name="346" id="346"></a>
  <h2>
      Preface, May 1996

  </h2>




<p>
<p class="column8">
        I was in the middle of testing one of my new packages which didn't
        quite work as I wanted, I was loading all the lisp files to see if
        it breaks. I watched the <em class="word">Message</em> buffer to fill with statements

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      Loading abbrev...
      Loading abbrev...done
      ...
      Loading rmail...
      loading rmail done...
      ...    </pre></td>
    </tr>
</table>


<p class="column8">
        But suddendly the emacs died. It kicked me off to the shell and I
        had no idea what package was the last one that got loaded.


<p class="column8">
        You see, the <em class="word">Message</em> buffer keeps growing, but you have to tap
        the pgDown key to get to the end, all the time. Instead I decided
        to pull out some lisp to do general auto-scrolling for any buffer,
        so that I can just sit back and watch the buffer move. No more
        guessing in <em class="word">Message</em> buffer what was the last message before Emacs
        sunk :-)



  <a name="347" id="347"></a>
  <h2>
      Overview of features

  </h2>



<p>
<ul>
	<li>Select buffer, and hit auto scroll on/off. You can scroll any
            buffer.
<li>All windows for the buffer are scrolled in all frames.
            If frame is miimized and contains window to sroll, frame will
            be maximized (&quot;popped up&quot;)
	</li>
<li>If buffer's point-max doesn't move, scroll is ignored.
	<li>Default scroll activated for: <em class="word">Compilation</em> <em class="word">Grep</em> and <em class="word">Messages</em></li>
</ul>





  <a name="348" id="348"></a>
  <h2>
      How to use this package

  </h2>




<p>
<p class="column8">
        The scroling here is based on timers, where the lowest interval can
        be one 1 second. This means that you don't get smooth and
        continuous scrolling, but regular update of the buffer, which may
        in rare cases seem jerky. However, using timers is the only
        possibility if we want to have general scroll utility for <em class="word">any</em> buffer.


<p class="column8">
        To enable/disable auto-scroll for current buffer, use these:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      M-x tinyscroll-control              ;to activate scroll
      C-u M-x tinyscroll-control  ;to deactivate scroll    </pre></td>
    </tr>
</table>



  <a name="349" id="349"></a>
  <h2>
      Lowest window of the same buffer always scrolls

  </h2>




<p>
<p class="column8">
        It is an interesting problem, when you have SAME buffer in multiple
        windows, to decide which window to scroll.  I didn't want to scroll
        all windows, since otherwise I wouldn't have used two/or more
        windows for the same buffer.


<p class="column8">
        I decided that the lowest window for the buffer always scrolls. You
        can't change that. This was a design decision and I won't support
        scrolling middle/upper buffers. Just arrange your windows so that
        the scrolling one goes to the bottom.


<hr>
               <a name="350"  id="350"></a>
               <h1>
               Tinysearch.el --- Grab and search word under cursor

               </h1>



  <a name="351" id="351"></a>
  <h2>
      Preface, 1994

  </h2>




<p>
<p class="column8">
        In 7 Nov 1994 <em><a href="mailto:aep@world.std.com" >aep@world.std.com</A></em> (Andrew E Page) posted
        interesting code by article name 'Script Example: Search for next
        word', which I took a look. The idea of code was excellent, but it
        didn't work as expected at all. Gradually the idea was crystallized
        into this package.


<p class="column10"><em class="quote10">
          &quot;Why we need search word package, when in emacs I can do <samp class="word">C-s</samp> to
          enter search mode: C-w C-w C-w to grap words immediately after
          point and finally C-s to start searching...?&quot;</em>



<p class="column8">
        Well, people tend to forget, that life was out there when 19.xx
        wan't in hands of developers. This package was originally made for
        18. The advantage of this package is the variable

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      tinysearch-:word-boundary-set    </pre></td>
    </tr>
</table>


<p class="column8">
        which you can easily change whenever you need (e.g. thru
        functions). To do the same in emacs, you have to go and modify the
        syntax entries involved...then come back again when you're done. I
        never do that, I seldom touch the syntax entries. Besides all
        mode-xxx go crazy if I would do so. Now you see the advantage?


<p class="column8">
        And of course I feel more comfortable to do just one keypress,
        like <samp class="word">f2</samp> to search forward instead of cubersome C-s C-w C-w
        C-w <span class="word-ref">[n times]</span> and finally C-s


<p class="column8">
        The prefix <samp class="word">tisw</samp> in variables and functions names means &quot;Tiny Search
        Word&quot;.



  <a name="352" id="352"></a>
  <h2>
      Description

  </h2>




<p>
<p class="column8">
        Grab word under oint and searches fwd/back. The word is inserted
        into Emacs's search ring, so that you can later continue with <samp class="word">C-s</samp>
        or with <samp class="word">C-r</samp> call.



  <a name="353" id="353"></a>
  <h2>
      Why doesn't it find my C++ function class::InitClass() ??

  </h2>




<p>
<p class="column8">
        User pressed the search function over the call:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      InitClass(;
      i =  i +1;    </pre></td>
    </tr>
</table>


<p class="column8">
        Now he can't find the function definition... Well, remember that
        this searches 'true' words, not part of them. A word is surrounded
        by at least one whitespace, since it's not a word if it is cat'd
        together with something else. Obviously the function definition
        didn't contain any spaces...


<p class="column8">
        The problem is, that if is you say ':' belongs to character set in C++,
        [because you propably want to grab variables easily.
        including the scope operator 'clss::variable' or '::global'] ,
        the find funtion expects to find word in boundary

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      nonWordWORDnonWord    </pre></td>
    </tr>
</table>


<p class="column8">
        And as you can see, the if ':' belongs to word, it can't
        simultaneously belong to NonWord !


<p class="column8">
        Summa summarum: Revert to emacs C-s for a moment, since the
        word is automatically added to the search buffer.



  <a name="354" id="354"></a>
  <h2>
      Word accept function note:

  </h2>




<p>
<p class="column8">
        There is variable <samp class="word">tinysearch-:accept-word-function</samp>, which has
        default function

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      tinysearch-accept-word    </pre></td>
    </tr>
</table>


<p class="column8">
        The function's purpose is to check if the searched word is
        accepted and that search should be terminated. Currently there it
        contains some programming logic for C/C++ languages, so that
        certain hits are ignored. Consider following case:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      struct *foo;   - 1
      foo-&gt;x;        - 2
      x-&gt;foo         - 3

      int foo, x;    - 4
      foo = x;       - 5        * start of 'foo' and 'x' search backward    </pre></td>
    </tr>
</table>


<p class="column8">
        C/C++ mode, searching for 'foo' finds 4,2,1  &ndash; Not 3
        C/C++ mode, searching for 'x'   finds 5,4,3  &ndash; Not 2
        But in text-mode, you would find all occurrances.


<p class="column8">
        The added logic to C++ ignores the struct's MEMBER matches so that
        you really can find the &quot;main&quot; variables. If you don't like
        this added feature, you can alwasy go to

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      M-x text-mode    </pre></td>
    </tr>
</table>


<p class="column8">
        For a while, or if want to permanently switch this feature off,
        you set the variable <samp class="word">tinysearch-:accept-word-function</samp> to nil, which
        causes all hits to be accepted.


<p class="column8">
        Needless to say, that you can use put your own checking
        function in that variable to control the accurrances better.



<hr>
               <a name="355"  id="355"></a>
               <h1>
               Tinytab.el --- Programmers TAB minor mode. Very flexible.

               </h1>



  <a name="356" id="356"></a>
  <h2>
      Preface, oct 1995

  </h2>




<p>
<p class="column8">
        There was a post in gnu.emacs.sources (what an source of
        inspiration), where someone asked:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      &quot;Is there anyway to reset the number of spaces that TAB does?
       Like, I want to make it jump four spaces instead of the
       usual whatever.How can I set the tabs to 4?&quot;    </pre></td>
    </tr>
</table>


<p class="column8">
        and the typical answer was:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      &quot;In .emacs, set the variable tab-stop-list, like so:
       (setq tab-stop-list (list 4 8 12 ...))&quot;    </pre></td>
    </tr>
</table>


<p class="column8">
        Well, A regular user does not want to touch the original
        <samp class="word">tab-stop-list</samp>, because the 8 spaces per tab is the norm. But for
        programming the 4 tabs is norm, like for shell programming or for
        simple memos and text documents. The goal was to write a minor
        mode, which you can turn on and off, which handles <strong class="word">only</strong> tab key.
        There also exists tinyindent.el, which is tab-alike mode too, but
        there is a subtle, but very important difference: it behaves
        according to previous lines, so its job is to &quot;line up&quot; with the
        previous text or code. Instead, this mode was supposed to be plain
        rigid. The tab goes where you want it, and you can control the
        amount of movement to either direction, back or forward.



  <a name="357" id="357"></a>
  <h2>
      Overview of features

  </h2>



<p>
<ul>
	<li>Programmable TAB. If you set the count to to 4,
            you can virtually program &quot;blindly&quot; without any other modes.
<li>Selectable: 2, 4, 8 .. space indent.
	</li>
<li>moving commands: tab-forward, tab-backward
	</li>
<li>modify commands: tab-insert, tab-delete
	</li>
<li>indent commands: tinytab-indent-by-tab-width, forward , backward
	<li>Simple Positioning of braces { } supported when TAB hit.</li>
</ul>




<p class="column8">
        Extras

<ul>
	<li>Special auto-indent function offered for return key,
            switch it on, and you can continue your shell,awk,perl comments...
<li>Press C-c TAB and your in constant indentation mode where
            keys &quot;wq&quot; &quot;as&quot; &quot;zx&quot; indent region &lt;--&gt; by 1,2 and 4 until
	            esc pressed.</li>
</ul>





  <a name="358" id="358"></a>
  <h2>
      What this package does?

  </h2>




<p>
<p class="column8">
        Mimic <samp class="word">tab-stop-list</samp> with minor mode if some analogy can be
        drawn. You only set one variable, that controls the amount of
        movement, whereas you would have to put many values inside
        <samp class="word">tab-stop-list</samp>. The variable for tab widths is:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      tinytab-:width-table    </pre></td>
    </tr>
</table>


<p class="column8">
        The advantage is, than you don't have to alter the <samp class="word">tab-stop-list</samp>
        at all. When the mode is off, the tabs are back again as they were
        (or as the other mode thinks how the tab should be) There is a
        little more than that: movement and deletion functions, that really
        make day shine when you program. They all operate according to the
        variable <samp class="word">tinytab-:width</samp>. Try out the functions

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      tinytab-indent-by-tab-width
      tinytab-indent-by-tab-width-back    </pre></td>
    </tr>
</table>


<p class="column8">
        to format region of code forward and backward easily. (This is
        different than using command indent-region) When you delete
        backward &quot;one indentation level&quot;, you can do it when the division
        factor is 2/4/8. The nearest column that satisfies the division
        factor is used when &quot;indenting back&quot;. See the example:


<p class="column8">
        Before:
            *             &lt;&lt; cursor here
        123 567 9012            &lt;&lt; columns, starting from 1


<p class="column8">
        After:
         *                &lt;&lt; cursor here, at div-factor compliant point
        123 567 9012            &lt;&lt; columns, starting from 1


<p class="column8">
        Don't forget to look at function

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      tinytab-change-tab-width    </pre></td>
    </tr>
</table>


<p class="column8">
        Which allows you to switch between 2, 4, 8, you name it, tabs
        widths with one key press during the curren tminor mode.



  <a name="359" id="359"></a>
  <h2>
      Major modes and this minor mode

  </h2>




<p>
<p class="column8">
        When you use some programming mode, say C++ mode, it usually
        provides function to indent the line right when you press tab key.
        If you then turn on this mode, you loose the mode specific
        indenting, because turning on minor mode overrides the underlying
        major mode bindings. There is included one simple function to deal
        with major modes: it preserves the original indenting style in some
        extent, so that you can use this minor mode and current major mode
        together. In variable <samp class="word">tinytab-:tab-insert-hook</samp> there is function
        <samp class="word">tinytab-tab-mode-control</samp> which looks at variable

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      tinytab-:mode-table    </pre></td>
    </tr>
</table>


<p class="column8">
        If the mode is listed in the table <strong class="word">and</strong> current point is at the
        beginning of line, then the line is handled by original major mode
        and not by this minor mode. This allows you to indent the line
        initially and then use normal tab indent within the current line
        according to this minor mode.


<p class="column8">
        However, this minor mode is normally meant to be used as turn
        on/off basis in such programming modes that indent lines when you
        pressing tab key. Current compatibility function
        <samp class="word">tinytab-tab-mode-control</samp> only allows you to get some flexibility
        when this mode is temporarily on. Bind this mode to some fast key
        which you can use to toggle this mode on/off when you need tab for
        a moment in programming modes. If you don't want any support to
        major modes, put following into your $HOME/.emacs

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (setq tinytab-:mode-table nil)    </pre></td>
    </tr>
</table>



  <a name="360" id="360"></a>
  <h2>
      Return key addition

  </h2>




<p>
<p class="column8">
        In this package there is also this little function which will
        make itself a must in no time:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      tinytab-return-key-mode   ;; I have bound this to C-c C-m    </pre></td>
    </tr>
</table>


<p class="column8">
        When the function is active, you can continue the ndentation from
        current position.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
                          // Comment here. Call C-c C-m...and press RET
                          // And it automatically indents here.    </pre></td>
    </tr>
</table>


<p class="column8">
        See variable

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      tinytab-:auto-indent-regexp    </pre></td>
    </tr>
</table>


<p class="column8">
        what line prefixes are &quot;copied&quot; along with the indented spaces.



  <a name="361" id="361"></a>
  <h2>
      Development note

  </h2>




<p>
<p class="column8">
        This package solely concerns TAB key. Nothing outside of it is
        counted. I have no intention to make this a full fledged
        programming mode, since there is <samp class="word">sh-mode</samp>, <samp class="word">ksh-mode</samp>, <samp class="word">perl-mode</samp>
        and many more for other languages. I almost added

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (make-variable-buffer-local 'tinytab-:width)
      (make-variable-buffer-local 'tinytab-:width-table)    </pre></td>
    </tr>
</table>


<p class="column8">
        But after thinking I decided not to add it to this package, since
        most of the time user is satisfied with the tab &quot;4&quot;, at least
        that's what I use mostly. And changing the width usually means
        a little flick of a finger to reach out the function

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      tinytab-change-tab-width    </pre></td>
    </tr>
</table>


<p class="column8">
        In very rare occasions one wants different tab widths in different
        buffers and in those cases you can add the lisp commands
        <samp class="word">make-variable-buffer-local</samp> to mode hooks or after <samp class="word">tinytab-:load-hook</samp>.


<hr>
               <a name="362"  id="362"></a>
               <h1>
               Tinytag.el --- Grep tags: show C++/Java/etc. syntax call while coding

               </h1>



  <a name="363" id="363"></a>
  <h2>
      Preface, overview of features

  </h2>



<p>
<ul>
	<li>Simple database searching, some analogue to emacs TAGS package.
            Databaseses are simple text files that are searched for matches.
<li>Flips databases easily to show the right data.
	</li>
<li>The Language's function call syntax is shown in the echo area
            when cursor is over an identifiable item.
	</li>
<li>Limitations: The function help info can only be 80 characters
            or as long as your minibuffer is wide. But you can keep the
            <em class="word">tinytag-output</em> buffer visible in another buffer to show all
            the information.
	</li>
<li>Unlimited extendability to any programming or other &quot;lookup&quot;
	            languages.</li>
</ul>




<p class="column8">
        Ready-to-use databases currently available:

<ul>
	<li>HP-UX/Netbsd C/C++ function database is included in this file
            and perl script to rip the function definitions from Unix manual
            pages.
<li>Perl script to generate databases from any
            Javadoc compliant pages (E.g full database from all
            JDK 1.2.2 pages) The Java database is not distributed
            because it takes over a Meg and generating one straight
	            from SUN Java /docs tree is trivial.</li>
</ul>





  <a name="364" id="364"></a>
  <h2>
      Story behind this package

  </h2>




<p>
<p class="column8">
        The word &quot;tag&quot; refers to famous tags package in emacs that allows
        you to browse your C/C++ code easily.


<p class="column8">
        Someone may be in the middle of c++ project at work and notice
        that he frequently consults the manual pages to find correct
        syntax for calling stdio.h functions. It's hard to remember
        them right every time. Time spent for reading manual pages may
        be considerable just to figure out what #include statements
        each function might require, and what type of parameters they
        need.


<p class="column8">
        No more. There must be a way out of this...


<p class="column8">
        If you have programmed in lisp, you propably know package called
        eldoc.el (get it fast if you haven't) by Noah Friedman
        <em><a href="mailto:friedman@prep.ai.mit.edu" >friedman@prep.ai.mit.edu</A></em>. It shows you the lisp function call
        arguments when your cursor is right over some function.


<p class="column8">
        What a cool tool! You never have to go to elisp info pages
        just to check what the function takes, and you don't have to
        pop up extra buffer with c-h f &lt;func&gt;. It's a real time saver.
        Similar keyword lookup feature culd be built for any
        programing. Since eldoc looked the lisp args from memory
        (emacs obarray, symbol storage), the other programming
        languages must use external reference files: databases.


<p class="column8">
        First, all C/C++ function syntaxes were extracted out of the
        man pages with small perl program. The final output after
        ripping all the 3C man pages loooked like this. The output
        is put under database 'c++-functions'

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      &lt;dirent.h&gt; dir *opendir(const char *dirname);
      &lt;dirent.h&gt; int closedir(dir *dirp);
      &lt;dirent.h&gt; int readdir_r(dir *dirp, struct dirent *result);
      &lt;dirent.h&gt; long int telldir(dir *dirp);
      &lt;dirent.h&gt; struct dirent *readdir(dir *dirp);
      ...
      &lt;string.h&gt;&lt;strings.h&gt; char *index(const char *s, int c);
      &lt;string.h&gt;&lt;strings.h&gt; char *rindex(const char *s, int c);    </pre></td>
    </tr>
</table>


<p class="column8">
        Notice how perl stuck the '#define' statements at the
        beginning of each function. After this 'function' database was
        ready, the only thing needed was lisp code to handle database
        lookups for the keyword under the cursor. Similar approach can
        be user for any programming language. Just set up the
        database, entries to search; one per line.  that's it.



  <a name="365" id="365"></a>
  <h2>
      Word about installation &ndash; performance problems [19.29 or lower]

  </h2>




<p>
<p class="column8">
        Skip this part if you have 19.30+


<p class="column8">
        When you load this package, it immediately installs an <strong class="word">example</strong>
        post-command function. It assumes that you're using the &quot;Having a
        test drive&quot; C++ database and stored it as explained.  You propably
        want to remove that default post-command function and use your own
        definition. Here is how you remove it.


<p class="column8">
        Doing this is also recommended if you don't want post command
        actions, but want to use the tinytag-main<span class="super">-mouse</span> functions
        directly. Call them only when you need them.

<ul>
	<li>before any load command say: (setq tinytag-:load-hook nil)
	<li>If package is already loaded, say: C-u M-x tinytag-install.</li>
</ul>




<p class="column8">
        If your databases are big, or if you're afraid of the overall emacs
        performance I STRONGLY ADVICE THAT YOU REMOVE THAT post-command
        with methods (2) or (1) You can always call the database with the
        supplied keyboard or mouse commands when you need the information.



  <a name="366" id="366"></a>
  <h2>
      Having a test run

  </h2>




<p>
<p class="column8">
        There is sample C++ database from HP-UX 10 man 3C pages, which
        is unfortunately incomplete. You may consider using the BSD
        C-database instaed. The BSD is installed by default when you
        call <samp class="word">M-x</samp> <samp class="word">tinytag-install-sample-database-c</samp>. Rememeber that
        you really should replace those definitions with your own
        systems equivalents, because not all functions are found in
        all systems. Vendors are different.


<p class="column8">
        This is how you test this package.

<ul>
	<li>Go to empty buffer
<li>Add statement &quot;strcat(a,b)&quot; to the buffer
	</li>
<li>Turn on C++ mode
	</li>
<li>Be sure to have tinytag on (M-x load-library tinytag.el)
	</li>
<li>Move your cursor over the word &quot;strcat&quot; and wait few seconds.
            &lt;For very old Emacs, below 19.30: wave your cursor
	            back and forth about 5 times.&gt;</li>
</ul>




<p class="column8">
        You should see the &quot;strcat&quot;'s function's definition displayed in
        the echo area. Next, you can start writing your own databases to
        languages you use.



  <a name="367" id="367"></a>
  <h2>
      Installing support for your programming languages

  </h2>




<p>
<p class="column8">
        While you may have installed the default database for C/C++, you
        have to configure the variable <samp class="word">tinytag-:database-setup-table</samp> to
        include all languages where you have databases available. It is
        recommended that you keep all emacs related configuration,
        including databases, in one place, e.g.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      ~/elisp/config/    </pre></td>
    </tr>
</table>


<p class="column8">
        First you need databases which you must write yourself.
        e.g. emacs-tinytag-python-function.el where you describe the
        function, packages and call syntax. The only thing after creating the
        database is to tell where it can be found. E.g for php you would
        add couple of you own variables:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (defconst my-tinytag-:db-map-php
           '((func       &quot;emacs-config-tinytag-php.txt&quot;))
           &quot;Java database.&quot;)

      (defconst my-tinytag-:db-re-php
           '((&quot;.&quot;        (func)))  ;; See name FUNC in prev. variable
           &quot;PHP database.&quot;)    </pre></td>
    </tr>
</table>


<p class="column8">
        And tell tinytag.el that the Java is now known:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (defconst tinytag-:database-setup-table
        (list
         (list
          &quot;code-php\\|php&quot;
          '(my-tinytag-:db-map-php
            my-tinytag-:db-re-php))
        (list
          &quot;c-mode.....&quot;
          '(..
             ))))    </pre></td>
    </tr>
</table>


<p class="column7"><em><strong>
       C/C++ database</strong></em>



<p class="column8">
        Run c-function-list.pl that comes with Tiny Tools Distribution to
        generate function database.


<p class="column8">
        Alternatively copy the database from the end of this file or
        use M-x tinytag-install-sample-databases


<p class="column7"><em><strong>
       Java database</strong></em>



<p class="column8">
        Run script <samp class="word">java-function-list.pl</samp> that comes with Tiny Tools
        distribution to generate function database from the Sun JDK's javadoc
        html pages.  See the manual page of the script how to run it (--help
        option)


<p class="column8">
        NOTE: In SUN documentation, there is no System.out.print() or
        System.out.println() functions that could be extracted. Please add
        Those functions by hand to the database.


<p class="column8">
        This script is also run with call tinytag-install-sample-databases,
        provided that you have <samp class="word">perl</samp> and <samp class="word">java</samp> and <samp class="word">java-function-list.pl</samp>
        installed and located along PATH.


<p class="column7"><em><strong>
       Perl database</strong></em>



<p class="column8">
        &lt;coming&gt;


<p class="column8">
        Run perl-function-list.pl that comes with Tiny Tools Distribution to
        generate function database.  See the manual page of the script how to
        run it (--help option)



  <a name="368" id="368"></a>
  <h2>
      Database format and display

  </h2>




<p>
<p class="column8">
        There is nothing special in the database format, each entry must me
        in one line nad that's all. Try to find most suitable display format
        for your language, like the general method that is used for C/C++, Java
        and Perl

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      &lt;LIBRARY&gt; return-value function-name(function-parameters) REST-INFO    </pre></td>
    </tr>
</table>


<p class="column8">
        <strong class="word">Important</strong>: When function <samp class="word">tinytag-search-db</samp> searches the whole
        database, it gathers the lines that likely match and FIRST one that
        is found is displayed in the echo-area. So that you're aware of other
        matches, the count of matches is displayed

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      10: java.lang.System.out  void println()
      |
      Count of matches    </pre></td>
    </tr>
</table>


<p class="column8">
        If you have time, it would be sensible to move the most informational
        description of the function first in the list of lines, so that it
        get displayed. For example, you could move method this method first in
        the line and add [] inside function parameters to signal that the
        parameter is optional

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      java.lang.System.out  void print([Object obj])    </pre></td>
    </tr>
</table>


<p class="column8">
        Alternatively, you can keep the buffer <samp class="word">tinytag-:output-buffer</samp>
        visible e.g in separate frame, so that all the matched items are
        visible to you in case the one displayed in echo-are is not correct.



  <a name="369" id="369"></a>
  <h2>
      Differencies between 19.30+ and lower

  </h2>




<p>
<p class="column8">
        The 19.30 Emacs has idle hook, which runs after you move cursor. It
        doesn't run if you move mouse.  19.28 on the other hand has post
        command hook, that runs every time you either move cursor <strong class="word">OR</strong>
        move mouse.


<p class="column8">
        Now, to get display fast in 19.28, you propably want to wave
        your mouse fast couple of times. In 19.30 you can have immediate
        display with just one cursor move over the word.



  <a name="370" id="370"></a>
  <h2>
      What to do if you don't see the definition displayed?

  </h2>




<p>
<p class="column8">
        hem most informative is the internal debug which you turn on with:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      M-x tinytag-debug    </pre></td>
    </tr>
</table>


<p class="column8">
        Then call this function directly over the word whose definition
        you want to display (e.g. strcat in C++)

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      ESC ESC : (tinytag-post-command-1)
      ========
      Press this key combination and enter text to the right.    </pre></td>
    </tr>
</table>


<p class="column8">
        After that call there is buffer <em class="word">tinytag-debug</em> that has some
        information about called functions and parameters. Please
        investigate the call chain for possible problem. Is the database
        selected right? if the regexp used for search right? If you don't
        know how to read the debug buffer's output, just send the buffer's
        content to me and describe what you did and what was your current
        major mode.



  <a name="371" id="371"></a>
  <h2>
      Thank you

  </h2>




<p>
<p class="column8">
        Peter Simons <em><a href="mailto:simons@petium.rhein.de" >simons@petium.rhein.de</A></em> sent me
        NetBSD and Linux C databases and his perl script can help you
        to create your own database from the man pages.


<hr>
               <a name="372"  id="372"></a>
               <h1>
               Tinytf.el --- Document layout tool for '(T)echnical text (F)ormat

               </h1>



  <a name="373" id="373"></a>
  <h2>
      Preface, Jan 1997

  </h2>




<p>
<p class="column8">
        Late in the 1996 there was a need for a better text file
        handling than just plan <samp class="word">text-mode</samp>. I was looking for a simple
        tool to generate HTML pages out of text-based documents. After some
        researching on the web, I still couldn't find anything that would
        have been strictly a text-based solution. There were many &quot;languages&quot;
        from which the HTML could be generated, but really, I didn't want
        to learn any new language just for that. I can understand people
        that write their documents still using LaTeX, but Win32 Word
        is much suitable and more known than any of those exotic formats.
        The project started by creating the tool that converted text into
        HTML (Perl t2html.pl script) and then writing a Emacs package to
        help writing the text files. It has been proven to be really nice
        combination where flexibility meets cross-platform demands.



  <a name="374" id="374"></a>
  <h2>
      Overview of features

  </h2>




<p>
<p class="column8">
        You can use <samp class="word">M-x</samp> <samp class="word">add-change-log-entry-other-window</samp> (C-x 4 a) to
        create a standard ChangeLog record for your changes under the
        headings.


<p class="column8">
        The text layout you write

<ul>
	<li>You write text in rigid format called 'Technical'
<li>There are only two heading levels, one at column 0, and
            another at column 4. NO OTHER SUB-HEADINGS SUPPORTED.
	</li>
<li>Text is written at column 8, at the first standard tab position.
	</li>
<li>Each column has different meaning how text is interpreted
            into HTML with t2html.pl perl script.
	</li>
<li>The full 'Technical text format' is described in the
            function description of <samp class="word">tinytf-mode</samp>. The most recent description
            is always described in the perl program t2html.pl --help
	</li>
<li>The is only a handful, natural, mark up conventions for PLAIN TEXT.
            The whole idea was that you do not need to learn any
            mark up language, but just write standard looking text, which is
            easily managed and edited with any editor. In addition <samp class="word">diff(1)</samp>,
            <samp class="word">patch(1)</samp> and <samp class="word">cvs(1)</samp> are the most effective tools to keep your
            &quot;text&quot; document project in condition and encourage others to
	            contribute fixes to your text files.</li>
</ul>




<p class="column8">
        This package

<ul>
	<li>Can show text in outline style manner: you can open and close
            headings.
<li>Provides commands to move among headings easily.
	</li>
<li>Capitalizes heading with one command.
	</li>
<li>Numbers headings with one command.
	</li>
<li>Text is untabified in regular intervals.
	</li>
<li>On-line help in 19.30+. It assist you writing the text
            by displaying message in echo area: how the text is interpreted by
            t2html.pl program, that is, how the text would look in HTML.
	</li>
<li>Offer functions to mark text with special text MARKERS that
            would produce &lt;STRONG&gt; or &lt;EMP&gt; and the like in the HTML.
	</li>
<li>A function is added to <samp class="word">find-file-hooks</samp> which will turn on
            the `tinytf-mode` if file contents look like it has been
	            written in Technical Format.</li>
</ul>





  <a name="375" id="375"></a>
  <h2>
      What is Technical Format?

  </h2>




<p>
<p class="column8">
        In short: it is list of text placement and formatting rules.
        And you're looking at it right now in this document.


<p class="column8">
        This package offers minor mode for text files and helps you to
        maintain correct layout. You can even convert file into HTML very
        easily with the perl script which is usually distributed in the
        complete Tiny Tools Kit or available separately from the CPAN
        under developer account JARIAALTO. You do not need to know a shred
        about the HTML language itself. And it is much easier to update
        text files, than deal with HTML itself. When you have text ready,
        you just feed it to the t2html.pl perl script and it gives you
        nicely formatted HTML page. Writing HTML <em class="word">home</em> pages is different
        story, because you usually want to include some graphics,
        JavaScript, PHP or JSP in the page. But putting some text document
        available in HTML format is easily made possible with this package.


<p class="column8">
        In the other hand, while you may not be interested in HTML, you
        could still consider writing your documents in 'Technical format'
        &ndash; with word <em class="word">technical</em> I refer to the layout of the text, which
        is very <strong class="word">rigid</strong>. In order to use facilities in this package,
        e.g. heading hiding/showing, the headings must be placed in
        columns 0 and 4 and the first word must be in <em class="word">uppercase</em>.  The
        actual text you write starts at column 8.


<p class="column8">
        If you decide write text like this, you become accustomed to the
        layout very quickly and it also helps keeping your documents in
        the same format.


<p class="column8">
        All in all, this package was primarily designed to help writing
        text documents for <samp class="word">t2html.pl</samp> and viewing document in <em class="word">outline</em>
        styled selective display. Please refer to mode description for
        full details of the text layout format.



  <a name="376" id="376"></a>
  <h2>
      TF described briefly

  </h2>




<p>
<p class="column8">
        Please note, that this section may be slightly out of date.
        You should read up to date information from the conversion
        program using command <samp class="word">t2html.pl</samp> <samp class="word">--help</samp> available at
        <a href="http://perl-text2html.sourceforge.net/" >http://perl-text2html.sourceforge.net/</A> and nearest Perl CPAN
        <a href="http://cpan.perl.org/modules/by-authors/id/J/JA/JARIAALTO/" >http://cpan.perl.org/modules/by-authors/id/J/JA/JARIAALTO/</A>


<p class="column8">
        --//-- TF description start


<p class="column8">
        0123456789 123456789 123456789 123456789 123456789 column numbers


<p class="column8">
        Table of contents

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
          &lt;Do not write any text inside this heading. It will&gt;
          &lt;be generated by tinytf.el automatically with M-x tinytf-toc&gt;    </pre></td>
    </tr>
</table>


<p class="column8">
        Heading 1 starts from left


<p class="column9"><strong>
         emphatised text at column 1,2,3</strong>



<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      This is heading 2 at column 4, started with big letter

          Standard text starts at column 8, you can
          *emphatize* text or make it _strong_ and show
          variable name like =ThisVariableSample=. notice that
          `ThisIsAlsoVariable' and you can even _*nest*_ the mark up.
          more txt in this paragraph txt txt txt txt txt txt txt txt
          txt txt txt txt txt txt txt txt txt txt txt txt txt txt txt
          txt txt txt txt txt txt txt txt txt txt txt txt txt txt txt

       Plain but colored text at columns 5, 6

         EMPhatised text starts at column 7, Like heading level 3

         &quot;Special STRONG EMP text in column 7 starts with double quote&quot;

          txt txt txt txt txt txt txt txt txt txt txt txt
          txt txt txt txt txt txt txt txt txt txt txt txt
          txt txt txt txt txt txt txt txt txt txt txt txt

           strong text at columns 9 and 11

            Column 10 has quotation text
            Column 10 has quotation text
            Column 10 has quotation text

              Column 12 is reserved for code examples
              Column 12 is reserved for code examples
              All text here are surrounded by SAMP codes

      Heading 2, at column 4 again

          txt txt txt txt txt txt txt txt txt txt txt txt
          txt txt txt txt txt txt txt txt txt txt txt txt
          txt txt txt txt txt txt txt txt txt txt txt txt

          o   Bullet 1 txt txt txt txt txt txt txt txt
              txt txt txt txt txt txt txt txt

              Notice that previous paragraph ends to P-comma code,
              it tells this paragraph to continue in bullet
              mode, otherwise this column at 12 would be
              interpreted as SAMPLE code.

          o   Bullet 2, text starts at column 12
          o   Bullet 3. Bullets are advised to keep together
          o   Bullet 4. Bullets are advised to keep together

          .   This is ordered list nbr 1, text starts at column 12
          .   This is ordered list nbr 2
          .   This is ordered list nbr 3

          .This line uses BR code, notice the DOT-code at beginning
          .This line uses BR code
          .This line uses BR code

         &quot;This is emphatized text starting at column 7&quot;
          .And this text is put after the previous line with BR code
         &quot;This starts as separate line just below previous one, EM&quot;
          .And continues again as usual with BR code

          See the document /document.txt, where
          tag is substituted with -base switch contents.

          Make this email address clickable foo\@site.com
          Do not make this email address clickable bar\@site.com,
          because it is only an example and not a real address.
          Noticed the minus(-) prefix at the beginning of url?    </pre></td>
    </tr>
</table>


<p class="column8">
        Heading level 1 again at column 0

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      Sub heading, column 4

          And regular text, column 8
          txt txt txt txt txt txt txt txt txt txt txt txt
          txt txt txt txt txt txt txt txt txt txt txt txt
          txt txt txt txt txt txt txt txt txt txt txt txt    </pre></td>
    </tr>
</table>


<p class="column8">
        --//-- TF description end



  <a name="377" id="377"></a>
  <h2>
      How do you write text

  </h2>




<p>
<p class="column8">
        This package turns on two minor modes: <samp class="word">tinytab-mode</samp>, that handles
        your TAB key movements and <samp class="word">tinytf-mode</samp>, the Technical format
        minor mode. If you're uncertain about how the column will be
        treated in HTML output, call following function. If you have 19.30+
        this is not necessary, see note about post command above.


<p class="column10"><em class="quote10">
          Do you wonder why 'z' prefix is default? Well, I wanted a fast
          key that was mostly unused. You can change that if you prefer
          some other key. See variable <samp class="word">tinytf-:mode-prefix-key</samp></em>


<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      z RET   tinytf-column-info-display    </pre></td>
    </tr>
</table>


<p class="column8">
        Normal text you write as usual, but if you want to mark regions
        as &quot;quotations&quot; or &quot;code examples&quot; there is appropriate indent
        commands

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      z /     tinytf-indent-region-text
      z '     tinytf-indent-region-quote
      z ;     tinytf-indent-region-sample
      z :     tinytf-indent-region-strong

      z t     tinytf-indent-paragraph-text
      z a     tinytf-indent-paragraph-text-as-is
      z l     tinytf-indent-paragraph-text-and-fill
      z q     tinytf-indent-paragraph-quote
      z Q     tinytf-indent-paragraph-quote-and-fill
      z s     tinytf-indent-paragraph-sample
      z 0     tinytf-indent-paragraph-zero    </pre></td>
    </tr>
</table>


<p class="column8">
        The <samp class="word">tinytf-indent-paragraph-text-as-is</samp> is a bit special, because
        it won't fill the text while it moves the paragraph to the text
        position. Instead it adds symbolic &lt;BR&gt; codes to the front of every
        moved line. In HTML this ensures that the lines will be shown
        exactly as you see them. See also BR mark commands.


<p class="column8">
        There is no functions for bullet creation, because you can write
        them easily by hand. Use <samp class="word">z</samp> <samp class="word">b</samp> to fill bullet text nicely.
        Bullets look like this

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      o   This is bullet..
          and cont'd line here
      o   Yet another bullet
          and cont'd line here    </pre></td>
    </tr>
</table>


<p class="column8">
        The <samp class="word">tinytab-mode</samp> will advance your tab key by 4 every time, so
        the text in the bullets go to the right column (12). Remember also
        to keep the <samp class="word">tinytab-return-key-mode</samp> on, because that continues
        lines as they were written above when you press return. See also
        bullet conversion command, which reformats previous text that used
        dashes(-) to separate bullets.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      z b     tinytf-bullet-format    </pre></td>
    </tr>
</table>



  <a name="378" id="378"></a>
  <h2>
      BR marking commands

  </h2>




<p>
<p class="column8">
        In Html, the text would normally wrap according to the browser's
        page width. But sometimes you may wish to tell exactly that
        it shouldn't wrap the lines according to browser. For example
        if you want to include a quoted text &quot;as is&quot; from the Usenet
        posts to your page, you need o add symbolic BR code to the beginning
        of each line. Like including the following quotation

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      &gt;&gt;Jim has a good point here...
      &gt;&gt;I would have expected that the system depends on..
      &gt;Yeah; but you hadn't looked at the /usr/adm/today.log
      &gt;    </pre></td>
    </tr>
</table>


<p class="column8">
        In order to add this to your page &quot;as is&quot;; you can do this:
        indent it as &quot;Sample&quot; and it will automatically show like that.
        But normally you want it to show as quoted text where you refer.
        Then you do:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      z Q         tinytf-indent-paragraph-quote
      z m b       tinytf-mark-br-paragraph    </pre></td>
    </tr>
</table>


<p class="column8">
        Which will prepend dot-code(.) to the front of every line.
        You can also add the <em class="word">dot-code</em> by yourself or use following
        command

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      z m B       tinytf-mark-br-line    </pre></td>
    </tr>
</table>



  <a name="379" id="379"></a>
  <h2>
      Heading writing and handling

  </h2>




<p>
<p class="column8">
        You can only use 2 heading levels, which normally suffices.  Sorry,
        there is no support for more deeper headings. You start headings
        with big letters or number at column 0 or 4. Here is some
        specialized commands for headings.


<p class="column8">
        This one converts first character of each heading to
        uppercase. This fixes mistakenly left lowercase letters.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      z f h     tinytf-heading-fix

      before command:
      heading
          heading

      after command:
      Heading
          Heading    </pre></td>
    </tr>
</table>


<p class="column8">
        You can (re)number heading easily with following command. If
        there is no number in the line, one is added to the beginning of
        heading. And if you have added new heading somewhere in the
        middle of text, just call this function and it renumbers all
        headings again. Running command with <em class="word">prefix</em> <em class="word">argument</em> removes
        numbering.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      z f 0     tinytf-heading-numbering

      before command:
      heading
          heading
      heading
          heading

      after command:
      1.0 heading
          1.1 heading
      2.0 heading
          2.1 heading    </pre></td>
    </tr>
</table>


<p class="column8">
        One note about renumbering. Some people write heading number so
        that they are closed with parenthesis. This style is not
        recommended with technical format style and when you do renumber,
        those parenthesis will be removed. The parenthesis style is not
        supported because the plain number style is more easily parsed
        and detected. In addition, the plain number style in headings is
        more widely used in the world.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      before command:
      1.0) heading
          1.1) heading

      after command:
      1.0 heading
          1.1 heading    </pre></td>
    </tr>
</table>



  <a name="380" id="380"></a>
  <h2>
      Heading fixing

  </h2>



<p>
<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      z f a   `tinytf-fix-all'
              Does lot's of things. Trim away trailing blanks
              from buffer. Untabify buffer.
              Renumber headings if needed. Delete extra whitespace
              around headings.

      z f c   `tinytf-heading-fix-case'
              convert current heading to lowercase

      z f C   `tinytf-heading-fix-case-all'
              convert all heading to lowercase    </pre></td>
    </tr>
</table>



  <a name="381" id="381"></a>
  <h2>
      About table of contents

  </h2>




<p>
<p class="column8">
        When you write text, you don't write the table of contents, but
        the headings. Be sure to add heading &quot;Table of contents&quot; somewhere
        in the document. To generate table of contents use commands:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      z T             tinytf-toc, Try with C-u argument too
      z mouse-1       tinytf-toc-mouse    </pre></td>
    </tr>
</table>



  <a name="382" id="382"></a>
  <h2>
      Selective display

  </h2>




<p>
<p class="column8">
        The hiding and showing of the headings and their text is done by
        using the outline/folding style display. There is no magic in this;
        but there is two interesting commands that you can use in any
        selective display buffer.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      z C-p     Prints selective display (what you actually see)
      z C-c     Copy selective display    </pre></td>
    </tr>
</table>



  <a name="383" id="383"></a>
  <h2>
      Word about key definitions when mode is turned on

  </h2>




<p>
<p class="column8">
        When the minor mode is active it overrides some commonly used
        key bindings and moves their original function under Control key.
        For example:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      original PgUp    --&gt; Now Control-PgUp
      original PgDown  --&gt; Now Control-PgDown

      PgUp             --&gt; Moving heading backward
      DownUp           --&gt; Moving heading forward    </pre></td>
    </tr>
</table>


<p class="column8">
        If you are using X environment or your emacs recognizes mouse,
        then there is one handy binding that opens or closes heading
        levels when you click over them.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      [mouse-3]       tinytf-mouse-context-sensitive    </pre></td>
    </tr>
</table>


<p class="column8">
        If you press this mouse button anywhere else than over the
        headings, it'll call original binding. This feature is similar as
        what is used in folding.el



  <a name="384" id="384"></a>
  <h2>
      Technical note: about the outline layout

  </h2>




<p>
<p class="column8">
        Speed was my primary goal when I added the outline code. But that
        came with a price: I would have liked that the Heading-1 were
        separated by at least one empty space so that the buffer would
        look visually better.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      heading1-1
          heading1-1
          heading1-2
                                  &lt;&lt; empty space here
      heading2-1
          heading2-1
          heading2-2    </pre></td>
    </tr>
</table>


<p class="column8">
        But that would have required adding some extra code to do bound
        checking every time the block is collapsed/opened. Currently I'm
        not going to add that checking because it would reduce speed and
        the check would cause unnecessary complexity to current code
        flow.



  <a name="385" id="385"></a>
  <h2>
      Technical note: about the default prefix key z

  </h2>




<p>
<p class="column8">
        The prefix key definition is on <samp class="word">tinytf-:mode-prefix-key</samp> That is
        currently &quot;z&quot; by default. If you type &quot;zz&quot;, you get plain &quot;z&quot;. I
        wanted to choose fast key and avoid wrist pain as much as
        possible. When you write TF text, you use this mode a lot and
        accessing commands should be easy too.



  <a name="386" id="386"></a>
  <h2>
      Technical note: post command

  </h2>




<p>
<p class="column8">
        This note is valid only for old Emacs releases, prior 20.x.


<p class="column8">
        While you type text in the buffer, the post command activates at
        regular intervals to untabify the buffer. The untabify is done
        because it makes formatting text easier and when you print the text
        file, you can be sure that the output is the same regardless of
        the tabs.


<p class="column8">
        If you have Emacs 19.30+ there is additional help feature available
        to you. When you sit still in some column position for few seconds,
        the column description will be shown automatically. That should
        help keeping you informed of the text layout.



  <a name="387" id="387"></a>
  <h2>
      Technical note: HTML utilities

  </h2>




<p>
<p class="column8">
        Two external utilities are searched for HTML generation:
        t2html.pl and htmlize.el. If these utilities are found,
        their locations are stored to plist of variable <samp class="word">tinytf-menu</samp>.
        See source code of function <samp class="word">tinytf-utility-programs-check</samp>
        for more.



  <a name="388" id="388"></a>
  <h2>
      Known bugs

  </h2>




<p>
<p class="column8">
        In Emacs 20.6 the TinyTf pull down menu contains bold titles
        for certain sections. This gets almost always garbled with
        the first pull-down. Selecting the menu second time shows
        correct section names with bold letters.


<hr>
               <a name="389"  id="389"></a>
               <h1>
               Tinyurl.el --- Mark and jump to any URL on current line.

               </h1>



  <a name="390" id="390"></a>
  <h2>
      Preface, oct 1997

  </h2>




<p>
<p class="column8">
        Hm. one day a collegue of mine had a problem with his VM and he
        explained to me that he wanted the <samp class="word">mouse-2</samp> to run netscape
        browser instead of the default Emacs <samp class="word">w3</samp> browser. While he was
        waving his cursor over the http link, I suddendly realized: that
        I wanted that in my RMAIL buffers too. (I later moved straight to
        GNUS). It seemed that every package had it's own url handling: VM, TM,
        GNUS, MH?


<p class="column8">
        But really, how about the rest of the buffers and modes? There was
        no general ULR dispatcher minor mode that would work with any buffer
        and with any mode.


<p class="column8">
        Now there is; I can browse any buffer or document and jump to URLs
        on the line. Works for programing modes too. You just position
        the cursor somewhere on the line, wait 2 secs  and the URLs are marked
        ready for launching.



  <a name="391" id="391"></a>
  <h2>
      Overview of features

  </h2>



<p>
<ul>
	<li>General URL handler: not just the regular http, ftp, but
            also for programming languages like Perl/Lisp/C++ and
	            man page cut(1) references and more...</li>
</ul>



<ul>
	<li>Requirements: In XEmacs, you must have <samp class="word">overlay.el</samp> package.
	            Emacs needs nothing special.</li>
</ul>



<ul>
	<li>When this global minor mode is on, wait few seconds and the
            current line will be scanned for urls. Because not all
            terminals show clolor, there is additional &quot;!&quot; character added to
            the front of URL for calling you to <em class="word">push</em> it.
<li>Once the minor mode is turned on, it occupies every buffer,
            but there is also function to turn the mode on or off per buffer
            basis, see <samp class="word">tinyurl-mode-1</samp>. When new file is loaded,
            <samp class="word">tinyurl-mode</samp> is activated for the buffer too.
	</li>
<li>Defines binding <samp class="word">mouse-2</samp> and <samp class="word">M-RET</samp> to call the url at
            point. These bindings are electric: If there is no button to push,
            the original binding is called according to underlying mode.
	</li>
<li>You can change the url handler sets on the fly: e.g.
            call lynx for a while, then switch to Netscape or use your custom
            browser. See <samp class="word">M-x</samp> <samp class="word">tinyurl-set-handler</samp>
	</li>
<li>Centralised url handling. If you call <samp class="word">tinyurl-install-to-packages</samp>
            then GNUS, TM, VM etc. now call TinyUrl and you only need to
	            configure things in one place.</li>
</ul>





  <a name="392" id="392"></a>
  <h2>
      Turning the URL recognizer on

  </h2>




<p>
<p class="column8">
        Load package with <samp class="word">require</samp> or via autoload (see installation
        instruction at the top of file) and call <samp class="word">M-x</samp> <samp class="word">tinyurl-mode</samp> to
        toggle the global minor mode on and off. The modeline displays <samp class="word">Ux</samp>
        when the mode is active. Character (x) is a one character shortname
        for browser that will activate, e.g. &quot;n&quot; for &quot;netscape&quot; browser set,
        (l) for lynx and (w) w3.


<p class="column8">
        If you want to turn the mode on or off for current buffer only, use
        <samp class="word">M-x</samp> <samp class="word">tinyurl-mode-1</samp>.


<p class="column8">
        The minor mode is turned on for all newly created (C-x C-f) or
        visited files, but if you make a new buffer with <samp class="word">M-x</samp>
        <samp class="word">switch-to-buffer</samp>, the URL mode is not turned on in those buffers.



  <a name="393" id="393"></a>
  <h2>
      Cacheing URLs for later use (offline reading)

  </h2>




<p>
<p class="column8">
        General design: When you're not connected to the Net, it doesn't
        make sense to call browser directly, but cache the pushed urls to
        separate buffer. When you're online again, you can go to the cache
        buffer and relaunch pointers.


<p class="column8">
        THE CURRENT IMPLEMENTATION RELIES ON GNUS ( M-x gnus ) TO DETECT
        THE OFF-LINE, ON-LINE STATUS OF YOUR NETWORK CONNECTION. THE
        DEFAULT STATUS IS off, if no gnus is currenly loaded in Emacs. THIS
        MEANS THAT ALL &quot;buttons&quot; ARE CACHED TO SEPARATE BUFFER UNLESS YOU
        TELL THAT YOU'RE CONNECTED via <samp class="word">M-x</samp> <samp class="word">gnus-agent-toggle-plugged</samp>.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      Please send a mail to maintainer  if you can know more
      better alternatives to check network connections transparently
      in Win32 and other environemnts.    </pre></td>
    </tr>
</table>


<p class="column8">
        The offline reading is possible with Gnus, where you can toggle
        between &quot;plugged&quot; and &quot;unplugged&quot; Gnus. The default unpluggged
        condition detector is function <samp class="word">tinyurl-plugged-p</samp>. It returns nil
        if you're running Gnus and it's in unplugged state.


<p class="column8">
        You can place your own unlpugged state detector to variable
        <samp class="word">tinyurl-:plugged-function</samp>. Cache buffer used is
        <samp class="word">tinyurl-:url-cache-buffer</samp>, which is <em class="word">URL-cache</em> by default.


<p class="column8">
        You can force Tinyurl to go &quot;plugged&quot; by calling <samp class="word">M-x</samp>
        <samp class="word">tinyurl-plugged-mode-toggle</samp>. This internal flag overrides anything
        else in the system. The indicator &quot;!&quot; in the modeline tells if
        TinyUrl thinks it is in plugged state. You may need to call this
        function if you don't use Gnus as an primary MUA.


<p class="column8">
        <strong class="word">Shortly:</strong>

<ul>
	<li>If you use Gnus, toggle Agent with J j to plugged/unplugged
            and Tinyurl will follow Gnus's state.
<li>If you don't use gnus, or do not have it loaded, call
            function <samp class="word">tinyurl-plugged-mode-toggle</samp> to tell the state of the
            net connection.
        O   If you have permanent network connection, add this piece of
	            of code in your $HOME/.emacs, near the the tinyurl setup</li>
</ul>



<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (setq tinyurl-:plugged-function 'tinyurl-plugged-always-p)    </pre></td>
    </tr>
</table>



  <a name="394" id="394"></a>
  <h2>
      Editing the url and selecting access method manually

  </h2>




<p>
<p class="column8">
        You can pass a prefix argument like <samp class="word">C-u</samp> before you press
        <samp class="word">mouse-2</samp> or <samp class="word">M-RET</samp> and edit two parameters: a) The URL location
        itself and b) the access method. Say e.g. that your default command
        table is netscape and you see url

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      file:/users/foo/file.txt    </pre></td>
    </tr>
</table>


<p class="column8">
        The `<a href="file:/'" >file:/'</A> would be normally considered external and accessed via
        <samp class="word">url</samp> method, which in this case is netscape. But you would like
        to use Emacs <samp class="word">find-file</samp> instead. Send <samp class="word">C-u</samp> and leave the url as
        is and change access method to:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      file    </pre></td>
    </tr>
</table>


<p class="column8">
        That's it. Remember however that you have full control and
        if you choose nonsense access method, which has nothing to do with
        the url, then you also carry the results, whatever they may be.



  <a name="395" id="395"></a>
  <h2>
      Ignoring URL in the buffer

  </h2>




<p>
<p class="column8">
        You can use hook <samp class="word">tinyurl-:dispatch-hook</samp> to check URL. If any of
        the functions return t, then the original binding in the mode is
        called and the TinyUrl is not used. E.g. In Dired buffer you want to
        ignore all URLs. There is default function
        <samp class="word">tinyurl-dispatch-ignore-p</samp> that does just this.



  <a name="396" id="396"></a>
  <h2>
      Centralised URL handling

  </h2>




<p>
<p class="column8">
        If you called <samp class="word">M-x</samp> <samp class="word">tinyurl-install-to-packages</samp> or had installation:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (add-hook 'tinyurl-:load-hook  'tinyurl-install-to-packages)    </pre></td>
    </tr>
</table>


<p class="column8">
        then GNUS, VM, TM, and other packages redirect urls to TinyUrl.
        This way you don't have to setup each package to your taste.
        Plus you got the benefit that you can change url handler set
        on the fly with <samp class="word">tinyurl-set-handler</samp>.



  <a name="397" id="397"></a>
  <h2>
      Ignoring some buffers for mode turn on and offs

  </h2>




<p>
<p class="column8">
        If you want to exclude some buffers from the mode turn on or offs,
        say <em class="word">VM</em> which does its own highlighting, then define your
        custom function like this

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      (setq tinyurl-:exclude-function 'my-tinyurl-exclude)

      (defun my-tinyurl-exclude (buffer)
         &quot;Exclude some buffers that use their own highlighting.&quot;
         (string-match &quot;VM\\|Article&quot; (buffer-name buffer)))    </pre></td>
    </tr>
</table>


<p class="column8">
        This only concern the golobal <samp class="word">tinyurl-mode</samp> function. You can
        still use <samp class="word">tinyurl-mode-1</samp> anywhere to toggle the mode setting.
        You use this variable when you don't want <samp class="word">tinyurl-mode</samp> to
        appear in buffer at all.



  <a name="398" id="398"></a>
  <h2>
      Validating url

  </h2>




<p>
<p class="column8">
        The <samp class="word">tinyurl-mark-line</samp> function doesn't check the validity of a
        matched regexp that was marked as pushable url. It's a dummy
        function that can only attach &quot;buttons&quot; and does nothing about
        their contents. But when you actually push the url, the url is run
        through functions in <samp class="word">tinyurl-:validate-hook</samp>. When any of the
        function returns t, it is a <em class="word">go</em> sign. The default handler
        <samp class="word">tinyurl-validate-url</samp> rejects any url that match &quot;foo|bar|quux&quot;.


<p class="column8">
        See also <samp class="word">tinyurl-:reject-url-regexp</samp> for more simpler use.



  <a name="399" id="399"></a>
  <h2>
      Choosing what agent handles which URL

  </h2>




<p>
<p class="column8">
        There is predefined <samp class="word">tinyurl-:command-table</samp> which is consulted where
        URL request should be delegated. By default <a href="http://" >http://</A> or ftp:/ or file:/
        requests are handed by <samp class="word">browse-url-netscape</samp> and remote tar or gz
        fileas are loaded with ange-ftp.


<p class="column8">
        You can completely customize the URL delegation by writing your
        own url handler set and placing it to <samp class="word">tinyurl-:url-handler-function</samp>.
        Copy the default setup and make your own modifications.



  <a name="400" id="400"></a>
  <h2>
      Changing the url handler list

  </h2>




<p>
<p class="column8">
        When you click the url to run the viewer, the current url handler
        list determines what method is used. E.g. If you normally want
        netscape to handle your URL, then the current set is labelled
        &quot;netscape&quot;. But in some situations, where you want to e.g. view text
        files or your resources in PC EXceed are low, or you want fast browser;
        then there is also &quot;lynx&quot; set. You change the browser set with command

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      tinyurl-set-handler   Meta mouse-2    </pre></td>
    </tr>
</table>


<p class="column8">
        The modeline will show the first string from your active set; <samp class="word">Un</samp>
        for Netscape, <samp class="word">Ul</samp> for lynx set and <samp class="word">Uw</samp> for w3 based set. You can
        add as many handler sets as you want by adding them to
        <samp class="word">tinyurl-:command-table</samp>



  <a name="401" id="401"></a>
  <h2>
      Exclamation character marks pushable URL

  </h2>




<p>
<p class="column8">
        NOTE: THE VISIBLE CHACTER APPLIES ONLY TO TERMINALS THAT DO NOT
        SUPPORT COLORS TO MARK PUSHABLE URLS. (Usually an Emacs started
        with -nw, or running inside a terminal.)


<p class="column8">
        When you see character &quot;!&quot; (netscape) or &quot;?&quot; (W3 browser) to appear
        in the front of the URLs, then you know that items are pushable.
        You can call the URL by clicking it with <samp class="word">mouse-2</samp> or tapping
        <samp class="word">M-RET</samp>. In the following line, two url's have been detected. The
        first one sends normal http request and the second one would create
        mail buffer for the address.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      Some previous line here
      !http://foo.com/dir/file.txt  !foo@bar.com
      Another line below    </pre></td>
    </tr>
</table>


<p class="column8">
        Elswhere your <samp class="word">mouse-2</samp> and <samp class="word">M-RET</samp> behave as usual. If you would
        like to paste(the mouse-2) somewhere in the &quot;previous&quot; or &quot;another&quot;
        line, that would work as you expected. But you can't paste inside
        the URL, because the URL is currently activated. If you need to do
        something like that, then you can use either of these strategies:

<ul>
	<li>Use <samp class="word">C-y</samp> to yamk the text inside marked url.
<li>move cursor out of the URL line; wait few seconds for
            &quot;!&quot; to disappear (the line is cleared). Go back and paste before
            you see &quot;!&quot; to appear back again.
	</li>
<li>Turn off the mode off with <samp class="word">M-x</samp> <samp class="word">tinyurl-mode-1</samp> for a while if
	            you don't need the URL features right now.</li>
</ul>




<p class="column10"><em class="quote10">
          <strong class="word">Note</strong>: The character &quot;!&quot; that you see, is not a real editable
          character, but part of the overlay. While your text may appear to
          be modified. That is not what happened. See Emacs info pages for
          more about overlays.</em>



<p class="column8">
        You can use variable <samp class="word">tinyurl-:display-glyph</samp> to control if the
        glyph is shown or not.




  <a name="402" id="402"></a>
  <h2>
      Accepted email URL

  </h2>




<p>
<p class="column8">
        The default accepted format is foo@site.com and if you see
        foo@site.com, that will not be recognized. Your can get this
        accepted by changing <samp class="word">tinyurl-:email-regexp</samp>. You could use \\&lt; and
        \\&gt; (word border marker) regexps instead of default characters &lt; &gt;.



  <a name="403" id="403"></a>
  <h2>
      Support for programming language URLs

  </h2>




<p>
<p class="column8">
        I'll gladly support any other languages. If you know the language
        you're using, drop me a mail and help me to undertand how I would
        add support to it. Especially I'd like to hear specs from Java
        programmers.


<p class="column7"><em><strong>
       C/C++</strong></em>



<p class="column8">
        The default agent to find C/C++ .h files is find-file.el's
        <samp class="word">ff-find-other-file</samp>. This will handle your #include urls.


<p class="column7"><em><strong>
       Perl</strong></em>



<p class="column8">
        There is support for these perl statements:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      use package;
      require package;    </pre></td>
    </tr>
</table>


<p class="column8">
        Functions that recognize those are under <samp class="word">tinyurl-find-url-perl*</samp>.
        The default find path for perl is <samp class="word">@INC</samp>. Perl related urls are
        delegated to separate tinyperl.el package. In addition perl compile
        error lines are recognized:

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      ERROR at FILE line NBR.    </pre></td>
    </tr>
</table>


<p class="column8">
        Perl pod page references are recognized in the format

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      perlfunc manpage
      See [perltoc]    </pre></td>
    </tr>
</table>


<p class="column7"><em><strong>
       Emacs lisp</strong></em>



<p class="column8">
        The url handler function is <samp class="word">tinyurl-find-url-lisp</samp> and Emacs
        <samp class="word">load-path</samp> is searched. The usual urls &quot;load-file&quot;, &quot;load-library&quot;
        &quot;autoload&quot; &quot;load&quot; are recognized. If you need to jump to function
        or variable definitions, you want to use a TinyLisp package, which
        offers minor mode solely for Emacs lisp programming purposes:
        Profiling, debugging, snooping hooks, you emacs packages, browsing
        code etc.


<p class="column7"><em><strong>
       Other languages</strong></em>



<p class="column8">
        Please let me know if you know package or you have code that can
        find other languages' URLs.


<p class="column7"><em><strong>
       Memory list</strong></em>


<ul>
	<li>Remember to define <samp class="word">ff-search-directories</samp> for <em class="word">find-file.el</em>
	            so that your C/C++ #include &lt;url&gt; will be found correctly.</li>
</ul>





  <a name="404" id="404"></a>
  <h2>
      Filename filter e.g. running catdoc for MS Word files

  </h2>




<p>
<p class="column8">
        There is table <samp class="word">tinyurl-:file-filter-table</samp> which can be used to
        handle found url. Eg if you want to treat all files ending
        to extension .doc as MS word files and feed them through
        <samp class="word">catdoc</samp> <a href="http://www.ice.ru/~vitus/works/" >http://www.ice.ru/~vitus/works/</A> which spits 7bit
        out, you can associate shell action to handle url. Respectively
        if you want to use <samp class="word">xv</samp> for viewing your images, you can associate
        that to the url. The default table handles these cases if you
        have xv and catdoc present. See variable description for more
        information. (You can also use your custom lisp url handler there)


<p class="column10"><em class="quote10">
          If you want to load the raw file into emacs, just supply
          prefix argument when you push url and you will be given choice
          to by-pass the set filters (if there is any) for the url.</em>




  <a name="405" id="405"></a>
  <h2>
      Code note: adding buttons to the current line

  </h2>




<p>
<p class="column8">
        The idle timer process is used to mark current line's urls with
        overlays. Please wait few seconds on a line and the ulrs that
        can be <em class="word">pushed</em> are marked. If there is no idle timer available,
        then a <samp class="word">post-command-hook</samp> is used.


<p class="column7"><em><strong>
       <span class="word-ref">[Next applies only to Emacs with no <samp class="word">run-with-idle-timer</samp> function]</span></strong></em>



<p class="column8">
        Using <samp class="word">post-command-hook</samp> is not an ideal solution, but at least
        this package works with older Emacs versions. The threshold how
        quicly the line is scanned for url buttons is determined by
        variable <samp class="word">tinyurl-:post-command-hook-threshold</samp>. The deafult value
        7 should give you enough time to use <samp class="word">mouse-2</samp> (paste) before the
        line is buttonized. Remember that <em class="word">vawing</em> you mouse creates
        events, so you can force buttonizing the line quite quickly.



  <a name="406" id="406"></a>
  <h2>
      Code note: overlay properties

  </h2>




<p>
<p class="column8">
        The overlays have nice feature where you can add string to be
        displayed to the side of an overlay. See the overlay properties in
        the Emacs info pages for more. The overlay <samp class="word">priority</samp> in this
        package is by default set to highest possible, so that the URL
        highighting is guarranteed to be dislayed. If you use some other
        package that also uses overlays, then decrease that package's
        overlay priorities. (If the package doesn't allow you to adjust the
        priorities, contact the package maintainer. To my opinion the
        priority value should be defined for all overlays).


<p class="column8">
        The only part that you should touch in the property list of the
        overlays, is the displayed string. You can choose anything you
        want, but prefer one character. By default the &quot;!&quot; is shown in
        both Windowed and non-windowed version.


<p class="column8">
        The overlays have property <samp class="word">owner</samp> which tells to whom
        particular overlays belong. In this case the owner is this package,
        <samp class="word">tinyurl</samp>. It is a good practise for all overlays to identify
        themselves via this 'owner property.



  <a name="407" id="407"></a>
  <h2>
      Code Note: overlay management

  </h2>




<p>
<p class="column9"><strong>
         Let's consider what <samp class="word">font-lock</samp> does for buffer for a moment: it
         marks whole buffer with faces (colors). While design this package,
         the goal was not to add buffer with full of clickable overlays,
         while that could have been done easily. The reason is efficiency
         and avoiding &quot;highlight&quot; bloat.</strong>



<p class="column9"><strong>
         Instead old overlays are removed and new ones are created only for
         current line, typically the count is between 1 .. 4. When you move
         to another place, these old overlays are destroyed and new ones
         created. The current line may now may have only 1 URL, so only one
         overlay was needed this time.</strong>



<p class="column9"><strong>
         For that reason you must wait for idle timer process to do its
         work on current line, before you can see those clickable URL
         buttons.</strong>



<p class="column9"><strong>
         Using only small number of overlays keeps the code clean and user
         friendly. It's also faster than buttonizing whole 500K faq
         document in one pass.</strong>




  <a name="408" id="408"></a>
  <h2>
      Code Note: Adding support for new URL type

  </h2>




<p>
<p class="column8">
        If you see new url that you would like to have supported and you
        know lisp, then the changes needed are:

<ul>
	<li><samp class="word">tinyurl-mark-line</samp>, Add regexp to match the URL. Think carefully
            where to put the regexp and make is as restrictive as you can.
            Remember that first OR match is picked.
<li><samp class="word">tinyurl-type</samp>, Add new type for URL
	</li>
<li><samp class="word">tinyurl-command-table-default-1</samp> Add default handler
	</li>
<li>Write the URL handler.
	</li>
<li>Run <samp class="word">tinyurl-command-table-defaults-set</samp> to make the new handler
	            seen in the default agent function list</li>
</ul>




<p class="column8">
        To make changes do this:

<ul>
	<li>copy original version to <samp class="word">tinyurl.el.orig</samp>
<li>Make changes
	<li>Produce diff `diff -b -w -u  tinyurl.el.orig tinyurl.el'</li>
</ul>




<p class="column8">
        Then send diff to the maintainer. Use unified diff format (-u) if
        possible. Second chance is to use context diff (-c). Other diff
        formats are not accepted.



  <a name="409" id="409"></a>
  <h2>
      Sending a bug report

  </h2>




<p>
<p class="column8">
        If you have a line where url is highlighted, but it doesn't cover
        right characters, then do this:

<ul>
	<li><samp class="word">M-x</samp> <samp class="word">tinyurl-submit-bug-report</samp>
<li>Copy the <strong class="word">WHOLE</strong> line to the mail buffer.
	</li>
<li>Turn on debug with <samp class="word">M-x</samp> <samp class="word">tinyurl-debug-toggle</samp>
	</li>
<li>Be sure Url gets highlighted. End debug with
            <samp class="word">M-x</samp> <samp class="word">tinyurl-debug-toggle</samp> and copy the content of
            <em class="word">tinyurl-debug</em> to the mail
	<li>Attach desctiption of the bug and send mail.</li>
</ul>




<p class="column8">
        Btw, in win32 the file url on <samp class="word">C:</samp> disk is written like

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      file://localhost/C|/foo/bar/baz.html#here    </pre></td>
    </tr>
</table>


<p class="column8">
        And according to RFC, if you leave out the &lt;host&gt;, the localhost is
        automatically assumed.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      file:///C|/foo/bar/baz.html#here    </pre></td>
    </tr>
</table>



  <a name="410" id="410"></a>
  <h2>
      Known Bugs

  </h2>




<p>
<p class="column8">
        The URL is highlighted by setting <samp class="word">mouse-face</samp> to property
        <samp class="word">highligh</samp>. But I have seen that Emacs 19.34 in HP Unix with X
        window sometimes won't show the highlight when cursor is moved
        over the URL. Go figure why. I have heard similar reports from
        XEmacs 20.4.


<p class="column8">
        If you know what is causing this effect, let me know.



  <a name="411" id="411"></a>
  <h2>
      Todo

  </h2>




<p>
<p class="column8">
        Add support for Java-Find.el



<hr>
               <a name="412"  id="412"></a>
               <h1>
               Tinyvc.el --- CVS and RCS log minor mode. Checkout, Check-in...

               </h1>



  <a name="413" id="413"></a>
  <h2>
      Preface, Dec 1996

  </h2>




<p>
<p class="column8">
        In work there may be very complex RCS revision numbers, multiple
        branches and I may have several branches CheckedOut for testing,
        correcting, and developing new features. It seemed natural to
        handle this &quot;multiversioning&quot; control from the log output.



  <a name="414" id="414"></a>
  <h2>
      Overview of features

  </h2>



<p>
<ul>
	<li>Companion to <em class="word">vc.el</em>, Minor mode for the log buffer (C-x v l)
<li>Highlighing supported in Windowed emacs's.
	</li>
<li>You can 1) Lock a file 2) unclock file
            3) show status 4) pop to buffer where log belongs and more
            5) ChekOut multiple revisions for viewing purposes
	            6) (un/mark viewed versions) and more..</li>
</ul>





  <a name="415" id="415"></a>
  <h2>
      Do you need this package

  </h2>




<p>
<p class="column8">
        If you don't use RCS/CVS don't load this package, it only works for
        <samp class="word">log</samp> output and expects to parse buffers in that format. If you
        don't use many branches and thusly vc's log output much, this
        package may not be essential to you. This pacakge uses colors if
        window system is detected, but it partially copes with non-window
        system too, so that e.g. marks appear in the buffer as charaxter
        codes.

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      revision 1.25       locked by: xx;
      date: 1997/11/10 17:20:45;  author: xx;  state: Exp;  lines: +3    </pre></td>
    </tr>
</table>


<p class="column8">
        In the above lines the first line, starting from &quot;1.25&quot; is
        highlighted (version number). In next line: 97/11/10
        (the YY year is significant), &quot;xx&quot; and &quot;Exp&quot; are highlighted.


<hr>
               <a name="416"  id="416"></a>
               <h1>
               Tinyxreg.el --- Restore points/win cfg stored in reg. via X-popup.

               </h1>



  <a name="417" id="417"></a>
  <h2>
      Preface, oct 1995

  </h2>




<p>
<p class="column8">
        I saw post in comp.emacs by  <em><a href="mailto:cpg@cs.utexas.edu" >cpg@cs.utexas.edu</A></em> Carlos Puchol

<p>
<table class="shade-normal">
    <tr>
    <td class="shade-normal-attrib" valign="top">
    <pre>
      I find that my life would be remarkably eased if only I
      could &quot;jump&quot; to the marks from a menu.

      Please, let me know if i can implement this myself
      through some sort of macro or something.    </pre></td>
    </tr>
</table>


<p class="column8">
        As a hobby I started quicly sketching what the person should
        do.. I dind't plan to write any code. It just happened that I
        got interested in the subject and started experimenting with
        couple of functions.


<p class="column8">
        As a result I had complete package in hand within an hour or
        so, which I also posted to the group. Later on I properly
        packaged all the functions here and rewote whole thing.



  <a name="418" id="418"></a>
  <h2>
      Overview of features

  </h2>



<p>
<ul>
	<li>Stores point/win cfg to X-POPUP LIST while storing it to register
	<li>Use X-popup to pick register associated with the file.</li>
</ul>





  <a name="419" id="419"></a>
  <h2>
      Register update note

  </h2>




<p>
<p class="column8">
        If you wonder why some of the registers disappear from the popup
        while you were sure you just stored some point to them, the reason is
        here.


<p class="column8">
        If you kill some buffer, or reload it again with
        find-alternate-file that means that the register reference &quot;dies&quot;.
        That's why the main function tinyxreg-jump-to-register calls a house
        keeping function tinyxreg-update to make sure you can't select invalid
        registers. So, trust the poup: it tells what registes are
        available.




<!--    ......................................................................
    DOCUMENT END BLOCK
    ......................................................................
-->

<hr>
<em    class="footer">
<p>
This file has been automatically generated from plain text file
with
<a href="http://freshmeat.net/projects/perl-text2html">t2html</a>
<br>
Last updated: 2008-08-09 18:03<br>
</em    class="footer">
</body>
</html>
